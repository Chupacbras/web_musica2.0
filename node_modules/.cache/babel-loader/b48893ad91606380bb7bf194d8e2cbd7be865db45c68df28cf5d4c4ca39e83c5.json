{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"NextURL\", {\n  enumerable: true,\n  get: function () {\n    return NextURL;\n  }\n});\nconst _detectdomainlocale = require(\"../../shared/lib/i18n/detect-domain-locale\");\nconst _formatnextpathnameinfo = require(\"../../shared/lib/router/utils/format-next-pathname-info\");\nconst _gethostname = require(\"../../shared/lib/get-hostname\");\nconst _getnextpathnameinfo = require(\"../../shared/lib/router/utils/get-next-pathname-info\");\nconst REGEX_LOCALHOST_HOSTNAME = /(?!^https?:\\/\\/)(127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\\[::1\\]|localhost)/;\nfunction parseURL(url, base) {\n  return new URL(String(url).replace(REGEX_LOCALHOST_HOSTNAME, \"localhost\"), base && String(base).replace(REGEX_LOCALHOST_HOSTNAME, \"localhost\"));\n}\nconst Internal = Symbol(\"NextURLInternal\");\nclass NextURL {\n  constructor(input, baseOrOpts, opts) {\n    let base;\n    let options;\n    if (typeof baseOrOpts === \"object\" && \"pathname\" in baseOrOpts || typeof baseOrOpts === \"string\") {\n      base = baseOrOpts;\n      options = opts || {};\n    } else {\n      options = opts || baseOrOpts || {};\n    }\n    this[Internal] = {\n      url: parseURL(input, base ?? options.base),\n      options: options,\n      basePath: \"\"\n    };\n    this.analyze();\n  }\n  analyze() {\n    var _this_Internal_options_nextConfig_i18n, _this_Internal_options_nextConfig, _this_Internal_domainLocale, _this_Internal_options_nextConfig_i18n1, _this_Internal_options_nextConfig1;\n    const info = (0, _getnextpathnameinfo.getNextPathnameInfo)(this[Internal].url.pathname, {\n      nextConfig: this[Internal].options.nextConfig,\n      parseData: !process.env.__NEXT_NO_MIDDLEWARE_URL_NORMALIZE,\n      i18nProvider: this[Internal].options.i18nProvider\n    });\n    const hostname = (0, _gethostname.getHostname)(this[Internal].url, this[Internal].options.headers);\n    this[Internal].domainLocale = this[Internal].options.i18nProvider ? this[Internal].options.i18nProvider.detectDomainLocale(hostname) : (0, _detectdomainlocale.detectDomainLocale)((_this_Internal_options_nextConfig = this[Internal].options.nextConfig) == null ? void 0 : (_this_Internal_options_nextConfig_i18n = _this_Internal_options_nextConfig.i18n) == null ? void 0 : _this_Internal_options_nextConfig_i18n.domains, hostname);\n    const defaultLocale = ((_this_Internal_domainLocale = this[Internal].domainLocale) == null ? void 0 : _this_Internal_domainLocale.defaultLocale) || ((_this_Internal_options_nextConfig1 = this[Internal].options.nextConfig) == null ? void 0 : (_this_Internal_options_nextConfig_i18n1 = _this_Internal_options_nextConfig1.i18n) == null ? void 0 : _this_Internal_options_nextConfig_i18n1.defaultLocale);\n    this[Internal].url.pathname = info.pathname;\n    this[Internal].defaultLocale = defaultLocale;\n    this[Internal].basePath = info.basePath ?? \"\";\n    this[Internal].buildId = info.buildId;\n    this[Internal].locale = info.locale ?? defaultLocale;\n    this[Internal].trailingSlash = info.trailingSlash;\n  }\n  formatPathname() {\n    return (0, _formatnextpathnameinfo.formatNextPathnameInfo)({\n      basePath: this[Internal].basePath,\n      buildId: this[Internal].buildId,\n      defaultLocale: !this[Internal].options.forceLocale ? this[Internal].defaultLocale : undefined,\n      locale: this[Internal].locale,\n      pathname: this[Internal].url.pathname,\n      trailingSlash: this[Internal].trailingSlash\n    });\n  }\n  formatSearch() {\n    return this[Internal].url.search;\n  }\n  get buildId() {\n    return this[Internal].buildId;\n  }\n  set buildId(buildId) {\n    this[Internal].buildId = buildId;\n  }\n  get locale() {\n    return this[Internal].locale ?? \"\";\n  }\n  set locale(locale) {\n    var _this_Internal_options_nextConfig_i18n, _this_Internal_options_nextConfig;\n    if (!this[Internal].locale || !((_this_Internal_options_nextConfig = this[Internal].options.nextConfig) == null ? void 0 : (_this_Internal_options_nextConfig_i18n = _this_Internal_options_nextConfig.i18n) == null ? void 0 : _this_Internal_options_nextConfig_i18n.locales.includes(locale))) {\n      throw new TypeError(`The NextURL configuration includes no locale \"${locale}\"`);\n    }\n    this[Internal].locale = locale;\n  }\n  get defaultLocale() {\n    return this[Internal].defaultLocale;\n  }\n  get domainLocale() {\n    return this[Internal].domainLocale;\n  }\n  get searchParams() {\n    return this[Internal].url.searchParams;\n  }\n  get host() {\n    return this[Internal].url.host;\n  }\n  set host(value) {\n    this[Internal].url.host = value;\n  }\n  get hostname() {\n    return this[Internal].url.hostname;\n  }\n  set hostname(value) {\n    this[Internal].url.hostname = value;\n  }\n  get port() {\n    return this[Internal].url.port;\n  }\n  set port(value) {\n    this[Internal].url.port = value;\n  }\n  get protocol() {\n    return this[Internal].url.protocol;\n  }\n  set protocol(value) {\n    this[Internal].url.protocol = value;\n  }\n  get href() {\n    const pathname = this.formatPathname();\n    const search = this.formatSearch();\n    return `${this.protocol}//${this.host}${pathname}${search}${this.hash}`;\n  }\n  set href(url) {\n    this[Internal].url = parseURL(url);\n    this.analyze();\n  }\n  get origin() {\n    return this[Internal].url.origin;\n  }\n  get pathname() {\n    return this[Internal].url.pathname;\n  }\n  set pathname(value) {\n    this[Internal].url.pathname = value;\n  }\n  get hash() {\n    return this[Internal].url.hash;\n  }\n  set hash(value) {\n    this[Internal].url.hash = value;\n  }\n  get search() {\n    return this[Internal].url.search;\n  }\n  set search(value) {\n    this[Internal].url.search = value;\n  }\n  get password() {\n    return this[Internal].url.password;\n  }\n  set password(value) {\n    this[Internal].url.password = value;\n  }\n  get username() {\n    return this[Internal].url.username;\n  }\n  set username(value) {\n    this[Internal].url.username = value;\n  }\n  get basePath() {\n    return this[Internal].basePath;\n  }\n  set basePath(value) {\n    this[Internal].basePath = value.startsWith(\"/\") ? value : `/${value}`;\n  }\n  toString() {\n    return this.href;\n  }\n  toJSON() {\n    return this.href;\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return {\n      href: this.href,\n      origin: this.origin,\n      protocol: this.protocol,\n      username: this.username,\n      password: this.password,\n      host: this.host,\n      hostname: this.hostname,\n      port: this.port,\n      pathname: this.pathname,\n      search: this.search,\n      searchParams: this.searchParams,\n      hash: this.hash\n    };\n  }\n  clone() {\n    return new NextURL(String(this), this[Internal].options);\n  }\n}","map":{"version":3,"names":["NextURL","REGEX_LOCALHOST_HOSTNAME","parseURL","url","base","URL","String","replace","Internal","Symbol","constructor","input","baseOrOpts","opts","options","basePath","analyze","_this_Internal_options_nextConfig_i18n","_this_Internal_options_nextConfig","_this_Internal_domainLocale","_this_Internal_options_nextConfig_i18n1","_this_Internal_options_nextConfig1","info","_getnextpathnameinfo","getNextPathnameInfo","pathname","nextConfig","parseData","process","env","__NEXT_NO_MIDDLEWARE_URL_NORMALIZE","i18nProvider","hostname","_gethostname","getHostname","headers","domainLocale","detectDomainLocale","_detectdomainlocale","i18n","domains","defaultLocale","buildId","locale","trailingSlash","formatPathname","_formatnextpathnameinfo","formatNextPathnameInfo","forceLocale","undefined","formatSearch","search","locales","includes","TypeError","searchParams","host","value","port","protocol","href","hash","origin","password","username","startsWith","toString","toJSON","for","clone"],"sources":["../../../src/server/web/next-url.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}