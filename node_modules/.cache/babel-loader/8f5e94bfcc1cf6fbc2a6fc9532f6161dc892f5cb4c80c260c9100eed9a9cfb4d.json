{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  spans: null,\n  webpackInvalidSpans: null,\n  ProfilingPlugin: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  spans: function () {\n    return spans;\n  },\n  webpackInvalidSpans: function () {\n    return webpackInvalidSpans;\n  },\n  ProfilingPlugin: function () {\n    return ProfilingPlugin;\n  }\n});\nconst _webpack = require(\"next/dist/compiled/webpack/webpack\");\nconst pluginName = \"ProfilingPlugin\";\nconst spans = new WeakMap();\nconst moduleSpansByCompilation = new WeakMap();\nconst makeSpanByCompilation = new WeakMap();\nconst sealSpanByCompilation = new WeakMap();\nconst webpackInvalidSpans = new WeakMap();\nconst TRACE_LABELS_SEAL = [\"module assets\", \"create chunk assets\", \"asset render\", \"asset emit\", \"store asset\"];\nfunction inTraceLabelsSeal(label) {\n  return TRACE_LABELS_SEAL.some(l => label.startsWith(l));\n}\nclass ProfilingPlugin {\n  constructor({\n    runWebpackSpan\n  }) {\n    this.runWebpackSpan = runWebpackSpan;\n  }\n  apply(compiler) {\n    this.traceTopLevelHooks(compiler);\n    this.traceCompilationHooks(compiler);\n    this.compiler = compiler;\n  }\n  traceHookPair(spanName, startHook, stopHook, {\n    parentSpan,\n    attrs,\n    onStart,\n    onStop\n  } = {}) {\n    let span;\n    startHook.tap({\n      name: pluginName,\n      stage: -Infinity\n    }, (...params) => {\n      const name = typeof spanName === \"function\" ? spanName() : spanName;\n      const attributes = attrs ? attrs(...params) : attrs;\n      span = parentSpan ? parentSpan(...params).traceChild(name, attributes) : this.runWebpackSpan.traceChild(name, attributes);\n      if (onStart) onStart(span, ...params);\n    });\n    stopHook.tap({\n      name: pluginName,\n      stage: Infinity\n    }, (...params) => {\n      // `stopHook` may be triggered when `startHook` has not in cases\n      // where `stopHook` is used as the terminating event for more\n      // than one pair of hooks.\n      if (!span) {\n        return;\n      }\n      if (onStop) onStop(span, ...params);\n      span.stop();\n    });\n  }\n  traceTopLevelHooks(compiler) {\n    this.traceHookPair(\"webpack-compilation\", compiler.hooks.compilation, compiler.hooks.afterCompile, {\n      parentSpan: () => webpackInvalidSpans.get(compiler) || this.runWebpackSpan,\n      attrs: () => ({\n        name: compiler.name\n      }),\n      onStart: (span, compilation) => {\n        spans.set(compilation, span);\n        spans.set(compiler, span);\n        moduleSpansByCompilation.set(compilation, new WeakMap());\n      }\n    });\n    if (compiler.options.mode === \"development\") {\n      this.traceHookPair(() => `webpack-invalidated-${compiler.name}`, compiler.hooks.invalid, compiler.hooks.done, {\n        onStart: span => webpackInvalidSpans.set(compiler, span),\n        onStop: () => webpackInvalidSpans.delete(compiler),\n        attrs: fileName => ({\n          trigger: fileName || \"manual\"\n        })\n      });\n    }\n  }\n  traceCompilationHooks(compiler) {\n    this.traceHookPair(\"emit\", compiler.hooks.emit, compiler.hooks.afterEmit, {\n      parentSpan: () => webpackInvalidSpans.get(compiler) || this.runWebpackSpan\n    });\n    this.traceHookPair(\"make\", compiler.hooks.make, compiler.hooks.finishMake, {\n      parentSpan: compilation => {\n        const compilationSpan = spans.get(compilation);\n        if (!compilationSpan) {\n          return webpackInvalidSpans.get(compiler) || this.runWebpackSpan;\n        }\n        return compilationSpan;\n      },\n      onStart: (span, compilation) => {\n        makeSpanByCompilation.set(compilation, span);\n      },\n      onStop: (_span, compilation) => {\n        makeSpanByCompilation.delete(compilation);\n      }\n    });\n    compiler.hooks.compilation.tap({\n      name: pluginName,\n      stage: -Infinity\n    }, compilation => {\n      compilation.hooks.buildModule.tap(pluginName, module1 => {\n        var _compilation_moduleGraph;\n        const moduleType = (() => {\n          if (!module1.userRequest) {\n            return \"\";\n          }\n          return module1.userRequest.split(\".\").pop();\n        })();\n        const issuerModule = compilation == null ? void 0 : (_compilation_moduleGraph = compilation.moduleGraph) == null ? void 0 : _compilation_moduleGraph.getIssuer(module1);\n        let span;\n        const moduleSpans = moduleSpansByCompilation.get(compilation);\n        const spanName = `build-module${moduleType ? `-${moduleType}` : \"\"}`;\n        const issuerSpan = issuerModule && (moduleSpans == null ? void 0 : moduleSpans.get(issuerModule));\n        if (issuerSpan) {\n          span = issuerSpan.traceChild(spanName);\n        } else {\n          let parentSpan;\n          for (const incomingConnection of compilation.moduleGraph.getIncomingConnections(module1)) {\n            const entrySpan = spans.get(incomingConnection.dependency);\n            if (entrySpan) {\n              parentSpan = entrySpan;\n              break;\n            }\n          }\n          if (!parentSpan) {\n            const compilationSpan = spans.get(compilation);\n            if (!compilationSpan) {\n              return;\n            }\n            parentSpan = compilationSpan;\n          }\n          span = parentSpan.traceChild(spanName);\n        }\n        span.setAttribute(\"name\", module1.userRequest);\n        span.setAttribute(\"layer\", module1.layer);\n        moduleSpans.set(module1, span);\n      });\n      const moduleHooks = _webpack.NormalModule.getCompilationHooks(compilation);\n      moduleHooks.readResource.for(undefined).intercept({\n        register(tapInfo) {\n          const fn = tapInfo.fn;\n          tapInfo.fn = (loaderContext, callback) => {\n            const moduleSpan = loaderContext.currentTraceSpan.traceChild(`read-resource`);\n            fn(loaderContext, (err, result) => {\n              moduleSpan.stop();\n              callback(err, result);\n            });\n          };\n          return tapInfo;\n        }\n      });\n      moduleHooks.loader.tap(pluginName, (loaderContext, module1) => {\n        var _moduleSpansByCompilation_get;\n        const moduleSpan = (_moduleSpansByCompilation_get = moduleSpansByCompilation.get(compilation)) == null ? void 0 : _moduleSpansByCompilation_get.get(module1);\n        loaderContext.currentTraceSpan = moduleSpan;\n      });\n      compilation.hooks.succeedModule.tap(pluginName, module1 => {\n        var _moduleSpansByCompilation_get_get, _moduleSpansByCompilation_get;\n        moduleSpansByCompilation == null ? void 0 : (_moduleSpansByCompilation_get = moduleSpansByCompilation.get(compilation)) == null ? void 0 : (_moduleSpansByCompilation_get_get = _moduleSpansByCompilation_get.get(module1)) == null ? void 0 : _moduleSpansByCompilation_get_get.stop();\n      });\n      compilation.hooks.failedModule.tap(pluginName, module1 => {\n        var _moduleSpansByCompilation_get_get, _moduleSpansByCompilation_get;\n        moduleSpansByCompilation == null ? void 0 : (_moduleSpansByCompilation_get = moduleSpansByCompilation.get(compilation)) == null ? void 0 : (_moduleSpansByCompilation_get_get = _moduleSpansByCompilation_get.get(module1)) == null ? void 0 : _moduleSpansByCompilation_get_get.stop();\n      });\n      this.traceHookPair(\"seal\", compilation.hooks.seal, compilation.hooks.afterSeal, {\n        parentSpan: () => spans.get(compilation),\n        onStart(span) {\n          sealSpanByCompilation.set(compilation, span);\n        },\n        onStop() {\n          sealSpanByCompilation.delete(compilation);\n        }\n      });\n      compilation.hooks.addEntry.tap(pluginName, entry => {\n        const parentSpan = makeSpanByCompilation.get(compilation) || spans.get(compilation);\n        if (!parentSpan) {\n          return;\n        }\n        const addEntrySpan = parentSpan.traceChild(\"add-entry\");\n        addEntrySpan.setAttribute(\"request\", entry.request);\n        spans.set(entry, addEntrySpan);\n      });\n      compilation.hooks.succeedEntry.tap(pluginName, entry => {\n        var _spans_get;\n        (_spans_get = spans.get(entry)) == null ? void 0 : _spans_get.stop();\n        spans.delete(entry);\n      });\n      compilation.hooks.failedEntry.tap(pluginName, entry => {\n        var _spans_get;\n        (_spans_get = spans.get(entry)) == null ? void 0 : _spans_get.stop();\n        spans.delete(entry);\n      });\n      this.traceHookPair(\"chunk-graph\", compilation.hooks.beforeChunks, compilation.hooks.afterChunks, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"optimize\", compilation.hooks.optimize, compilation.hooks.reviveModules, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"optimize-modules\", compilation.hooks.optimizeModules, compilation.hooks.afterOptimizeModules, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"optimize-chunks\", compilation.hooks.optimizeChunks, compilation.hooks.afterOptimizeChunks, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"optimize-tree\", compilation.hooks.optimizeTree, compilation.hooks.afterOptimizeTree, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"optimize-chunk-modules\", compilation.hooks.optimizeChunkModules, compilation.hooks.afterOptimizeChunkModules, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"module-hash\", compilation.hooks.beforeModuleHash, compilation.hooks.afterModuleHash, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"code-generation\", compilation.hooks.beforeCodeGeneration, compilation.hooks.afterCodeGeneration, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"hash\", compilation.hooks.beforeHash, compilation.hooks.afterHash, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      this.traceHookPair(\"code-generation-jobs\", compilation.hooks.afterHash, compilation.hooks.beforeModuleAssets, {\n        parentSpan: () => sealSpanByCompilation.get(compilation) || spans.get(compilation)\n      });\n      const logs = new Map();\n      const originalTime = compilation.logger.time;\n      const originalTimeEnd = compilation.logger.timeEnd;\n      compilation.logger.time = label => {\n        if (!inTraceLabelsSeal(label)) {\n          return originalTime.call(compilation.logger, label);\n        }\n        const span = sealSpanByCompilation.get(compilation);\n        if (span) {\n          logs.set(label, span.traceChild(label.replace(/ /g, \"-\")));\n        }\n        return originalTime.call(compilation.logger, label);\n      };\n      compilation.logger.timeEnd = label => {\n        if (!inTraceLabelsSeal(label)) {\n          return originalTimeEnd.call(compilation.logger, label);\n        }\n        const span = logs.get(label);\n        if (span) {\n          span.stop();\n          logs.delete(label);\n        }\n        return originalTimeEnd.call(compilation.logger, label);\n      };\n    });\n  }\n}","map":{"version":3,"names":["spans","webpackInvalidSpans","ProfilingPlugin","pluginName","WeakMap","moduleSpansByCompilation","makeSpanByCompilation","sealSpanByCompilation","TRACE_LABELS_SEAL","inTraceLabelsSeal","label","some","l","startsWith","constructor","runWebpackSpan","apply","compiler","traceTopLevelHooks","traceCompilationHooks","traceHookPair","spanName","startHook","stopHook","parentSpan","attrs","onStart","onStop","span","tap","name","stage","Infinity","params","attributes","traceChild","stop","hooks","compilation","afterCompile","get","set","options","mode","invalid","done","delete","fileName","trigger","emit","afterEmit","make","finishMake","compilationSpan","_span","buildModule","module1","_compilation_moduleGraph","moduleType","userRequest","split","pop","issuerModule","moduleGraph","getIssuer","moduleSpans","issuerSpan","incomingConnection","getIncomingConnections","entrySpan","dependency","setAttribute","layer","moduleHooks","_webpack","NormalModule","getCompilationHooks","readResource","for","undefined","intercept","register","tapInfo","fn","loaderContext","callback","moduleSpan","currentTraceSpan","err","result","loader","_moduleSpansByCompilation_get","succeedModule","_moduleSpansByCompilation_get_get","failedModule","seal","afterSeal","addEntry","entry","addEntrySpan","request","succeedEntry","_spans_get","failedEntry","beforeChunks","afterChunks","optimize","reviveModules","optimizeModules","afterOptimizeModules","optimizeChunks","afterOptimizeChunks","optimizeTree","afterOptimizeTree","optimizeChunkModules","afterOptimizeChunkModules","beforeModuleHash","afterModuleHash","beforeCodeGeneration","afterCodeGeneration","beforeHash","afterHash","beforeModuleAssets","logs","Map","originalTime","logger","time","originalTimeEnd","timeEnd","call","replace"],"sources":["../../../../src/build/webpack/plugins/profiling-plugin.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}