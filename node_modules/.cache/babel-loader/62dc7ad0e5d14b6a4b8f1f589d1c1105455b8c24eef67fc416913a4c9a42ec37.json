{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"writeDefaultConfig\", {\n  enumerable: true,\n  get: function () {\n    return writeDefaultConfig;\n  }\n});\nconst _fs = require(\"fs\");\nconst _chalk = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/chalk\"));\nconst _os = /*#__PURE__*/_interop_require_default(require(\"os\"));\nconst _path = /*#__PURE__*/_interop_require_default(require(\"path\"));\nconst _commentjson = /*#__PURE__*/_interop_require_wildcard(require(\"next/dist/compiled/comment-json\"));\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../../build/output/log\"));\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nasync function writeDefaultConfig(baseDir, {\n  exists,\n  emptyEslintrc,\n  emptyPkgJsonConfig\n}, selectedConfig, eslintrcFile, pkgJsonPath, packageJsonConfig) {\n  if (!exists && emptyEslintrc && eslintrcFile) {\n    const ext = _path.default.extname(eslintrcFile);\n    let newFileContent;\n    if (ext === \".yaml\" || ext === \".yml\") {\n      newFileContent = \"extends: 'next'\";\n    } else {\n      newFileContent = _commentjson.stringify(selectedConfig, null, 2);\n      if (ext === \".js\") {\n        newFileContent = \"module.exports = \" + newFileContent;\n      }\n    }\n    await _fs.promises.writeFile(eslintrcFile, newFileContent + _os.default.EOL);\n    _log.info(`We detected an empty ESLint configuration file (${_chalk.default.bold(_path.default.basename(eslintrcFile))}) and updated it for you!`);\n  } else if (!exists && emptyPkgJsonConfig && packageJsonConfig) {\n    packageJsonConfig.eslintConfig = selectedConfig;\n    if (pkgJsonPath) await _fs.promises.writeFile(pkgJsonPath, _commentjson.stringify(packageJsonConfig, null, 2) + _os.default.EOL);\n    _log.info(`We detected an empty ${_chalk.default.bold(\"eslintConfig\")} field in package.json and updated it for you!`);\n  } else if (!exists) {\n    await _fs.promises.writeFile(_path.default.join(baseDir, \".eslintrc.json\"), _commentjson.stringify(selectedConfig, null, 2) + _os.default.EOL);\n    console.log(_chalk.default.green(`We created the ${_chalk.default.bold(\".eslintrc.json\")} file for you and included your selected configuration.`));\n  }\n}","map":{"version":3,"names":["writeDefaultConfig","baseDir","exists","emptyEslintrc","emptyPkgJsonConfig","selectedConfig","eslintrcFile","pkgJsonPath","packageJsonConfig","ext","_path","default","extname","newFileContent","_commentjson","stringify","_fs","promises","writeFile","_os","EOL","_log","info","_chalk","bold","basename","eslintConfig","join","console","log","green"],"sources":["../../../src/lib/eslint/writeDefaultConfig.ts"],"sourcesContent":[null],"mappings":";;;;;+BASsB;;;WAAAA,kBAAA;;;oBATS;6DACb;0DACH;4DACE;oEACY;4DAGR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEd,eAAeA,mBACpBC,OAAe,EACf;EAAEC,MAAM;EAAEC,aAAa;EAAEC;AAAkB,CAAmB,EAC9DC,cAAmB,EACnBC,YAA2B,EAC3BC,WAA0B,EAC1BC,iBAA+C;EAE/C,IAAI,CAACN,MAAA,IAAUC,aAAA,IAAiBG,YAAA,EAAc;IAC5C,MAAMG,GAAA,GAAMC,KAAA,CAAAC,OAAI,CAACC,OAAO,CAACN,YAAA;IAEzB,IAAIO,cAAA;IACJ,IAAIJ,GAAA,KAAQ,WAAWA,GAAA,KAAQ,QAAQ;MACrCI,cAAA,GAAiB;IACnB,OAAO;MACLA,cAAA,GAAiBC,YAAA,CAAYC,SAAS,CAACV,cAAA,EAAgB,MAAM;MAE7D,IAAII,GAAA,KAAQ,OAAO;QACjBI,cAAA,GAAiB,sBAAsBA,cAAA;MACzC;IACF;IAEA,MAAMG,GAAA,CAAAC,QAAE,CAACC,SAAS,CAACZ,YAAA,EAAcO,cAAA,GAAiBM,GAAA,CAAAR,OAAE,CAACS,GAAG;IAExDC,IAAA,CAAIC,IAAI,CACL,mDAAkDC,MAAA,CAAAZ,OAAK,CAACa,IAAI,CAC3Dd,KAAA,CAAAC,OAAI,CAACc,QAAQ,CAACnB,YAAA,EACd,2BAA0B;EAEhC,OAAO,IAAI,CAACJ,MAAA,IAAUE,kBAAA,IAAsBI,iBAAA,EAAmB;IAC7DA,iBAAA,CAAkBkB,YAAY,GAAGrB,cAAA;IAEjC,IAAIE,WAAA,EACF,MAAMS,GAAA,CAAAC,QAAE,CAACC,SAAS,CAChBX,WAAA,EACAO,YAAA,CAAYC,SAAS,CAACP,iBAAA,EAAmB,MAAM,KAAKW,GAAA,CAAAR,OAAE,CAACS,GAAG;IAG9DC,IAAA,CAAIC,IAAI,CACL,wBAAuBC,MAAA,CAAAZ,OAAK,CAACa,IAAI,CAChC,eACA,gDAA+C;EAErD,OAAO,IAAI,CAACtB,MAAA,EAAQ;IAClB,MAAMc,GAAA,CAAAC,QAAE,CAACC,SAAS,CAChBR,KAAA,CAAAC,OAAI,CAACgB,IAAI,CAAC1B,OAAA,EAAS,mBACnBa,YAAA,CAAYC,SAAS,CAACV,cAAA,EAAgB,MAAM,KAAKc,GAAA,CAAAR,OAAE,CAACS,GAAG;IAGzDQ,OAAA,CAAQC,GAAG,CACTN,MAAA,CAAAZ,OAAK,CAACmB,KAAK,CACR,kBAAiBP,MAAA,CAAAZ,OAAK,CAACa,IAAI,CAC1B,iBACA,yDAAwD;EAGhE;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}