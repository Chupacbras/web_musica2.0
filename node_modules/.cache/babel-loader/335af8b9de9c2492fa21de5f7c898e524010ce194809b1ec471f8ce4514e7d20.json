{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  getRequiredConfiguration: null,\n  writeConfigurationDefaults: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  getRequiredConfiguration: function () {\n    return getRequiredConfiguration;\n  },\n  writeConfigurationDefaults: function () {\n    return writeConfigurationDefaults;\n  }\n});\nconst _fs = require(\"fs\");\nconst _chalk = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/chalk\"));\nconst _commentjson = /*#__PURE__*/_interop_require_wildcard(require(\"next/dist/compiled/comment-json\"));\nconst _semver = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/semver\"));\nconst _os = /*#__PURE__*/_interop_require_default(require(\"os\"));\nconst _getTypeScriptConfiguration = require(\"./getTypeScriptConfiguration\");\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../../build/output/log\"));\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nfunction getDesiredCompilerOptions(ts, userTsConfig) {\n  var _userTsConfig_compilerOptions;\n  const o = {\n    // These are suggested values and will be set when not present in the\n    // tsconfig.json\n    lib: {\n      suggested: [\"dom\", \"dom.iterable\", \"esnext\"]\n    },\n    allowJs: {\n      suggested: true\n    },\n    skipLibCheck: {\n      suggested: true\n    },\n    strict: {\n      suggested: false\n    },\n    ...(_semver.default.lt(ts.version, \"5.0.0\") ? {\n      forceConsistentCasingInFileNames: {\n        suggested: true\n      }\n    } : undefined),\n    noEmit: {\n      suggested: true\n    },\n    ...(_semver.default.gte(ts.version, \"4.4.2\") ? {\n      incremental: {\n        suggested: true\n      }\n    } : undefined),\n    // These values are required and cannot be changed by the user\n    // Keep this in sync with the webpack config\n    // 'parsedValue' matches the output value from ts.parseJsonConfigFileContent()\n    esModuleInterop: {\n      value: true,\n      reason: \"requirement for SWC / babel\"\n    },\n    module: {\n      parsedValue: ts.ModuleKind.ESNext,\n      // All of these values work:\n      parsedValues: [ts.ModuleKind.ES2020, ts.ModuleKind.ESNext, ts.ModuleKind.CommonJS, ts.ModuleKind.AMD, ts.ModuleKind.NodeNext, ts.ModuleKind.Node16],\n      value: \"esnext\",\n      reason: \"for dynamic import() support\"\n    },\n    moduleResolution: {\n      // In TypeScript 5.0, `NodeJs` has renamed to `Node10`\n      parsedValue: ts.ModuleResolutionKind.Bundler ?? ts.ModuleResolutionKind.NodeNext ?? ts.ModuleResolutionKind.Node10 ?? ts.ModuleResolutionKind.NodeJs,\n      // All of these values work:\n      parsedValues: [ts.ModuleResolutionKind.Node10 ?? ts.ModuleResolutionKind.NodeJs,\n      // only newer TypeScript versions have this field, it\n      // will be filtered for new versions of TypeScript\n      ts.ModuleResolutionKind.Node12, ts.ModuleResolutionKind.Node16, ts.ModuleResolutionKind.NodeNext, ts.ModuleResolutionKind.Bundler].filter(val => typeof val !== \"undefined\"),\n      value: \"node\",\n      reason: \"to match webpack resolution\"\n    },\n    resolveJsonModule: {\n      value: true,\n      reason: \"to match webpack resolution\"\n    },\n    ...((userTsConfig == null ? void 0 : (_userTsConfig_compilerOptions = userTsConfig.compilerOptions) == null ? void 0 : _userTsConfig_compilerOptions.verbatimModuleSyntax) === true ? undefined : {\n      isolatedModules: {\n        value: true,\n        reason: \"requirement for SWC / Babel\"\n      }\n    }),\n    jsx: {\n      parsedValue: ts.JsxEmit.Preserve,\n      value: \"preserve\",\n      reason: \"next.js implements its own optimized jsx transform\"\n    }\n  };\n  return o;\n}\nfunction getRequiredConfiguration(ts) {\n  const res = {};\n  const desiredCompilerOptions = getDesiredCompilerOptions(ts);\n  for (const optionKey of Object.keys(desiredCompilerOptions)) {\n    const ev = desiredCompilerOptions[optionKey];\n    if (!(\"value\" in ev)) {\n      continue;\n    }\n    res[optionKey] = ev.parsedValue ?? ev.value;\n  }\n  return res;\n}\nasync function writeConfigurationDefaults(ts, tsConfigPath, isFirstTimeSetup, isAppDirEnabled, distDir, hasPagesDir) {\n  if (isFirstTimeSetup) {\n    await _fs.promises.writeFile(tsConfigPath, \"{}\" + _os.default.EOL);\n  }\n  const {\n    options: tsOptions,\n    raw: rawConfig\n  } = await (0, _getTypeScriptConfiguration.getTypeScriptConfiguration)(ts, tsConfigPath, true);\n  const userTsConfigContent = await _fs.promises.readFile(tsConfigPath, {\n    encoding: \"utf8\"\n  });\n  const userTsConfig = _commentjson.parse(userTsConfigContent);\n  if (userTsConfig.compilerOptions == null && !(\"extends\" in rawConfig)) {\n    userTsConfig.compilerOptions = {};\n    isFirstTimeSetup = true;\n  }\n  const desiredCompilerOptions = getDesiredCompilerOptions(ts, userTsConfig);\n  const suggestedActions = [];\n  const requiredActions = [];\n  for (const optionKey of Object.keys(desiredCompilerOptions)) {\n    const check = desiredCompilerOptions[optionKey];\n    if (\"suggested\" in check) {\n      if (!(optionKey in tsOptions)) {\n        if (!userTsConfig.compilerOptions) {\n          userTsConfig.compilerOptions = {};\n        }\n        userTsConfig.compilerOptions[optionKey] = check.suggested;\n        suggestedActions.push(_chalk.default.cyan(optionKey) + \" was set to \" + _chalk.default.bold(check.suggested));\n      }\n    } else if (\"value\" in check) {\n      var _check_parsedValues;\n      const ev = tsOptions[optionKey];\n      if (!(\"parsedValues\" in check ? (_check_parsedValues = check.parsedValues) == null ? void 0 : _check_parsedValues.includes(ev) : \"parsedValue\" in check ? check.parsedValue === ev : check.value === ev)) {\n        if (!userTsConfig.compilerOptions) {\n          userTsConfig.compilerOptions = {};\n        }\n        userTsConfig.compilerOptions[optionKey] = check.value;\n        requiredActions.push(_chalk.default.cyan(optionKey) + \" was set to \" + _chalk.default.bold(check.value) + ` (${check.reason})`);\n      }\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      const _ = check;\n    }\n  }\n  const nextAppTypes = `${distDir}/types/**/*.ts`;\n  if (!(\"include\" in rawConfig)) {\n    userTsConfig.include = isAppDirEnabled ? [\"next-env.d.ts\", nextAppTypes, \"**/*.ts\", \"**/*.tsx\"] : [\"next-env.d.ts\", \"**/*.ts\", \"**/*.tsx\"];\n    suggestedActions.push(_chalk.default.cyan(\"include\") + \" was set to \" + _chalk.default.bold(isAppDirEnabled ? `['next-env.d.ts', '${nextAppTypes}', '**/*.ts', '**/*.tsx']` : `['next-env.d.ts', '**/*.ts', '**/*.tsx']`));\n  } else if (isAppDirEnabled && !rawConfig.include.includes(nextAppTypes)) {\n    userTsConfig.include.push(nextAppTypes);\n    suggestedActions.push(_chalk.default.cyan(\"include\") + \" was updated to add \" + _chalk.default.bold(`'${nextAppTypes}'`));\n  }\n  // Enable the Next.js typescript plugin.\n  if (isAppDirEnabled) {\n    // Check if the config or the resolved config has the plugin already.\n    const plugins = [...(Array.isArray(tsOptions.plugins) ? tsOptions.plugins : []), ...(userTsConfig.compilerOptions && Array.isArray(userTsConfig.compilerOptions.plugins) ? userTsConfig.compilerOptions.plugins : [])];\n    const hasNextPlugin = plugins.some(({\n      name\n    }) => name === \"next\");\n    // If the TS config extends on another config, we can't add the `plugin` field\n    // because that will override the parent config's plugins.\n    // Instead we have to show a message to the user to add the plugin manually.\n    if (!userTsConfig.compilerOptions || plugins.length && !hasNextPlugin && \"extends\" in rawConfig && (!rawConfig.compilerOptions || !rawConfig.compilerOptions.plugins)) {\n      _log.info(`\\nYour ${_chalk.default.bold(\"tsconfig.json\")} extends another configuration, which means we cannot add the Next.js TypeScript plugin automatically. To improve your development experience, we recommend adding the Next.js plugin (\\`${_chalk.default.cyan('\"plugins\": [{ \"name\": \"next\" }]')}\\`) manually to your TypeScript configuration. Learn more: https://nextjs.org/docs/app/building-your-application/configuring/typescript#the-typescript-plugin\\n`);\n    } else if (!hasNextPlugin) {\n      if (!(\"plugins\" in userTsConfig.compilerOptions)) {\n        userTsConfig.compilerOptions.plugins = [];\n      }\n      userTsConfig.compilerOptions.plugins.push({\n        name: \"next\"\n      });\n      suggestedActions.push(_chalk.default.cyan(\"plugins\") + \" was updated to add \" + _chalk.default.bold(`{ name: 'next' }`));\n    }\n    // If `strict` is set to `false` or `strictNullChecks` is set to `false`,\n    // then set `strictNullChecks` to `true`.\n    if (hasPagesDir && isAppDirEnabled && userTsConfig.compilerOptions && !userTsConfig.compilerOptions.strict && !(\"strictNullChecks\" in userTsConfig.compilerOptions)) {\n      userTsConfig.compilerOptions.strictNullChecks = true;\n      suggestedActions.push(_chalk.default.cyan(\"strictNullChecks\") + \" was set to \" + _chalk.default.bold(`true`));\n    }\n  }\n  if (!(\"exclude\" in rawConfig)) {\n    userTsConfig.exclude = [\"node_modules\"];\n    suggestedActions.push(_chalk.default.cyan(\"exclude\") + \" was set to \" + _chalk.default.bold(`['node_modules']`));\n  }\n  if (suggestedActions.length < 1 && requiredActions.length < 1) {\n    return;\n  }\n  await _fs.promises.writeFile(tsConfigPath, _commentjson.stringify(userTsConfig, null, 2) + _os.default.EOL);\n  _log.info(\"\");\n  if (isFirstTimeSetup) {\n    _log.info(`We detected TypeScript in your project and created a ${_chalk.default.cyan(\"tsconfig.json\")} file for you.`);\n    return;\n  }\n  _log.info(`We detected TypeScript in your project and reconfigured your ${_chalk.default.cyan(\"tsconfig.json\")} file for you. Strict-mode is set to ${_chalk.default.cyan(\"false\")} by default.`);\n  if (suggestedActions.length) {\n    _log.info(`The following suggested values were added to your ${_chalk.default.cyan(\"tsconfig.json\")}. These values ${_chalk.default.cyan(\"can be changed\")} to fit your project's needs:\\n`);\n    suggestedActions.forEach(action => _log.info(`\\t- ${action}`));\n    _log.info(\"\");\n  }\n  if (requiredActions.length) {\n    _log.info(`The following ${_chalk.default.white(\"mandatory changes\")} were made to your ${_chalk.default.cyan(\"tsconfig.json\")}:\\n`);\n    requiredActions.forEach(action => _log.info(`\\t- ${action}`));\n    _log.info(\"\");\n  }\n}","map":{"version":3,"names":["getRequiredConfiguration","writeConfigurationDefaults","getDesiredCompilerOptions","ts","userTsConfig","_userTsConfig_compilerOptions","o","lib","suggested","allowJs","skipLibCheck","strict","_semver","default","lt","version","forceConsistentCasingInFileNames","undefined","noEmit","gte","incremental","esModuleInterop","value","reason","module","parsedValue","ModuleKind","ESNext","parsedValues","ES2020","CommonJS","AMD","NodeNext","Node16","moduleResolution","ModuleResolutionKind","Bundler","Node10","NodeJs","Node12","filter","val","resolveJsonModule","compilerOptions","verbatimModuleSyntax","isolatedModules","jsx","JsxEmit","Preserve","res","desiredCompilerOptions","optionKey","Object","keys","ev","tsConfigPath","isFirstTimeSetup","isAppDirEnabled","distDir","hasPagesDir","_fs","promises","writeFile","_os","EOL","options","tsOptions","raw","rawConfig","_getTypeScriptConfiguration","getTypeScriptConfiguration","userTsConfigContent","readFile","encoding","_commentjson","parse","suggestedActions","requiredActions","check","push","_chalk","cyan","bold","_check_parsedValues","includes","_","nextAppTypes","include","plugins","Array","isArray","hasNextPlugin","some","name","length","_log","info","strictNullChecks","exclude","stringify","forEach","action","white"],"sources":["../../../src/lib/typescript/writeConfigurationDefaults.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}