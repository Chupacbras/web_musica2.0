{"ast":null,"code":"#!/usr/bin/env node\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"nextDev\", {\n  enumerable: true,\n  get: function () {\n    return nextDev;\n  }\n});\nrequire(\"../server/lib/cpu-profile\");\nconst _utils = require(\"../server/lib/utils\");\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../build/output/log\"));\nconst _getprojectdir = require(\"../lib/get-project-dir\");\nconst _constants = require(\"../shared/lib/constants\");\nconst _path = /*#__PURE__*/_interop_require_default(require(\"path\"));\nconst _shared = require(\"../trace/shared\");\nconst _storage = require(\"../telemetry/storage\");\nconst _config = /*#__PURE__*/_interop_require_wildcard(require(\"../server/config\"));\nconst _findpagesdir = require(\"../lib/find-pages-dir\");\nconst _fileexists = require(\"../lib/file-exists\");\nconst _getnpxcommand = require(\"../lib/helpers/get-npx-command\");\nconst _mkcert = require(\"../lib/mkcert\");\nconst _uploadtrace = /*#__PURE__*/_interop_require_default(require(\"../trace/upload-trace\"));\nconst _env = require(\"@next/env\");\nconst _trace = require(\"../trace\");\nconst _turbopackwarning = require(\"../lib/turbopack-warning\");\nconst _child_process = require(\"child_process\");\nconst _setupserverworker = require(\"../server/lib/setup-server-worker\");\nconst _getreservedport = require(\"../lib/helpers/get-reserved-port\");\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nlet dir;\nlet child;\nlet config;\nlet isTurboSession = false;\nlet traceUploadUrl;\nlet sessionStopHandled = false;\nlet sessionStarted = Date.now();\nconst handleSessionStop = async signal => {\n  if (child) {\n    child.kill(signal || 0);\n  }\n  if (sessionStopHandled) return;\n  sessionStopHandled = true;\n  try {\n    const {\n      eventCliSessionStopped\n    } = require(\"../telemetry/events/session-stopped\");\n    config = config || (await (0, _config.default)(_constants.PHASE_DEVELOPMENT_SERVER, dir));\n    let telemetry = _shared.traceGlobals.get(\"telemetry\") || new _storage.Telemetry({\n      distDir: _path.default.join(dir, config.distDir)\n    });\n    let pagesDir = !!_shared.traceGlobals.get(\"pagesDir\");\n    let appDir = !!_shared.traceGlobals.get(\"appDir\");\n    if (typeof _shared.traceGlobals.get(\"pagesDir\") === \"undefined\" || typeof _shared.traceGlobals.get(\"appDir\") === \"undefined\") {\n      const pagesResult = (0, _findpagesdir.findPagesDir)(dir);\n      appDir = !!pagesResult.appDir;\n      pagesDir = !!pagesResult.pagesDir;\n    }\n    telemetry.record(eventCliSessionStopped({\n      cliCommand: \"dev\",\n      turboFlag: isTurboSession,\n      durationMilliseconds: Date.now() - sessionStarted,\n      pagesDir,\n      appDir\n    }), true);\n    telemetry.flushDetached(\"dev\", dir);\n  } catch (_) {\n    // errors here aren't actionable so don't add\n    // noise to the output\n  }\n  if (traceUploadUrl) {\n    (0, _uploadtrace.default)({\n      traceUploadUrl,\n      mode: \"dev\",\n      isTurboSession,\n      projectDir: dir,\n      distDir: config.distDir\n    });\n  }\n  // ensure we re-enable the terminal cursor before exiting\n  // the program, or the cursor could remain hidden\n  process.stdout.write(\"\\x1b[?25h\");\n  process.stdout.write(\"\\n\");\n  process.exit(0);\n};\nprocess.on(\"SIGINT\", () => handleSessionStop(\"SIGINT\"));\nprocess.on(\"SIGTERM\", () => handleSessionStop(\"SIGTERM\"));\nconst nextDev = async args => {\n  if (args[\"--help\"]) {\n    console.log(`\n      Description\n        Starts the application in development mode (hot-code reloading, error\n        reporting, etc.)\n\n      Usage\n        $ next dev <dir> -p <port number>\n\n      <dir> represents the directory of the Next.js application.\n      If no directory is provided, the current directory will be used.\n\n      Options\n        --port, -p      A port number on which to start the application\n        --hostname, -H  Hostname on which to start the application (default: 0.0.0.0)\n        --experimental-upload-trace=<trace-url>  [EXPERIMENTAL] Report a subset of the debugging trace to a remote http url. Includes sensitive data. Disabled by default and url must be provided.\n        --help, -h      Displays this message\n    `);\n    process.exit(0);\n  }\n  dir = (0, _getprojectdir.getProjectDir)(process.env.NEXT_PRIVATE_DEV_DIR || args._[0]);\n  // Check if pages dir exists and warn if not\n  if (!(await (0, _fileexists.fileExists)(dir, _fileexists.FileType.Directory))) {\n    (0, _utils.printAndExit)(`> No such directory exists as the project root: ${dir}`);\n  }\n  async function preflight(skipOnReboot) {\n    const {\n      getPackageVersion,\n      getDependencies\n    } = await Promise.resolve(require(\"../lib/get-package-version\"));\n    const [sassVersion, nodeSassVersion] = await Promise.all([getPackageVersion({\n      cwd: dir,\n      name: \"sass\"\n    }), getPackageVersion({\n      cwd: dir,\n      name: \"node-sass\"\n    })]);\n    if (sassVersion && nodeSassVersion) {\n      _log.warn(\"Your project has both `sass` and `node-sass` installed as dependencies, but should only use one or the other. \" + \"Please remove the `node-sass` dependency from your project. \" + \" Read more: https://nextjs.org/docs/messages/duplicate-sass\");\n    }\n    if (!skipOnReboot) {\n      const {\n        dependencies,\n        devDependencies\n      } = await getDependencies({\n        cwd: dir\n      });\n      // Warn if @next/font is installed as a dependency. Ignore `workspace:*` to not warn in the Next.js monorepo.\n      if (dependencies[\"@next/font\"] || devDependencies[\"@next/font\"] && devDependencies[\"@next/font\"] !== \"workspace:*\") {\n        const command = (0, _getnpxcommand.getNpxCommand)(dir);\n        _log.warn(\"Your project has `@next/font` installed as a dependency, please use the built-in `next/font` instead. \" + \"The `@next/font` package will be removed in Next.js 14. \" + `You can migrate by running \\`${command} @next/codemod@latest built-in-next-font .\\`. Read more: https://nextjs.org/docs/messages/built-in-next-font`);\n      }\n    }\n  }\n  const port = (0, _utils.getPort)(args);\n  if ((0, _getreservedport.isPortIsReserved)(port)) {\n    (0, _utils.printAndExit)((0, _getreservedport.getReservedPortExplanation)(port), 1);\n  }\n  // If neither --port nor PORT were specified, it's okay to retry new ports.\n  const allowRetry = args[\"--port\"] === undefined && process.env.PORT === undefined;\n  // We do not set a default host value here to prevent breaking\n  // some set-ups that rely on listening on other interfaces\n  const host = args[\"--hostname\"];\n  const {\n    loadedEnvFiles\n  } = (0, _env.loadEnvConfig)(dir, true, console, false);\n  let expFeatureInfo = [];\n  config = await (0, _config.default)(_constants.PHASE_DEVELOPMENT_SERVER, dir, {\n    onLoadUserConfig(userConfig) {\n      const userNextConfigExperimental = (0, _config.getEnabledExperimentalFeatures)(userConfig.experimental);\n      expFeatureInfo = userNextConfigExperimental.sort((a, b) => a.length - b.length);\n    }\n  });\n  // we need to reset env if we are going to create\n  // the worker process with the esm loader so that the\n  // initial env state is correct\n  let envInfo = [];\n  if (loadedEnvFiles.length > 0) {\n    envInfo = loadedEnvFiles.map(f => f.path);\n  }\n  const isExperimentalTestProxy = args[\"--experimental-test-proxy\"];\n  if (args[\"--experimental-upload-trace\"]) {\n    traceUploadUrl = args[\"--experimental-upload-trace\"];\n  }\n  const devServerOptions = {\n    dir,\n    port,\n    allowRetry,\n    isDev: true,\n    hostname: host,\n    isExperimentalTestProxy,\n    envInfo,\n    expFeatureInfo\n  };\n  if (args[\"--turbo\"]) {\n    process.env.TURBOPACK = \"1\";\n  }\n  if (process.env.TURBOPACK) {\n    isTurboSession = true;\n    await (0, _turbopackwarning.validateTurboNextConfig)({\n      ...devServerOptions,\n      isDev: true\n    });\n  }\n  const distDir = _path.default.join(dir, config.distDir ?? \".next\");\n  (0, _shared.setGlobal)(\"phase\", _constants.PHASE_DEVELOPMENT_SERVER);\n  (0, _shared.setGlobal)(\"distDir\", distDir);\n  const startServerPath = require.resolve(\"../server/lib/start-server\");\n  async function startServer(options) {\n    return new Promise(resolve => {\n      var _options_selfSignedCertificate;\n      let resolved = false;\n      child = (0, _child_process.fork)(startServerPath, {\n        stdio: \"inherit\",\n        env: {\n          ...(_env.initialEnv || process.env),\n          TURBOPACK: process.env.TURBOPACK,\n          NEXT_PRIVATE_WORKER: \"1\",\n          NODE_EXTRA_CA_CERTS: (_options_selfSignedCertificate = options.selfSignedCertificate) == null ? void 0 : _options_selfSignedCertificate.rootCA\n        }\n      });\n      child.on(\"message\", msg => {\n        if (msg && typeof msg === \"object\") {\n          if (msg.nextWorkerReady) {\n            child == null ? void 0 : child.send({\n              nextWorkerOptions: options\n            });\n          } else if (msg.nextServerReady && !resolved) {\n            resolved = true;\n            resolve();\n          }\n        }\n      });\n      child.on(\"exit\", async (code, signal) => {\n        if (sessionStopHandled || signal) {\n          return;\n        }\n        if (code === _setupserverworker.RESTART_EXIT_CODE) {\n          return startServer(options);\n        }\n        await handleSessionStop(signal);\n      });\n    });\n  }\n  const runDevServer = async reboot => {\n    try {\n      if (!!args[\"--experimental-https\"]) {\n        _log.warn(\"Self-signed certificates are currently an experimental feature, use at your own risk.\");\n        let certificate;\n        const key = args[\"--experimental-https-key\"];\n        const cert = args[\"--experimental-https-cert\"];\n        const rootCA = args[\"--experimental-https-ca\"];\n        if (key && cert) {\n          certificate = {\n            key: _path.default.resolve(key),\n            cert: _path.default.resolve(cert),\n            rootCA: rootCA ? _path.default.resolve(rootCA) : undefined\n          };\n        } else {\n          certificate = await (0, _mkcert.createSelfSignedCertificate)(host);\n        }\n        await startServer({\n          ...devServerOptions,\n          selfSignedCertificate: certificate\n        });\n      } else {\n        await startServer(devServerOptions);\n      }\n      await preflight(reboot);\n    } catch (err) {\n      console.error(err);\n      process.exit(1);\n    }\n  };\n  await (0, _trace.trace)(\"start-dev-server\").traceAsyncFn(async _ => {\n    await runDevServer(false);\n  });\n};\nfunction cleanup() {\n  if (!child) {\n    return;\n  }\n  child.kill(\"SIGTERM\");\n}\nprocess.on(\"exit\", cleanup);\nprocess.on(\"SIGINT\", cleanup);\nprocess.on(\"SIGTERM\", cleanup);","map":{"version":3,"names":["nextDev","dir","child","config","isTurboSession","traceUploadUrl","sessionStopHandled","sessionStarted","Date","now","handleSessionStop","signal","kill","eventCliSessionStopped","require","_config","default","_constants","PHASE_DEVELOPMENT_SERVER","telemetry","_shared","traceGlobals","get","_storage","Telemetry","distDir","_path","join","pagesDir","appDir","pagesResult","_findpagesdir","findPagesDir","record","cliCommand","turboFlag","durationMilliseconds","flushDetached","_","_uploadtrace","mode","projectDir","process","stdout","write","exit","on","args","console","log","_getprojectdir","getProjectDir","env","NEXT_PRIVATE_DEV_DIR","_fileexists","fileExists","FileType","Directory","_utils","printAndExit","preflight","skipOnReboot","getPackageVersion","getDependencies","Promise","resolve","sassVersion","nodeSassVersion","all","cwd","name","_log","warn","dependencies","devDependencies","command","_getnpxcommand","getNpxCommand","port","getPort","_getreservedport","isPortIsReserved","getReservedPortExplanation","allowRetry","undefined","PORT","host","loadedEnvFiles","_env","loadEnvConfig","expFeatureInfo","onLoadUserConfig","userConfig","userNextConfigExperimental","getEnabledExperimentalFeatures","experimental","sort","a","b","length","envInfo","map","f","path","isExperimentalTestProxy","devServerOptions","isDev","hostname","TURBOPACK","_turbopackwarning","validateTurboNextConfig","setGlobal","startServerPath","startServer","options","_options_selfSignedCertificate","resolved","_child_process","fork","stdio","initialEnv","NEXT_PRIVATE_WORKER","NODE_EXTRA_CA_CERTS","selfSignedCertificate","rootCA","msg","nextWorkerReady","send","nextWorkerOptions","nextServerReady","code","_setupserverworker","RESTART_EXIT_CODE","runDevServer","reboot","certificate","key","cert","_mkcert","createSelfSignedCertificate","err","error","_trace","trace","traceAsyncFn","cleanup"],"sources":["../../src/cli/next-dev.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}