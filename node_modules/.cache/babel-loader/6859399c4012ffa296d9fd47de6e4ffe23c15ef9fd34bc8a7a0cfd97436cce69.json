{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"eventCliSession\", {\n  enumerable: true,\n  get: function () {\n    return eventCliSession;\n  }\n});\nconst _path = /*#__PURE__*/_interop_require_default(require(\"path\"));\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nconst EVENT_VERSION = \"NEXT_CLI_SESSION_STARTED\";\nfunction hasBabelConfig(dir) {\n  try {\n    var _res_options_presets, _res_options, _res_options_plugins, _res_options1;\n    const noopFile = _path.default.join(dir, \"noop.js\");\n    const res = require(\"next/dist/compiled/babel/core\").loadPartialConfig({\n      cwd: dir,\n      filename: noopFile,\n      sourceFileName: noopFile\n    });\n    const isForTooling = ((_res_options = res.options) == null ? void 0 : (_res_options_presets = _res_options.presets) == null ? void 0 : _res_options_presets.every(e => {\n      var _e_file;\n      return (e == null ? void 0 : (_e_file = e.file) == null ? void 0 : _e_file.request) === \"next/babel\";\n    })) && ((_res_options1 = res.options) == null ? void 0 : (_res_options_plugins = _res_options1.plugins) == null ? void 0 : _res_options_plugins.length) === 0;\n    return res.hasFilesystemConfig() && !isForTooling;\n  } catch {\n    return false;\n  }\n}\nfunction eventCliSession(dir, nextConfig, event) {\n  // This should be an invariant, if it fails our build tooling is broken.\n  if (typeof \"13.5.3\" !== \"string\") {\n    return [];\n  }\n  const {\n    images,\n    i18n\n  } = nextConfig || {};\n  const payload = {\n    nextVersion: \"13.5.3\",\n    nodeVersion: process.version,\n    cliCommand: event.cliCommand,\n    isSrcDir: event.isSrcDir,\n    hasNowJson: event.hasNowJson,\n    isCustomServer: event.isCustomServer,\n    hasNextConfig: nextConfig.configOrigin !== \"default\",\n    buildTarget: \"default\",\n    hasWebpackConfig: typeof (nextConfig == null ? void 0 : nextConfig.webpack) === \"function\",\n    hasBabelConfig: hasBabelConfig(dir),\n    imageEnabled: !!images,\n    imageFutureEnabled: !!images,\n    basePathEnabled: !!(nextConfig == null ? void 0 : nextConfig.basePath),\n    i18nEnabled: !!i18n,\n    locales: (i18n == null ? void 0 : i18n.locales) ? i18n.locales.join(\",\") : null,\n    localeDomainsCount: (i18n == null ? void 0 : i18n.domains) ? i18n.domains.length : null,\n    localeDetectionEnabled: !i18n ? null : i18n.localeDetection !== false,\n    imageDomainsCount: (images == null ? void 0 : images.domains) ? images.domains.length : null,\n    imageRemotePatternsCount: (images == null ? void 0 : images.remotePatterns) ? images.remotePatterns.length : null,\n    imageSizes: (images == null ? void 0 : images.imageSizes) ? images.imageSizes.join(\",\") : null,\n    imageLoader: images == null ? void 0 : images.loader,\n    imageFormats: (images == null ? void 0 : images.formats) ? images.formats.join(\",\") : null,\n    nextConfigOutput: (nextConfig == null ? void 0 : nextConfig.output) || null,\n    trailingSlashEnabled: !!(nextConfig == null ? void 0 : nextConfig.trailingSlash),\n    reactStrictMode: !!(nextConfig == null ? void 0 : nextConfig.reactStrictMode),\n    webpackVersion: event.webpackVersion || null,\n    turboFlag: event.turboFlag || false,\n    appDir: event.appDir,\n    pagesDir: event.pagesDir\n  };\n  return [{\n    eventName: EVENT_VERSION,\n    payload\n  }];\n}","map":{"version":3,"names":["eventCliSession","EVENT_VERSION","hasBabelConfig","dir","_res_options_presets","_res_options","_res_options_plugins","_res_options1","noopFile","_path","default","join","res","require","loadPartialConfig","cwd","filename","sourceFileName","isForTooling","options","presets","every","e","_e_file","file","request","plugins","length","hasFilesystemConfig","nextConfig","event","images","i18n","payload","nextVersion","nodeVersion","process","version","cliCommand","isSrcDir","hasNowJson","isCustomServer","hasNextConfig","configOrigin","buildTarget","hasWebpackConfig","webpack","imageEnabled","imageFutureEnabled","basePathEnabled","basePath","i18nEnabled","locales","localeDomainsCount","domains","localeDetectionEnabled","localeDetection","imageDomainsCount","imageRemotePatternsCount","remotePatterns","imageSizes","imageLoader","loader","imageFormats","formats","nextConfigOutput","output","trailingSlashEnabled","trailingSlash","reactStrictMode","webpackVersion","turboFlag","appDir","pagesDir","eventName"],"sources":["../../../src/telemetry/events/version.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}