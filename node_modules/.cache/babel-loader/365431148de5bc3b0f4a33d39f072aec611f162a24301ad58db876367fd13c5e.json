{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"staticGenerationBailout\", {\n  enumerable: true,\n  get: function () {\n    return staticGenerationBailout;\n  }\n});\nconst _hooksservercontext = require(\"./hooks-server-context\");\nconst _staticgenerationasyncstorageexternal = require(\"./static-generation-async-storage.external\");\nclass StaticGenBailoutError extends Error {\n  constructor(...args) {\n    super(...args);\n    this.code = \"NEXT_STATIC_GEN_BAILOUT\";\n  }\n}\nfunction formatErrorMessage(reason, opts) {\n  const {\n    dynamic,\n    link\n  } = opts || {};\n  const suffix = link ? \" See more info here: \" + link : \"\";\n  return \"Page\" + (dynamic ? ' with `dynamic = \"' + dynamic + '\"`' : \"\") + \" couldn't be rendered statically because it used `\" + reason + \"`.\" + suffix;\n}\nconst staticGenerationBailout = (reason, opts) => {\n  const staticGenerationStore = _staticgenerationasyncstorageexternal.staticGenerationAsyncStorage.getStore();\n  if (staticGenerationStore == null ? void 0 : staticGenerationStore.forceStatic) {\n    return true;\n  }\n  if (staticGenerationStore == null ? void 0 : staticGenerationStore.dynamicShouldError) {\n    var _opts_dynamic;\n    throw new StaticGenBailoutError(formatErrorMessage(reason, {\n      ...opts,\n      dynamic: (_opts_dynamic = opts == null ? void 0 : opts.dynamic) != null ? _opts_dynamic : \"error\"\n    }));\n  }\n  if (staticGenerationStore) {\n    staticGenerationStore.revalidate = 0;\n  }\n  if (staticGenerationStore == null ? void 0 : staticGenerationStore.isStaticGeneration) {\n    const err = new _hooksservercontext.DynamicServerError(formatErrorMessage(reason, {\n      ...opts,\n      // this error should be caught by Next to bail out of static generation\n      // in case it's uncaught, this link provides some additional context as to why\n      link: \"https://nextjs.org/docs/messages/dynamic-server-error\"\n    }));\n    staticGenerationStore.dynamicUsageDescription = reason;\n    staticGenerationStore.dynamicUsageStack = err.stack;\n    throw err;\n  }\n  return false;\n};\nif ((typeof exports.default === 'function' || typeof exports.default === 'object' && exports.default !== null) && typeof exports.default.__esModule === 'undefined') {\n  Object.defineProperty(exports.default, '__esModule', {\n    value: true\n  });\n  Object.assign(exports.default, exports);\n  module.exports = exports.default;\n}","map":{"version":3,"names":["staticGenerationBailout","StaticGenBailoutError","Error","code","formatErrorMessage","reason","opts","dynamic","link","suffix","staticGenerationStore","_staticgenerationasyncstorageexternal","staticGenerationAsyncStorage","getStore","forceStatic","dynamicShouldError","_opts_dynamic","revalidate","isStaticGeneration","err","_hooksservercontext","DynamicServerError","dynamicUsageDescription","dynamicUsageStack","stack"],"sources":["../../../src/client/components/static-generation-bailout.ts"],"sourcesContent":[null],"mappings":";;;;;+BAsBa;;;WAAAA,uBAAA;;;oCAtBsB;sDACU;AAE7C,MAAMC,qBAAA,SAA8BC,KAAA;;;SAClCC,IAAA,GAAO;;AACT;AASA,SAASC,mBAAmBC,MAAc,EAAEC,IAAkB;EAC5D,MAAM;IAAEC,OAAO;IAAEC;EAAI,CAAE,GAAGF,IAAA,IAAQ,CAAC;EACnC,MAAMG,MAAA,GAASD,IAAA,GAAO,uBAAC,GAAuBA,IAAA,GAAS;EACvD,OAAO,MAAC,IACND,OAAA,GAAU,oBAAC,GAAqBA,OAAA,GAAQ,OAAO,EAAC,IACjD,uDAAqDF,MAAA,GAAO,OAAKI,MAAA;AACpE;AAEO,MAAMT,uBAAA,GAAmDA,CAC9DK,MAAA,EACAC,IAAA;EAEA,MAAMI,qBAAA,GAAwBC,qCAAA,CAAAC,4BAA4B,CAACC,QAAQ;EAEnE,IAAIH,qBAAA,oBAAAA,qBAAA,CAAuBI,WAAW,EAAE;IACtC,OAAO;EACT;EAEA,IAAIJ,qBAAA,oBAAAA,qBAAA,CAAuBK,kBAAkB,EAAE;QAEIC,aAAA;IADjD,MAAM,IAAIf,qBAAA,CACRG,kBAAA,CAAmBC,MAAA,EAAQ;MAAE,GAAGC,IAAI;MAAEC,OAAA,EAAS,CAAAS,aAAA,GAAAV,IAAA,oBAAAA,IAAA,CAAMC,OAAO,YAAbS,aAAA,GAAiB;IAAQ;EAE5E;EAEA,IAAIN,qBAAA,EAAuB;IACzBA,qBAAA,CAAsBO,UAAU,GAAG;EACrC;EAEA,IAAIP,qBAAA,oBAAAA,qBAAA,CAAuBQ,kBAAkB,EAAE;IAC7C,MAAMC,GAAA,GAAM,IAAIC,mBAAA,CAAAC,kBAAkB,CAChCjB,kBAAA,CAAmBC,MAAA,EAAQ;MACzB,GAAGC,IAAI;MACP;MACA;MACAE,IAAA,EAAM;IACR;IAEFE,qBAAA,CAAsBY,uBAAuB,GAAGjB,MAAA;IAChDK,qBAAA,CAAsBa,iBAAiB,GAAGJ,GAAA,CAAIK,KAAK;IAEnD,MAAML,GAAA;EACR;EAEA,OAAO;AACT"},"metadata":{},"sourceType":"script","externalDependencies":[]}