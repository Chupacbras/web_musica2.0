{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"stringifyQuery\", {\n  enumerable: true,\n  get: function () {\n    return stringifyQuery;\n  }\n});\nconst _requestmeta = require(\"./request-meta\");\nconst _querystring = require(\"querystring\");\nconst stringifyQuery = (req, query) => {\n  const initialQuery = (0, _requestmeta.getRequestMeta)(req, \"__NEXT_INIT_QUERY\") || {};\n  const initialQueryValues = Object.values(initialQuery);\n  return (0, _querystring.stringify)(query, undefined, undefined, {\n    encodeURIComponent(value) {\n      if (value in initialQuery || initialQueryValues.some(initialQueryVal => {\n        // `value` always refers to a query value, even if it's nested in an array\n        return Array.isArray(initialQueryVal) ? initialQueryVal.includes(value) : initialQueryVal === value;\n      })) {\n        // Encode keys and values from initial query\n        return encodeURIComponent(value);\n      }\n      return value;\n    }\n  });\n};","map":{"version":3,"names":["stringifyQuery","req","query","initialQuery","_requestmeta","getRequestMeta","initialQueryValues","Object","values","_querystring","stringify","undefined","encodeURIComponent","value","some","initialQueryVal","Array","isArray","includes"],"sources":["../../src/server/server-route-utils.ts"],"sourcesContent":[null],"mappings":";;;;;+BASa;;;WAAAA,cAAA;;;6BANkB;6BACU;AAKlC,MAAMA,cAAA,GAAiBA,CAACC,GAAA,EAAsBC,KAAA;EACnD,MAAMC,YAAA,GAAe,IAAAC,YAAA,CAAAC,cAAc,EAACJ,GAAA,EAAK,wBAAwB,CAAC;EAClE,MAAMK,kBAAA,GAAqBC,MAAA,CAAOC,MAAM,CAACL,YAAA;EAEzC,OAAO,IAAAM,YAAA,CAAAC,SAAW,EAACR,KAAA,EAAOS,SAAA,EAAWA,SAAA,EAAW;IAC9CC,mBAAmBC,KAAK;MACtB,IACEA,KAAA,IAASV,YAAA,IACTG,kBAAA,CAAmBQ,IAAI,CAAEC,eAAA;QACvB;QACA,OAAOC,KAAA,CAAMC,OAAO,CAACF,eAAA,IACjBA,eAAA,CAAgBG,QAAQ,CAACL,KAAA,IACzBE,eAAA,KAAoBF,KAAA;MAC1B,IACA;QACA;QACA,OAAOD,kBAAA,CAAmBC,KAAA;MAC5B;MAEA,OAAOA,KAAA;IACT;EACF;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}