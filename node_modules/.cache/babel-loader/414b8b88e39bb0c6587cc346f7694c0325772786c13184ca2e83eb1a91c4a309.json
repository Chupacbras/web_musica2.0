{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  webpackBuildImpl: null,\n  workerMain: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  webpackBuildImpl: function () {\n    return webpackBuildImpl;\n  },\n  workerMain: function () {\n    return workerMain;\n  }\n});\nconst _chalk = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/chalk\"));\nconst _formatwebpackmessages = /*#__PURE__*/_interop_require_default(require(\"../../client/dev/error-overlay/format-webpack-messages\"));\nconst _nonnullable = require(\"../../lib/non-nullable\");\nconst _constants = require(\"../../shared/lib/constants\");\nconst _compiler = require(\"../compiler\");\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../output/log\"));\nconst _webpackconfig = /*#__PURE__*/_interop_require_wildcard(require(\"../webpack-config\"));\nconst _telemetryplugin = require(\"../webpack/plugins/telemetry-plugin\");\nconst _buildcontext = require(\"../build-context\");\nconst _entries = require(\"../entries\");\nconst _config = /*#__PURE__*/_interop_require_default(require(\"../../server/config\"));\nconst _trace = require(\"../../trace\");\nconst _constants1 = require(\"../../lib/constants\");\nconst _nexttraceentrypointsplugin = require(\"../webpack/plugins/next-trace-entrypoints-plugin\");\nconst _pagesmanifestplugin = /*#__PURE__*/_interop_require_wildcard(require(\"../webpack/plugins/pages-manifest-plugin\"));\nconst _debug = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/debug\"));\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nconst debug = (0, _debug.default)(\"next:build:webpack-build\");\nfunction isTelemetryPlugin(plugin) {\n  return plugin instanceof _telemetryplugin.TelemetryPlugin;\n}\nfunction isTraceEntryPointsPlugin(plugin) {\n  return plugin instanceof _nexttraceentrypointsplugin.TraceEntryPointsPlugin;\n}\nasync function webpackBuildImpl(compilerName) {\n  var _clientConfig_plugins, _serverConfig_plugins;\n  let result = {\n    warnings: [],\n    errors: [],\n    stats: []\n  };\n  let webpackBuildStart;\n  const nextBuildSpan = _buildcontext.NextBuildContext.nextBuildSpan;\n  const dir = _buildcontext.NextBuildContext.dir;\n  const config = _buildcontext.NextBuildContext.config;\n  const runWebpackSpan = nextBuildSpan.traceChild(\"run-webpack-compiler\");\n  const entrypoints = await nextBuildSpan.traceChild(\"create-entrypoints\").traceAsyncFn(() => (0, _entries.createEntrypoints)({\n    buildId: _buildcontext.NextBuildContext.buildId,\n    config: config,\n    envFiles: _buildcontext.NextBuildContext.loadedEnvFiles,\n    isDev: false,\n    rootDir: dir,\n    pageExtensions: config.pageExtensions,\n    pagesDir: _buildcontext.NextBuildContext.pagesDir,\n    appDir: _buildcontext.NextBuildContext.appDir,\n    pages: _buildcontext.NextBuildContext.mappedPages,\n    appPaths: _buildcontext.NextBuildContext.mappedAppPages,\n    previewMode: _buildcontext.NextBuildContext.previewProps,\n    rootPaths: _buildcontext.NextBuildContext.mappedRootPaths,\n    hasInstrumentationHook: _buildcontext.NextBuildContext.hasInstrumentationHook\n  }));\n  const commonWebpackOptions = {\n    isServer: false,\n    buildId: _buildcontext.NextBuildContext.buildId,\n    config: config,\n    appDir: _buildcontext.NextBuildContext.appDir,\n    pagesDir: _buildcontext.NextBuildContext.pagesDir,\n    rewrites: _buildcontext.NextBuildContext.rewrites,\n    originalRewrites: _buildcontext.NextBuildContext.originalRewrites,\n    originalRedirects: _buildcontext.NextBuildContext.originalRedirects,\n    reactProductionProfiling: _buildcontext.NextBuildContext.reactProductionProfiling,\n    noMangling: _buildcontext.NextBuildContext.noMangling,\n    clientRouterFilters: _buildcontext.NextBuildContext.clientRouterFilters,\n    previewModeId: _buildcontext.NextBuildContext.previewModeId,\n    allowedRevalidateHeaderKeys: _buildcontext.NextBuildContext.allowedRevalidateHeaderKeys,\n    fetchCacheKeyPrefix: _buildcontext.NextBuildContext.fetchCacheKeyPrefix\n  };\n  const configs = await runWebpackSpan.traceChild(\"generate-webpack-config\").traceAsyncFn(async () => {\n    const info = await (0, _webpackconfig.loadProjectInfo)({\n      dir,\n      config: commonWebpackOptions.config,\n      dev: false\n    });\n    return Promise.all([(0, _webpackconfig.default)(dir, {\n      ...commonWebpackOptions,\n      middlewareMatchers: entrypoints.middlewareMatchers,\n      runWebpackSpan,\n      compilerType: _constants.COMPILER_NAMES.client,\n      entrypoints: entrypoints.client,\n      ...info\n    }), (0, _webpackconfig.default)(dir, {\n      ...commonWebpackOptions,\n      runWebpackSpan,\n      middlewareMatchers: entrypoints.middlewareMatchers,\n      compilerType: _constants.COMPILER_NAMES.server,\n      entrypoints: entrypoints.server,\n      ...info\n    }), (0, _webpackconfig.default)(dir, {\n      ...commonWebpackOptions,\n      runWebpackSpan,\n      middlewareMatchers: entrypoints.middlewareMatchers,\n      compilerType: _constants.COMPILER_NAMES.edgeServer,\n      entrypoints: entrypoints.edgeServer,\n      ...info\n    })]);\n  });\n  const clientConfig = configs[0];\n  const serverConfig = configs[1];\n  const edgeConfig = configs[2];\n  if (clientConfig.optimization && (clientConfig.optimization.minimize !== true || clientConfig.optimization.minimizer && clientConfig.optimization.minimizer.length === 0)) {\n    _log.warn(`Production code optimization has been disabled in your project. Read more: https://nextjs.org/docs/messages/minification-disabled`);\n  }\n  webpackBuildStart = process.hrtime();\n  debug(`starting compiler`, compilerName);\n  // We run client and server compilation separately to optimize for memory usage\n  await runWebpackSpan.traceAsyncFn(async () => {\n    // Run the server compilers first and then the client\n    // compiler to track the boundary of server/client components.\n    let clientResult = null;\n    // During the server compilations, entries of client components will be\n    // injected to this set and then will be consumed by the client compiler.\n    let serverResult = null;\n    let edgeServerResult = null;\n    let inputFileSystem;\n    if (!compilerName || compilerName === \"server\") {\n      [serverResult, inputFileSystem] = await (0, _compiler.runCompiler)(serverConfig, {\n        runWebpackSpan,\n        inputFileSystem\n      });\n      debug(\"server result\", serverResult);\n    }\n    if (!compilerName || compilerName === \"edge-server\") {\n      [edgeServerResult, inputFileSystem] = edgeConfig ? await (0, _compiler.runCompiler)(edgeConfig, {\n        runWebpackSpan,\n        inputFileSystem\n      }) : [null];\n      debug(\"edge server result\", edgeServerResult);\n    }\n    // Only continue if there were no errors\n    if (!(serverResult == null ? void 0 : serverResult.errors.length) && !(edgeServerResult == null ? void 0 : edgeServerResult.errors.length)) {\n      const pluginState = (0, _buildcontext.getPluginState)();\n      for (const key in pluginState.injectedClientEntries) {\n        const value = pluginState.injectedClientEntries[key];\n        const clientEntry = clientConfig.entry;\n        if (key === _constants.APP_CLIENT_INTERNALS) {\n          clientEntry[_constants.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP] = {\n            import: [\n            // TODO-APP: cast clientEntry[CLIENT_STATIC_FILES_RUNTIME_MAIN_APP] to type EntryDescription once it's available from webpack\n            // @ts-expect-error clientEntry['main-app'] is type EntryDescription { import: ... }\n            ...clientEntry[_constants.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP].import, value],\n            layer: _constants1.WEBPACK_LAYERS.appPagesBrowser\n          };\n        } else {\n          clientEntry[key] = {\n            dependOn: [_constants.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP],\n            import: value,\n            layer: _constants1.WEBPACK_LAYERS.appPagesBrowser\n          };\n        }\n      }\n      if (!compilerName || compilerName === \"client\") {\n        [clientResult, inputFileSystem] = await (0, _compiler.runCompiler)(clientConfig, {\n          runWebpackSpan,\n          inputFileSystem\n        });\n        debug(\"client result\", clientResult);\n      }\n    }\n    inputFileSystem.purge();\n    result = {\n      warnings: [].concat(clientResult == null ? void 0 : clientResult.warnings, serverResult == null ? void 0 : serverResult.warnings, edgeServerResult == null ? void 0 : edgeServerResult.warnings).filter(_nonnullable.nonNullable),\n      errors: [].concat(clientResult == null ? void 0 : clientResult.errors, serverResult == null ? void 0 : serverResult.errors, edgeServerResult == null ? void 0 : edgeServerResult.errors).filter(_nonnullable.nonNullable),\n      stats: [clientResult == null ? void 0 : clientResult.stats, serverResult == null ? void 0 : serverResult.stats, edgeServerResult == null ? void 0 : edgeServerResult.stats]\n    };\n  });\n  result = nextBuildSpan.traceChild(\"format-webpack-messages\").traceFn(() => (0, _formatwebpackmessages.default)(result, true));\n  _buildcontext.NextBuildContext.telemetryPlugin = (_clientConfig_plugins = clientConfig.plugins) == null ? void 0 : _clientConfig_plugins.find(isTelemetryPlugin);\n  const traceEntryPointsPlugin = (_serverConfig_plugins = serverConfig.plugins) == null ? void 0 : _serverConfig_plugins.find(isTraceEntryPointsPlugin);\n  const webpackBuildEnd = process.hrtime(webpackBuildStart);\n  if (result.errors.length > 0) {\n    // Only keep the first few errors. Others are often indicative\n    // of the same problem, but confuse the reader with noise.\n    if (result.errors.length > 5) {\n      result.errors.length = 5;\n    }\n    let error = result.errors.filter(Boolean).join(\"\\n\\n\");\n    console.error(_chalk.default.red(\"Failed to compile.\\n\"));\n    if (error.indexOf(\"private-next-pages\") > -1 && error.indexOf(\"does not contain a default export\") > -1) {\n      const page_name_regex = /'private-next-pages\\/(?<page_name>[^']*)'/;\n      const parsed = page_name_regex.exec(error);\n      const page_name = parsed && parsed.groups && parsed.groups.page_name;\n      throw new Error(`webpack build failed: found page without a React Component as default export in pages/${page_name}\\n\\nSee https://nextjs.org/docs/messages/page-without-valid-component for more info.`);\n    }\n    console.error(error);\n    console.error();\n    if (error.indexOf(\"private-next-pages\") > -1 || error.indexOf(\"__next_polyfill__\") > -1) {\n      const err = new Error(\"webpack config.resolve.alias was incorrectly overridden. https://nextjs.org/docs/messages/invalid-resolve-alias\");\n      err.code = \"INVALID_RESOLVE_ALIAS\";\n      throw err;\n    }\n    const err = new Error(\"Build failed because of webpack errors\");\n    err.code = \"WEBPACK_ERRORS\";\n    throw err;\n  } else {\n    if (result.warnings.length > 0) {\n      _log.warn(\"Compiled with warnings\\n\");\n      console.warn(result.warnings.filter(Boolean).join(\"\\n\\n\"));\n      console.warn();\n    } else if (!compilerName) {\n      var _NextBuildContext_buildSpinner;\n      (_NextBuildContext_buildSpinner = _buildcontext.NextBuildContext.buildSpinner) == null ? void 0 : _NextBuildContext_buildSpinner.stopAndPersist();\n      _log.event(\"Compiled successfully\");\n    }\n    return {\n      duration: webpackBuildEnd[0],\n      turbotraceContext: traceEntryPointsPlugin == null ? void 0 : traceEntryPointsPlugin.turbotraceContext,\n      pluginState: (0, _buildcontext.getPluginState)(),\n      serializedPagesManifestEntries: {\n        edgeServerPages: _pagesmanifestplugin.edgeServerPages,\n        edgeServerAppPaths: _pagesmanifestplugin.edgeServerAppPaths,\n        nodeServerPages: _pagesmanifestplugin.nodeServerPages,\n        nodeServerAppPaths: _pagesmanifestplugin.nodeServerAppPaths\n      }\n    };\n  }\n}\nasync function workerMain(workerData) {\n  // setup new build context from the serialized data passed from the parent\n  Object.assign(_buildcontext.NextBuildContext, workerData.buildContext);\n  // Resume plugin state\n  (0, _buildcontext.resumePluginState)(_buildcontext.NextBuildContext.pluginState);\n  // restore module scope maps for flight plugins\n  const {\n    serializedPagesManifestEntries\n  } = _buildcontext.NextBuildContext;\n  for (const key of Object.keys(serializedPagesManifestEntries || {})) {\n    Object.assign(_pagesmanifestplugin[key], serializedPagesManifestEntries == null ? void 0 : serializedPagesManifestEntries[key]);\n  }\n  /// load the config because it's not serializable\n  _buildcontext.NextBuildContext.config = await (0, _config.default)(_constants.PHASE_PRODUCTION_BUILD, _buildcontext.NextBuildContext.dir);\n  _buildcontext.NextBuildContext.nextBuildSpan = (0, _trace.trace)(\"next-build\");\n  const result = await webpackBuildImpl(workerData.compilerName);\n  const {\n    entriesTrace\n  } = result.turbotraceContext ?? {};\n  if (entriesTrace) {\n    const {\n      entryNameMap,\n      depModArray\n    } = entriesTrace;\n    if (depModArray) {\n      result.turbotraceContext.entriesTrace.depModArray = depModArray;\n    }\n    if (entryNameMap) {\n      const entryEntries = Array.from((entryNameMap == null ? void 0 : entryNameMap.entries()) ?? []);\n      // @ts-expect-error\n      result.turbotraceContext.entriesTrace.entryNameMap = entryEntries;\n    }\n  }\n  return result;\n}","map":{"version":3,"names":["webpackBuildImpl","workerMain","debug","_debug","default","isTelemetryPlugin","plugin","_telemetryplugin","TelemetryPlugin","isTraceEntryPointsPlugin","_nexttraceentrypointsplugin","TraceEntryPointsPlugin","compilerName","_clientConfig_plugins","_serverConfig_plugins","result","warnings","errors","stats","webpackBuildStart","nextBuildSpan","_buildcontext","NextBuildContext","dir","config","runWebpackSpan","traceChild","entrypoints","traceAsyncFn","_entries","createEntrypoints","buildId","envFiles","loadedEnvFiles","isDev","rootDir","pageExtensions","pagesDir","appDir","pages","mappedPages","appPaths","mappedAppPages","previewMode","previewProps","rootPaths","mappedRootPaths","hasInstrumentationHook","commonWebpackOptions","isServer","rewrites","originalRewrites","originalRedirects","reactProductionProfiling","noMangling","clientRouterFilters","previewModeId","allowedRevalidateHeaderKeys","fetchCacheKeyPrefix","configs","info","_webpackconfig","loadProjectInfo","dev","Promise","all","middlewareMatchers","compilerType","_constants","COMPILER_NAMES","client","server","edgeServer","clientConfig","serverConfig","edgeConfig","optimization","minimize","minimizer","length","_log","warn","process","hrtime","clientResult","serverResult","edgeServerResult","inputFileSystem","_compiler","runCompiler","pluginState","getPluginState","key","injectedClientEntries","value","clientEntry","entry","APP_CLIENT_INTERNALS","CLIENT_STATIC_FILES_RUNTIME_MAIN_APP","import","layer","_constants1","WEBPACK_LAYERS","appPagesBrowser","dependOn","purge","concat","filter","_nonnullable","nonNullable","traceFn","_formatwebpackmessages","telemetryPlugin","plugins","find","traceEntryPointsPlugin","webpackBuildEnd","error","Boolean","join","console","_chalk","red","indexOf","page_name_regex","parsed","exec","page_name","groups","Error","err","code","_NextBuildContext_buildSpinner","buildSpinner","stopAndPersist","event","duration","turbotraceContext","serializedPagesManifestEntries","edgeServerPages","_pagesmanifestplugin","edgeServerAppPaths","nodeServerPages","nodeServerAppPaths","workerData","Object","assign","buildContext","resumePluginState","keys","_config","PHASE_PRODUCTION_BUILD","_trace","trace","entriesTrace","entryNameMap","depModArray","entryEntries","Array","from","entries"],"sources":["../../../src/build/webpack-build/impl.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}