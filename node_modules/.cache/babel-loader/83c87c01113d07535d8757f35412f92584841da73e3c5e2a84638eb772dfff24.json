{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  traverseModules: null,\n  forEachEntryModule: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  traverseModules: function () {\n    return traverseModules;\n  },\n  forEachEntryModule: function () {\n    return forEachEntryModule;\n  }\n});\nconst _isapprouteroute = require(\"../../lib/is-app-route-route\");\nfunction traverseModules(compilation, callback, filterChunkGroup) {\n  compilation.chunkGroups.forEach(chunkGroup => {\n    if (filterChunkGroup && !filterChunkGroup(chunkGroup)) {\n      return;\n    }\n    chunkGroup.chunks.forEach(chunk => {\n      const chunkModules = compilation.chunkGraph.getChunkModulesIterable(chunk);\n      for (const mod of chunkModules) {\n        const modId = compilation.chunkGraph.getModuleId(mod);\n        callback(mod, chunk, chunkGroup, modId);\n        const anyModule = mod;\n        if (anyModule.modules) {\n          for (const subMod of anyModule.modules) callback(subMod, chunk, chunkGroup, modId);\n        }\n      }\n    });\n  });\n}\nfunction forEachEntryModule(compilation, callback) {\n  for (const [name, entry] of compilation.entries.entries()) {\n    var _entry_dependencies;\n    // Skip for entries under pages/\n    if (name.startsWith(\"pages/\") ||\n    // Skip for route.js entries\n    name.startsWith(\"app/\") && (0, _isapprouteroute.isAppRouteRoute)(name)) {\n      continue;\n    }\n    // Check if the page entry is a server component or not.\n    const entryDependency = (_entry_dependencies = entry.dependencies) == null ? void 0 : _entry_dependencies[0];\n    // Ensure only next-app-loader entries are handled.\n    if (!entryDependency || !entryDependency.request) continue;\n    const request = entryDependency.request;\n    if (!request.startsWith(\"next-edge-ssr-loader?\") && !request.startsWith(\"next-app-loader?\")) continue;\n    let entryModule = compilation.moduleGraph.getResolvedModule(entryDependency);\n    if (request.startsWith(\"next-edge-ssr-loader?\")) {\n      entryModule.dependencies.forEach(dependency => {\n        const modRequest = dependency.request;\n        if (modRequest == null ? void 0 : modRequest.includes(\"next-app-loader\")) {\n          entryModule = compilation.moduleGraph.getResolvedModule(dependency);\n        }\n      });\n    }\n    callback({\n      name,\n      entryModule\n    });\n  }\n}","map":{"version":3,"names":["traverseModules","forEachEntryModule","compilation","callback","filterChunkGroup","chunkGroups","forEach","chunkGroup","chunks","chunk","chunkModules","chunkGraph","getChunkModulesIterable","mod","modId","getModuleId","anyModule","modules","subMod","name","entry","entries","_entry_dependencies","startsWith","_isapprouteroute","isAppRouteRoute","entryDependency","dependencies","request","entryModule","moduleGraph","getResolvedModule","dependency","modRequest","includes"],"sources":["../../../src/build/webpack/utils.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;EAGgBA,eAAe,WAAAA,CAAA;WAAfA,eAAA;;EAiCAC,kBAAkB,WAAAA,CAAA;WAAlBA,kBAAA;;;iCAnCgB;AAEzB,SAASD,gBACdE,WAAgC,EAChCC,QAKQ,EACRC,gBAA8D;EAE9DF,WAAA,CAAYG,WAAW,CAACC,OAAO,CAAEC,UAAA;IAC/B,IAAIH,gBAAA,IAAoB,CAACA,gBAAA,CAAiBG,UAAA,GAAa;MACrD;IACF;IACAA,UAAA,CAAWC,MAAM,CAACF,OAAO,CAAEG,KAAA;MACzB,MAAMC,YAAA,GAAeR,WAAA,CAAYS,UAAU,CAACC,uBAAuB,CACjEH,KAAA;MAGF,KAAK,MAAMI,GAAA,IAAOH,YAAA,EAAc;QAC9B,MAAMI,KAAA,GAAQZ,WAAA,CAAYS,UAAU,CAACI,WAAW,CAACF,GAAA;QACjDV,QAAA,CAASU,GAAA,EAAKJ,KAAA,EAAOF,UAAA,EAAYO,KAAA;QACjC,MAAME,SAAA,GAAYH,GAAA;QAClB,IAAIG,SAAA,CAAUC,OAAO,EAAE;UACrB,KAAK,MAAMC,MAAA,IAAUF,SAAA,CAAUC,OAAO,EACpCd,QAAA,CAASe,MAAA,EAAQT,KAAA,EAAOF,UAAA,EAAYO,KAAA;QACxC;MACF;IACF;EACF;AACF;AAGO,SAASb,mBACdC,WAAgB,EAChBC,QAA6E;EAE7E,KAAK,MAAM,CAACgB,IAAA,EAAMC,KAAA,CAAM,IAAIlB,WAAA,CAAYmB,OAAO,CAACA,OAAO,IAAI;QAYvDC,mBAAA;IAXF;IACA,IACEH,IAAA,CAAKI,UAAU,CAAC;IAChB;IACCJ,IAAA,CAAKI,UAAU,CAAC,WAAW,IAAAC,gBAAA,CAAAC,eAAe,EAACN,IAAA,GAC5C;MACA;IACF;IAEA;IACA,MAAMO,eAAA,IACJJ,mBAAA,GAAAF,KAAA,CAAMO,YAAY,qBAAlBL,mBAAoB,CAAC,EAAE;IACzB;IACA,IAAI,CAACI,eAAA,IAAmB,CAACA,eAAA,CAAgBE,OAAO,EAAE;IAElD,MAAMA,OAAA,GAAUF,eAAA,CAAgBE,OAAO;IAEvC,IACE,CAACA,OAAA,CAAQL,UAAU,CAAC,4BACpB,CAACK,OAAA,CAAQL,UAAU,CAAC,qBAEpB;IAEF,IAAIM,WAAA,GACF3B,WAAA,CAAY4B,WAAW,CAACC,iBAAiB,CAACL,eAAA;IAE5C,IAAIE,OAAA,CAAQL,UAAU,CAAC,0BAA0B;MAC/CM,WAAA,CAAYF,YAAY,CAACrB,OAAO,CAAE0B,UAAA;QAChC,MAAMC,UAAA,GAAiCD,UAAC,CAAmBJ,OAAO;QAClE,IAAIK,UAAA,oBAAAA,UAAA,CAAYC,QAAQ,CAAC,oBAAoB;UAC3CL,WAAA,GAAc3B,WAAA,CAAY4B,WAAW,CAACC,iBAAiB,CAACC,UAAA;QAC1D;MACF;IACF;IAEA7B,QAAA,CAAS;MAAEgB,IAAA;MAAMU;IAAY;EAC/B;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}