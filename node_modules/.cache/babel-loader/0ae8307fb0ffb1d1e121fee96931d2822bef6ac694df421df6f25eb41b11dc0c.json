{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  PagesAPIRouteModule: null,\n  default: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  PagesAPIRouteModule: function () {\n    return PagesAPIRouteModule;\n  },\n  default: function () {\n    return _default;\n  }\n});\nconst _routemodule = require(\"../route-module\");\nconst _node = require(\"../../../api-utils/node\");\nclass PagesAPIRouteModule extends _routemodule.RouteModule {\n  constructor(options) {\n    super(options);\n    if (typeof options.userland.default !== \"function\") {\n      throw new Error(`Page ${options.definition.page} does not export a default function.`);\n    }\n  }\n  /**\n  *\n  * @param req the incoming server request\n  * @param res the outgoing server response\n  * @param context the context for the render\n  */\n  async render(req, res, context) {\n    await (0, _node.apiResolver)(req, res, context.query, this.userland, {\n      ...context.previewProps,\n      revalidate: context.revalidate,\n      trustHostHeader: context.trustHostHeader,\n      allowedRevalidateHeaderKeys: context.allowedRevalidateHeaderKeys,\n      hostname: context.hostname\n    }, context.minimalMode, context.dev, context.page);\n  }\n}\nconst _default = PagesAPIRouteModule;","map":{"version":3,"names":["PagesAPIRouteModule","default","_default","_routemodule","RouteModule","constructor","options","userland","Error","definition","page","render","req","res","context","_node","apiResolver","query","previewProps","revalidate","trustHostHeader","allowedRevalidateHeaderKeys","hostname","minimalMode","dev"],"sources":["../../../../../src/server/future/route-modules/pages-api/module.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;EAkGaA,mBAAmB,WAAAA,CAAA;WAAnBA,mBAAA;;EA4CbC,OAAkC,WAAAA,CAAA;WAAlCC,QAAA;;;6BArIO;sBACqB;AAwFrB,MAAMF,mBAAA,SAA4BG,YAAA,CAAAC,WAAW;EAIlDC,YAAYC,OAAmC,EAAE;IAC/C,KAAK,CAACA,OAAA;IAEN,IAAI,OAAOA,OAAA,CAAQC,QAAQ,CAACN,OAAO,KAAK,YAAY;MAClD,MAAM,IAAIO,KAAA,CACP,QAAOF,OAAA,CAAQG,UAAU,CAACC,IAAK,sCAAqC;IAEzE;EACF;EAEA;;;;;;EAMA,MAAaC,OACXC,GAAoB,EACpBC,GAAmB,EACnBC,OAAoC,EACrB;IACf,MAAM,IAAAC,KAAA,CAAAC,WAAW,EACfJ,GAAA,EACAC,GAAA,EACAC,OAAA,CAAQG,KAAK,EACb,IAAI,CAACV,QAAQ,EACb;MACE,GAAGO,OAAA,CAAQI,YAAY;MACvBC,UAAA,EAAYL,OAAA,CAAQK,UAAU;MAC9BC,eAAA,EAAiBN,OAAA,CAAQM,eAAe;MACxCC,2BAAA,EAA6BP,OAAA,CAAQO,2BAA2B;MAChEC,QAAA,EAAUR,OAAA,CAAQQ;IACpB,GACAR,OAAA,CAAQS,WAAW,EACnBT,OAAA,CAAQU,GAAG,EACXV,OAAA,CAAQJ,IAAI;EAEhB;AACF;MAEAR,QAAA,GAAeF,mBAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}