{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function () {\n    return DevServer;\n  }\n});\nconst _jestworker = require(\"next/dist/compiled/jest-worker\");\nconst _path = require(\"path\");\nconst _output = require(\"../../build/output\");\nconst _constants = require(\"../../lib/constants\");\nconst _fileexists = require(\"../../lib/file-exists\");\nconst _findpagesdir = require(\"../../lib/find-pages-dir\");\nconst _constants1 = require(\"../../shared/lib/constants\");\nconst _nextserver = /*#__PURE__*/_interop_require_wildcard(require(\"../next-server\"));\nconst _normalizepagepath = require(\"../../shared/lib/page-path/normalize-page-path\");\nconst _pathhasprefix = require(\"../../shared/lib/router/utils/path-has-prefix\");\nconst _removepathprefix = require(\"../../shared/lib/router/utils/remove-path-prefix\");\nconst _storage = require(\"../../telemetry/storage\");\nconst _trace = require(\"../../trace\");\nconst _findpagefile = require(\"../lib/find-page-file\");\nconst _utils = require(\"../lib/utils\");\nconst _coalescedfunction = require(\"../../lib/coalesced-function\");\nconst _loaddefaulterrorcomponents = require(\"../load-default-error-components\");\nconst _utils1 = require(\"../../shared/lib/utils\");\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../../build/output/log\"));\nconst _iserror = /*#__PURE__*/_interop_require_wildcard(require(\"../../lib/is-error\"));\nconst _utils2 = require(\"../../build/utils\");\nconst _formatservererror = require(\"../../lib/format-server-error\");\nconst _devroutematchermanager = require(\"../future/route-matcher-managers/dev-route-matcher-manager\");\nconst _devpagesroutematcherprovider = require(\"../future/route-matcher-providers/dev/dev-pages-route-matcher-provider\");\nconst _devpagesapiroutematcherprovider = require(\"../future/route-matcher-providers/dev/dev-pages-api-route-matcher-provider\");\nconst _devapppageroutematcherprovider = require(\"../future/route-matcher-providers/dev/dev-app-page-route-matcher-provider\");\nconst _devapprouteroutematcherprovider = require(\"../future/route-matcher-providers/dev/dev-app-route-route-matcher-provider\");\nconst _nodemanifestloader = require(\"../future/route-matcher-providers/helpers/manifest-loaders/node-manifest-loader\");\nconst _batchedfilereader = require(\"../future/route-matcher-providers/dev/helpers/file-reader/batched-file-reader\");\nconst _defaultfilereader = require(\"../future/route-matcher-providers/dev/helpers/file-reader/default-file-reader\");\nconst _buildcontext = require(\"../../build/build-context\");\nconst _lrucache = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/lru-cache\"));\nconst _middlewareroutematcher = require(\"../../shared/lib/router/utils/middleware-route-matcher\");\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\n// Load ReactDevOverlay only when needed\nlet ReactDevOverlayImpl;\nconst ReactDevOverlay = props => {\n  if (ReactDevOverlayImpl === undefined) {\n    ReactDevOverlayImpl = require(\"next/dist/compiled/@next/react-dev-overlay/dist/client\").ReactDevOverlay;\n  }\n  return ReactDevOverlayImpl(props);\n};\nclass DevServer extends _nextserver.default {\n  invokeDevMethod({\n    method,\n    args\n  }) {\n    return global._nextDevHandlers[method](this.dir, ...args);\n  }\n  getStaticPathsWorker() {\n    const worker = new _jestworker.Worker(require.resolve(\"./static-paths-worker\"), {\n      maxRetries: 1,\n      // For dev server, it's not necessary to spin up too many workers as long as you are not doing a load test.\n      // This helps reusing the memory a lot.\n      numWorkers: 1,\n      enableWorkerThreads: this.nextConfig.experimental.workerThreads,\n      forkOptions: {\n        env: {\n          ...process.env,\n          // discard --inspect/--inspect-brk flags from process.env.NODE_OPTIONS. Otherwise multiple Node.js debuggers\n          // would be started if user launch Next.js in debugging mode. The number of debuggers is linked to\n          // the number of workers Next.js tries to launch. The only worker users are interested in debugging\n          // is the main Next.js one\n          NODE_OPTIONS: (0, _utils.getNodeOptionsWithoutInspect)()\n        }\n      }\n    });\n    worker.getStdout().pipe(process.stdout);\n    worker.getStderr().pipe(process.stderr);\n    return worker;\n  }\n  constructor(options) {\n    var _this_nextConfig_experimental_amp, _this_nextConfig_experimental;\n    try {\n      // Increase the number of stack frames on the server\n      Error.stackTraceLimit = 50;\n    } catch {}\n    super({\n      ...options,\n      dev: true\n    });\n    this.originalFetch = global.fetch;\n    this.renderOpts.dev = true;\n    this.renderOpts.appDirDevErrorLogger = err => this.logErrorWithOriginalStack(err, \"app-dir\");\n    this.renderOpts.ErrorDebug = ReactDevOverlay;\n    this.devReady = new Promise(resolve => {\n      this.setDevReady = resolve;\n    });\n    this.staticPathsCache = new _lrucache.default({\n      // 5MB\n      max: 5 * 1024 * 1024,\n      length(value) {\n        return JSON.stringify(value.staticPaths).length;\n      }\n    });\n    this.renderOpts.ampSkipValidation = ((_this_nextConfig_experimental = this.nextConfig.experimental) == null ? void 0 : (_this_nextConfig_experimental_amp = _this_nextConfig_experimental.amp) == null ? void 0 : _this_nextConfig_experimental_amp.skipValidation) ?? false;\n    this.renderOpts.ampValidator = (html, pathname) => {\n      const validatorPath = this.nextConfig.experimental && this.nextConfig.experimental.amp && this.nextConfig.experimental.amp.validator;\n      const AmpHtmlValidator = require(\"next/dist/compiled/amphtml-validator\");\n      return AmpHtmlValidator.getInstance(validatorPath).then(validator => {\n        const result = validator.validateString(html);\n        (0, _output.ampValidation)(pathname, result.errors.filter(e => e.severity === \"ERROR\").filter(e => this._filterAmpDevelopmentScript(html, e)), result.errors.filter(e => e.severity !== \"ERROR\"));\n      });\n    };\n    const {\n      pagesDir,\n      appDir\n    } = (0, _findpagesdir.findPagesDir)(this.dir);\n    this.pagesDir = pagesDir;\n    this.appDir = appDir;\n  }\n  getRouteMatchers() {\n    const {\n      pagesDir,\n      appDir\n    } = (0, _findpagesdir.findPagesDir)(this.dir);\n    const ensurer = {\n      ensure: async match => {\n        await this.ensurePage({\n          match,\n          page: match.definition.page,\n          clientOnly: false\n        });\n      }\n    };\n    const matchers = new _devroutematchermanager.DevRouteMatcherManager(super.getRouteMatchers(), ensurer, this.dir);\n    const extensions = this.nextConfig.pageExtensions;\n    const extensionsExpression = new RegExp(`\\\\.(?:${extensions.join(\"|\")})$`);\n    // If the pages directory is available, then configure those matchers.\n    if (pagesDir) {\n      const fileReader = new _batchedfilereader.BatchedFileReader(new _defaultfilereader.DefaultFileReader({\n        // Only allow files that have the correct extensions.\n        pathnameFilter: pathname => extensionsExpression.test(pathname)\n      }));\n      matchers.push(new _devpagesroutematcherprovider.DevPagesRouteMatcherProvider(pagesDir, extensions, fileReader, this.localeNormalizer));\n      matchers.push(new _devpagesapiroutematcherprovider.DevPagesAPIRouteMatcherProvider(pagesDir, extensions, fileReader, this.localeNormalizer));\n    }\n    if (appDir) {\n      // We create a new file reader for the app directory because we don't want\n      // to include any folders or files starting with an underscore. This will\n      // prevent the reader from wasting time reading files that we know we\n      // don't care about.\n      const fileReader = new _batchedfilereader.BatchedFileReader(new _defaultfilereader.DefaultFileReader({\n        // Ignore any directory prefixed with an underscore.\n        ignorePartFilter: part => part.startsWith(\"_\")\n      }));\n      matchers.push(new _devapppageroutematcherprovider.DevAppPageRouteMatcherProvider(appDir, extensions, fileReader));\n      matchers.push(new _devapprouteroutematcherprovider.DevAppRouteRouteMatcherProvider(appDir, extensions, fileReader));\n    }\n    return matchers;\n  }\n  getBuildId() {\n    return \"development\";\n  }\n  async prepareImpl() {\n    (0, _trace.setGlobal)(\"distDir\", this.distDir);\n    (0, _trace.setGlobal)(\"phase\", _constants1.PHASE_DEVELOPMENT_SERVER);\n    const telemetry = new _storage.Telemetry({\n      distDir: this.distDir\n    });\n    await super.prepareImpl();\n    await this.runInstrumentationHookIfAvailable();\n    await this.matchers.reload();\n    this.setDevReady();\n    // This is required by the tracing subsystem.\n    (0, _trace.setGlobal)(\"appDir\", this.appDir);\n    (0, _trace.setGlobal)(\"pagesDir\", this.pagesDir);\n    (0, _trace.setGlobal)(\"telemetry\", telemetry);\n    process.on(\"unhandledRejection\", reason => {\n      this.logErrorWithOriginalStack(reason, \"unhandledRejection\").catch(() => {});\n    });\n    process.on(\"uncaughtException\", err => {\n      this.logErrorWithOriginalStack(err, \"uncaughtException\").catch(() => {});\n    });\n  }\n  async close() {}\n  async hasPage(pathname) {\n    let normalizedPath;\n    try {\n      normalizedPath = (0, _normalizepagepath.normalizePagePath)(pathname);\n    } catch (err) {\n      console.error(err);\n      // if normalizing the page fails it means it isn't valid\n      // so it doesn't exist so don't throw and return false\n      // to ensure we return 404 instead of 500\n      return false;\n    }\n    if ((0, _utils2.isMiddlewareFile)(normalizedPath)) {\n      return (0, _findpagefile.findPageFile)(this.dir, normalizedPath, this.nextConfig.pageExtensions, false).then(Boolean);\n    }\n    let appFile = null;\n    let pagesFile = null;\n    if (this.appDir) {\n      appFile = await (0, _findpagefile.findPageFile)(this.appDir, normalizedPath + \"/page\", this.nextConfig.pageExtensions, true);\n    }\n    if (this.pagesDir) {\n      pagesFile = await (0, _findpagefile.findPageFile)(this.pagesDir, normalizedPath, this.nextConfig.pageExtensions, false);\n    }\n    if (appFile && pagesFile) {\n      return false;\n    }\n    return Boolean(appFile || pagesFile);\n  }\n  async runMiddleware(params) {\n    try {\n      const result = await super.runMiddleware({\n        ...params,\n        onWarning: warn => {\n          this.logErrorWithOriginalStack(warn, \"warning\");\n        }\n      });\n      if (\"finished\" in result) {\n        return result;\n      }\n      result.waitUntil.catch(error => {\n        this.logErrorWithOriginalStack(error, \"unhandledRejection\");\n      });\n      return result;\n    } catch (error) {\n      if (error instanceof _utils1.DecodeError) {\n        throw error;\n      }\n      /**\n      * We only log the error when it is not a MiddlewareNotFound error as\n      * in that case we should be already displaying a compilation error\n      * which is what makes the module not found.\n      */\n      if (!(error instanceof _utils1.MiddlewareNotFoundError)) {\n        this.logErrorWithOriginalStack(error);\n      }\n      const err = (0, _iserror.getProperError)(error);\n      err.middleware = true;\n      const {\n        request,\n        response,\n        parsedUrl\n      } = params;\n      /**\n      * When there is a failure for an internal Next.js request from\n      * middleware we bypass the error without finishing the request\n      * so we can serve the required chunks to render the error.\n      */\n      if (request.url.includes(\"/_next/static\") || request.url.includes(\"/__nextjs_original-stack-frame\")) {\n        return {\n          finished: false\n        };\n      }\n      response.statusCode = 500;\n      await this.renderError(err, request, response, parsedUrl.pathname);\n      return {\n        finished: true\n      };\n    }\n  }\n  async runEdgeFunction(params) {\n    try {\n      return super.runEdgeFunction({\n        ...params,\n        onWarning: warn => {\n          this.logErrorWithOriginalStack(warn, \"warning\");\n        }\n      });\n    } catch (error) {\n      if (error instanceof _utils1.DecodeError) {\n        throw error;\n      }\n      this.logErrorWithOriginalStack(error, \"warning\");\n      const err = (0, _iserror.getProperError)(error);\n      const {\n        req,\n        res,\n        page\n      } = params;\n      res.statusCode = 500;\n      await this.renderError(err, req, res, page);\n      return null;\n    }\n  }\n  async handleRequest(req, res, parsedUrl) {\n    await this.devReady;\n    return await super.handleRequest(req, res, parsedUrl);\n  }\n  async run(req, res, parsedUrl) {\n    await this.devReady;\n    const {\n      basePath\n    } = this.nextConfig;\n    let originalPathname = null;\n    // TODO: see if we can remove this in the future\n    if (basePath && (0, _pathhasprefix.pathHasPrefix)(parsedUrl.pathname || \"/\", basePath)) {\n      // strip basePath before handling dev bundles\n      // If replace ends up replacing the full url it'll be `undefined`, meaning we have to default it to `/`\n      originalPathname = parsedUrl.pathname;\n      parsedUrl.pathname = (0, _removepathprefix.removePathPrefix)(parsedUrl.pathname || \"/\", basePath);\n    }\n    const {\n      pathname\n    } = parsedUrl;\n    if (pathname.startsWith(\"/_next\")) {\n      if (await (0, _fileexists.fileExists)((0, _path.join)(this.publicDir, \"_next\"))) {\n        throw new Error(_constants.PUBLIC_DIR_MIDDLEWARE_CONFLICT);\n      }\n    }\n    if (originalPathname) {\n      // restore the path before continuing so that custom-routes can accurately determine\n      // if they should match against the basePath or not\n      parsedUrl.pathname = originalPathname;\n    }\n    try {\n      return await super.run(req, res, parsedUrl);\n    } catch (error) {\n      const err = (0, _iserror.getProperError)(error);\n      (0, _formatservererror.formatServerError)(err);\n      this.logErrorWithOriginalStack(err).catch(() => {});\n      if (!res.sent) {\n        res.statusCode = 500;\n        try {\n          return await this.renderError(err, req, res, pathname, {\n            __NEXT_PAGE: (0, _iserror.default)(err) && err.page || pathname || \"\"\n          });\n        } catch (internalErr) {\n          console.error(internalErr);\n          res.body(\"Internal Server Error\").send();\n        }\n      }\n    }\n  }\n  async logErrorWithOriginalStack(err, type) {\n    if (this.isRenderWorker) {\n      await this.invokeDevMethod({\n        method: \"logErrorWithOriginalStack\",\n        args: [err, type]\n      });\n      return;\n    }\n    throw new Error(\"Invariant logErrorWithOriginalStack called outside render worker\");\n  }\n  getPagesManifest() {\n    return _nodemanifestloader.NodeManifestLoader.require((0, _path.join)(this.serverDistDir, _constants1.PAGES_MANIFEST)) ?? undefined;\n  }\n  getAppPathsManifest() {\n    if (!this.hasAppDir) return undefined;\n    return _nodemanifestloader.NodeManifestLoader.require((0, _path.join)(this.serverDistDir, _constants1.APP_PATHS_MANIFEST)) ?? undefined;\n  }\n  getMiddleware() {\n    var _this_middleware;\n    // We need to populate the match\n    // field as it isn't serializable\n    if (((_this_middleware = this.middleware) == null ? void 0 : _this_middleware.match) === null) {\n      this.middleware.match = (0, _middlewareroutematcher.getMiddlewareRouteMatcher)(this.middleware.matchers || []);\n    }\n    return this.middleware;\n  }\n  getNextFontManifest() {\n    return undefined;\n  }\n  async hasMiddleware() {\n    return this.hasPage(this.actualMiddlewareFile);\n  }\n  async ensureMiddleware() {\n    return this.ensurePage({\n      page: this.actualMiddlewareFile,\n      clientOnly: false\n    });\n  }\n  async runInstrumentationHookIfAvailable() {\n    if (this.actualInstrumentationHookFile && (await this.ensurePage({\n      page: this.actualInstrumentationHookFile,\n      clientOnly: false\n    }).then(() => true).catch(() => false))) {\n      _buildcontext.NextBuildContext.hasInstrumentationHook = true;\n      try {\n        const instrumentationHook = await require((0, _path.join)(this.distDir, \"server\", _constants.INSTRUMENTATION_HOOK_FILENAME));\n        await instrumentationHook.register();\n      } catch (err) {\n        err.message = `An error occurred while loading instrumentation hook: ${err.message}`;\n        throw err;\n      }\n    }\n  }\n  async ensureEdgeFunction({\n    page,\n    appPaths\n  }) {\n    return this.ensurePage({\n      page,\n      appPaths,\n      clientOnly: false\n    });\n  }\n  generateRoutes(_dev) {\n    // In development we expose all compiled files for react-error-overlay's line show feature\n    // We use unshift so that we're sure the routes is defined before Next's default routes\n    // routes.unshift({\n    //   match: getPathMatch('/_next/development/:path*'),\n    //   type: 'route',\n    //   name: '_next/development catchall',\n    //   fn: async (req, res, params) => {\n    //     const p = pathJoin(this.distDir, ...(params.path || []))\n    //     await this.serveStatic(req, res, p)\n    //     return {\n    //       finished: true,\n    //     }\n    //   },\n    // })\n  }\n  _filterAmpDevelopmentScript(html, event) {\n    if (event.code !== \"DISALLOWED_SCRIPT_TAG\") {\n      return true;\n    }\n    const snippetChunks = html.split(\"\\n\");\n    let snippet;\n    if (!(snippet = html.split(\"\\n\")[event.line - 1]) || !(snippet = snippet.substring(event.col))) {\n      return true;\n    }\n    snippet = snippet + snippetChunks.slice(event.line).join(\"\\n\");\n    snippet = snippet.substring(0, snippet.indexOf(\"</script>\"));\n    return !snippet.includes(\"data-amp-development-mode-only\");\n  }\n  async getStaticPaths({\n    pathname,\n    requestHeaders,\n    page,\n    isAppPath\n  }) {\n    // we lazy load the staticPaths to prevent the user\n    // from waiting on them for the page to load in dev mode\n    const __getStaticPaths = async () => {\n      const {\n        configFileName,\n        publicRuntimeConfig,\n        serverRuntimeConfig,\n        httpAgentOptions\n      } = this.nextConfig;\n      const {\n        locales,\n        defaultLocale\n      } = this.nextConfig.i18n || {};\n      const staticPathsWorker = this.getStaticPathsWorker();\n      try {\n        const pathsResult = await staticPathsWorker.loadStaticPaths({\n          distDir: this.distDir,\n          pathname,\n          config: {\n            configFileName,\n            publicRuntimeConfig,\n            serverRuntimeConfig\n          },\n          httpAgentOptions,\n          locales,\n          defaultLocale,\n          page,\n          isAppPath,\n          requestHeaders,\n          incrementalCacheHandlerPath: this.nextConfig.experimental.incrementalCacheHandlerPath,\n          fetchCacheKeyPrefix: this.nextConfig.experimental.fetchCacheKeyPrefix,\n          isrFlushToDisk: this.nextConfig.experimental.isrFlushToDisk,\n          maxMemoryCacheSize: this.nextConfig.experimental.isrMemoryCacheSize\n        });\n        return pathsResult;\n      } finally {\n        // we don't re-use workers so destroy the used one\n        staticPathsWorker.end();\n      }\n    };\n    const result = this.staticPathsCache.get(pathname);\n    const nextInvoke = (0, _coalescedfunction.withCoalescedInvoke)(__getStaticPaths)(`staticPaths-${pathname}`, []).then(res => {\n      const {\n        paths: staticPaths = [],\n        fallback\n      } = res.value;\n      if (!isAppPath && this.nextConfig.output === \"export\") {\n        if (fallback === \"blocking\") {\n          throw new Error('getStaticPaths with \"fallback: blocking\" cannot be used with \"output: export\". See more info here: https://nextjs.org/docs/advanced-features/static-html-export');\n        } else if (fallback === true) {\n          throw new Error('getStaticPaths with \"fallback: true\" cannot be used with \"output: export\". See more info here: https://nextjs.org/docs/advanced-features/static-html-export');\n        }\n      }\n      const value = {\n        staticPaths,\n        fallbackMode: fallback === \"blocking\" ? \"blocking\" : fallback === true ? \"static\" : fallback\n      };\n      this.staticPathsCache.set(pathname, value);\n      return value;\n    }).catch(err => {\n      this.staticPathsCache.del(pathname);\n      if (!result) throw err;\n      _log.error(`Failed to generate static paths for ${pathname}:`);\n      console.error(err);\n    });\n    if (result) {\n      return result;\n    }\n    return nextInvoke;\n  }\n  restorePatchedGlobals() {\n    global.fetch = this.originalFetch;\n  }\n  async ensurePage(opts) {\n    if (!this.isRenderWorker) {\n      throw new Error(\"Invariant ensurePage called outside render worker\");\n    }\n    await this.invokeDevMethod({\n      method: \"ensurePage\",\n      args: [opts]\n    });\n  }\n  async findPageComponents({\n    page,\n    query,\n    params,\n    isAppPath,\n    appPaths = null,\n    shouldEnsure\n  }) {\n    await this.devReady;\n    const compilationErr = await this.getCompilationError(page);\n    if (compilationErr) {\n      // Wrap build errors so that they don't get logged again\n      throw new _nextserver.WrappedBuildError(compilationErr);\n    }\n    try {\n      if (shouldEnsure || this.renderOpts.customServer) {\n        await this.ensurePage({\n          page,\n          appPaths,\n          clientOnly: false\n        });\n      }\n      this.nextFontManifest = super.getNextFontManifest();\n      // before we re-evaluate a route module, we want to restore globals that might\n      // have been patched previously to their original state so that we don't\n      // patch on top of the previous patch, which would keep the context of the previous\n      // patched global in memory, creating a memory leak.\n      this.restorePatchedGlobals();\n      return await super.findPageComponents({\n        page,\n        query,\n        params,\n        isAppPath,\n        shouldEnsure\n      });\n    } catch (err) {\n      if (err.code !== \"ENOENT\") {\n        throw err;\n      }\n      return null;\n    }\n  }\n  async getFallbackErrorComponents() {\n    if (this.isRenderWorker) {\n      await this.invokeDevMethod({\n        method: \"getFallbackErrorComponents\",\n        args: []\n      });\n      return await (0, _loaddefaulterrorcomponents.loadDefaultErrorComponents)(this.distDir);\n    }\n    throw new Error(`Invariant getFallbackErrorComponents called outside render worker`);\n  }\n  async getCompilationError(page) {\n    if (this.isRenderWorker) {\n      return await this.invokeDevMethod({\n        method: \"getCompilationError\",\n        args: [page]\n      });\n    }\n    throw new Error(\"Invariant getCompilationError called outside render worker\");\n  }\n}","map":{"version":3,"names":["DevServer","ReactDevOverlayImpl","ReactDevOverlay","props","undefined","require","_nextserver","default","invokeDevMethod","method","args","global","_nextDevHandlers","dir","getStaticPathsWorker","worker","_jestworker","Worker","resolve","maxRetries","numWorkers","enableWorkerThreads","nextConfig","experimental","workerThreads","forkOptions","env","process","NODE_OPTIONS","_utils","getNodeOptionsWithoutInspect","getStdout","pipe","stdout","getStderr","stderr","constructor","options","_this_nextConfig_experimental_amp","_this_nextConfig_experimental","Error","stackTraceLimit","dev","originalFetch","fetch","renderOpts","appDirDevErrorLogger","err","logErrorWithOriginalStack","ErrorDebug","devReady","Promise","setDevReady","staticPathsCache","_lrucache","max","length","value","JSON","stringify","staticPaths","ampSkipValidation","amp","skipValidation","ampValidator","html","pathname","validatorPath","validator","AmpHtmlValidator","getInstance","then","result","validateString","_output","ampValidation","errors","filter","e","severity","_filterAmpDevelopmentScript","pagesDir","appDir","_findpagesdir","findPagesDir","getRouteMatchers","ensurer","ensure","match","ensurePage","page","definition","clientOnly","matchers","_devroutematchermanager","DevRouteMatcherManager","extensions","pageExtensions","extensionsExpression","RegExp","join","fileReader","_batchedfilereader","BatchedFileReader","_defaultfilereader","DefaultFileReader","pathnameFilter","test","push","_devpagesroutematcherprovider","DevPagesRouteMatcherProvider","localeNormalizer","_devpagesapiroutematcherprovider","DevPagesAPIRouteMatcherProvider","ignorePartFilter","part","startsWith","_devapppageroutematcherprovider","DevAppPageRouteMatcherProvider","_devapprouteroutematcherprovider","DevAppRouteRouteMatcherProvider","getBuildId","prepareImpl","_trace","setGlobal","distDir","_constants1","PHASE_DEVELOPMENT_SERVER","telemetry","_storage","Telemetry","runInstrumentationHookIfAvailable","reload","on","reason","catch","close","hasPage","normalizedPath","_normalizepagepath","normalizePagePath","console","error","_utils2","isMiddlewareFile","_findpagefile","findPageFile","Boolean","appFile","pagesFile","runMiddleware","params","onWarning","warn","waitUntil","_utils1","DecodeError","MiddlewareNotFoundError","_iserror","getProperError","middleware","request","response","parsedUrl","url","includes","finished","statusCode","renderError","runEdgeFunction","req","res","handleRequest","run","basePath","originalPathname","_pathhasprefix","pathHasPrefix","_removepathprefix","removePathPrefix","_fileexists","fileExists","_path","publicDir","_constants","PUBLIC_DIR_MIDDLEWARE_CONFLICT","_formatservererror","formatServerError","sent","__NEXT_PAGE","internalErr","body","send","type","isRenderWorker","getPagesManifest","_nodemanifestloader","NodeManifestLoader","serverDistDir","PAGES_MANIFEST","getAppPathsManifest","hasAppDir","APP_PATHS_MANIFEST","getMiddleware","_this_middleware","_middlewareroutematcher","getMiddlewareRouteMatcher","getNextFontManifest","hasMiddleware","actualMiddlewareFile","ensureMiddleware","actualInstrumentationHookFile","_buildcontext","NextBuildContext","hasInstrumentationHook","instrumentationHook","INSTRUMENTATION_HOOK_FILENAME","register","message","ensureEdgeFunction","appPaths","generateRoutes","_dev","event","code","snippetChunks","split","snippet","line","substring","col","slice","indexOf","getStaticPaths","requestHeaders","isAppPath","__getStaticPaths","configFileName","publicRuntimeConfig","serverRuntimeConfig","httpAgentOptions","locales","defaultLocale","i18n","staticPathsWorker","pathsResult","loadStaticPaths","config","incrementalCacheHandlerPath","fetchCacheKeyPrefix","isrFlushToDisk","maxMemoryCacheSize","isrMemoryCacheSize","end","get","nextInvoke","_coalescedfunction","withCoalescedInvoke","paths","fallback","output","fallbackMode","set","del","_log","restorePatchedGlobals","opts","findPageComponents","query","shouldEnsure","compilationErr","getCompilationError","WrappedBuildError","customServer","nextFontManifest","getFallbackErrorComponents","_loaddefaulterrorcomponents","loadDefaultErrorComponents"],"sources":["../../../src/server/dev/next-dev-server.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}