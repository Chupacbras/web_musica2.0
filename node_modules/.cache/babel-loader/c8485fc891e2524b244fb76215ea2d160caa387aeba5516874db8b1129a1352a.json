{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  renderScriptError: null,\n  matchNextPageBundleRequest: null,\n  default: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  renderScriptError: function () {\n    return renderScriptError;\n  },\n  matchNextPageBundleRequest: function () {\n    return matchNextPageBundleRequest;\n  },\n  default: function () {\n    return HotReloader;\n  }\n});\nconst _webpack = require(\"next/dist/compiled/webpack/webpack\");\nconst _middleware = require(\"next/dist/compiled/@next/react-dev-overlay/dist/middleware\");\nconst _hotmiddleware = require(\"./hot-middleware\");\nconst _path = require(\"path\");\nconst _entries = require(\"../../build/entries\");\nconst _output = require(\"../../build/output\");\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../../build/output/log\"));\nconst _webpackconfig = /*#__PURE__*/_interop_require_wildcard(require(\"../../build/webpack-config\"));\nconst _constants = require(\"../../lib/constants\");\nconst _recursivedelete = require(\"../../lib/recursive-delete\");\nconst _constants1 = require(\"../../shared/lib/constants\");\nconst _pathmatch = require(\"../../shared/lib/router/utils/path-match\");\nconst _findpagefile = require(\"../lib/find-page-file\");\nconst _ondemandentryhandler = require(\"./on-demand-entry-handler\");\nconst _denormalizepagepath = require(\"../../shared/lib/page-path/denormalize-page-path\");\nconst _normalizepathsep = require(\"../../shared/lib/page-path/normalize-path-sep\");\nconst _getroutefromentrypoint = /*#__PURE__*/_interop_require_default(require(\"../get-route-from-entrypoint\"));\nconst _fileexists = require(\"../../lib/file-exists\");\nconst _utils = require(\"../../build/utils\");\nconst _utils1 = require(\"../../shared/lib/utils\");\nconst _trace = require(\"../../trace\");\nconst _iserror = require(\"../../lib/is-error\");\nconst _ws = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/ws\"));\nconst _fs = require(\"fs\");\nconst _getregistry = require(\"../../lib/helpers/get-registry\");\nconst _parseversioninfo = require(\"./parse-version-info\");\nconst _isapiroute = require(\"../../lib/is-api-route\");\nconst _nextrouteloader = require(\"../../build/webpack/loaders/next-route-loader\");\nconst _isinternalcomponent = require(\"../../lib/is-internal-component\");\nconst _routekind = require(\"../future/route-kind\");\nconst _hotreloadertypes = require(\"./hot-reloader-types\");\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nconst MILLISECONDS_IN_NANOSECOND = 1000000;\nfunction diff(a, b) {\n  return new Set([...a].filter(v => !b.has(v)));\n}\nconst wsServer = new _ws.default.Server({\n  noServer: true\n});\nasync function renderScriptError(res, error, {\n  verbose = true\n} = {}) {\n  // Asks CDNs and others to not to cache the errored page\n  res.setHeader(\"Cache-Control\", \"no-cache, no-store, max-age=0, must-revalidate\");\n  if (error.code === \"ENOENT\") {\n    return {\n      finished: undefined\n    };\n  }\n  if (verbose) {\n    console.error(error.stack);\n  }\n  res.statusCode = 500;\n  res.end(\"500 - Internal Error\");\n  return {\n    finished: true\n  };\n}\nfunction addCorsSupport(req, res) {\n  // Only rewrite CORS handling when URL matches a hot-reloader middleware\n  if (!req.url.startsWith(\"/__next\")) {\n    return {\n      preflight: false\n    };\n  }\n  if (!req.headers.origin) {\n    return {\n      preflight: false\n    };\n  }\n  res.setHeader(\"Access-Control-Allow-Origin\", req.headers.origin);\n  res.setHeader(\"Access-Control-Allow-Methods\", \"OPTIONS, GET\");\n  // Based on https://github.com/primus/access-control/blob/4cf1bc0e54b086c91e6aa44fb14966fa5ef7549c/index.js#L158\n  if (req.headers[\"access-control-request-headers\"]) {\n    res.setHeader(\"Access-Control-Allow-Headers\", req.headers[\"access-control-request-headers\"]);\n  }\n  if (req.method === \"OPTIONS\") {\n    res.writeHead(200);\n    res.end();\n    return {\n      preflight: true\n    };\n  }\n  return {\n    preflight: false\n  };\n}\nconst matchNextPageBundleRequest = (0, _pathmatch.getPathMatch)(\"/_next/static/chunks/pages/:path*.js(\\\\.map|)\");\n// Iteratively look up the issuer till it ends up at the root\nfunction findEntryModule(module1, compilation) {\n  for (;;) {\n    const issuer = compilation.moduleGraph.getIssuer(module1);\n    if (!issuer) return module1;\n    module1 = issuer;\n  }\n}\nfunction erroredPages(compilation) {\n  const failedPages = {};\n  for (const error of compilation.errors) {\n    if (!error.module) {\n      continue;\n    }\n    const entryModule = findEntryModule(error.module, compilation);\n    const {\n      name\n    } = entryModule;\n    if (!name) {\n      continue;\n    }\n    // Only pages have to be reloaded\n    const enhancedName = (0, _getroutefromentrypoint.default)(name);\n    if (!enhancedName) {\n      continue;\n    }\n    if (!failedPages[enhancedName]) {\n      failedPages[enhancedName] = [];\n    }\n    failedPages[enhancedName].push(error);\n  }\n  return failedPages;\n}\nclass HotReloader {\n  constructor(dir, {\n    config,\n    pagesDir,\n    distDir,\n    buildId,\n    previewProps,\n    rewrites,\n    appDir,\n    telemetry\n  }) {\n    this.clientError = null;\n    this.serverError = null;\n    this.hmrServerError = null;\n    this.pagesMapping = {};\n    this.versionInfo = {\n      staleness: \"unknown\",\n      installed: \"0.0.0\"\n    };\n    this.reloadAfterInvalidation = false;\n    this.hasAmpEntrypoints = false;\n    this.hasAppRouterEntrypoints = false;\n    this.hasPagesRouterEntrypoints = false;\n    this.buildId = buildId;\n    this.dir = dir;\n    this.interceptors = [];\n    this.pagesDir = pagesDir;\n    this.appDir = appDir;\n    this.distDir = distDir;\n    this.clientStats = null;\n    this.serverStats = null;\n    this.edgeServerStats = null;\n    this.serverPrevDocumentHash = null;\n    this.telemetry = telemetry;\n    this.config = config;\n    this.previewProps = previewProps;\n    this.rewrites = rewrites;\n    this.hotReloaderSpan = (0, _trace.trace)(\"hot-reloader\", undefined, {\n      version: \"13.5.3\"\n    });\n    // Ensure the hotReloaderSpan is flushed immediately as it's the parentSpan for all processing\n    // of the current `next dev` invocation.\n    this.hotReloaderSpan.stop();\n  }\n  async run(req, res, parsedUrl) {\n    // Usually CORS support is not needed for the hot-reloader (this is dev only feature)\n    // With when the app runs for multi-zones support behind a proxy,\n    // the current page is trying to access this URL via assetPrefix.\n    // That's when the CORS support is needed.\n    const {\n      preflight\n    } = addCorsSupport(req, res);\n    if (preflight) {\n      return {};\n    }\n    // When a request comes in that is a page bundle, e.g. /_next/static/<buildid>/pages/index.js\n    // we have to compile the page using on-demand-entries, this middleware will handle doing that\n    // by adding the page to on-demand-entries, waiting till it's done\n    // and then the bundle will be served like usual by the actual route in server/index.js\n    const handlePageBundleRequest = async (pageBundleRes, parsedPageBundleUrl) => {\n      const {\n        pathname\n      } = parsedPageBundleUrl;\n      const params = matchNextPageBundleRequest(pathname);\n      if (!params) {\n        return {};\n      }\n      let decodedPagePath;\n      try {\n        decodedPagePath = `/${params.path.map(param => decodeURIComponent(param)).join(\"/\")}`;\n      } catch (_) {\n        throw new _utils1.DecodeError(\"failed to decode param\");\n      }\n      const page = (0, _denormalizepagepath.denormalizePagePath)(decodedPagePath);\n      if (page === \"/_error\" || _constants1.BLOCKED_PAGES.indexOf(page) === -1) {\n        try {\n          await this.ensurePage({\n            page,\n            clientOnly: true\n          });\n        } catch (error) {\n          return await renderScriptError(pageBundleRes, (0, _iserror.getProperError)(error));\n        }\n        const errors = await this.getCompilationErrors(page);\n        if (errors.length > 0) {\n          return await renderScriptError(pageBundleRes, errors[0], {\n            verbose: false\n          });\n        }\n      }\n      return {};\n    };\n    const {\n      finished\n    } = await handlePageBundleRequest(res, parsedUrl);\n    for (const fn of this.interceptors) {\n      await new Promise((resolve, reject) => {\n        fn(req, res, err => {\n          if (err) return reject(err);\n          resolve();\n        });\n      });\n    }\n    return {\n      finished\n    };\n  }\n  setHmrServerError(error) {\n    this.hmrServerError = error;\n  }\n  clearHmrServerError() {\n    if (this.hmrServerError) {\n      this.setHmrServerError(null);\n      this.send({\n        action: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE\n      });\n    }\n  }\n  async refreshServerComponents() {\n    this.send({\n      action: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.SERVER_COMPONENT_CHANGES\n    });\n  }\n  onHMR(req, _socket, head) {\n    wsServer.handleUpgrade(req, req.socket, head, client => {\n      var _this_webpackHotMiddleware, _this_onDemandEntries;\n      (_this_webpackHotMiddleware = this.webpackHotMiddleware) == null ? void 0 : _this_webpackHotMiddleware.onHMR(client);\n      (_this_onDemandEntries = this.onDemandEntries) == null ? void 0 : _this_onDemandEntries.onHMR(client, () => this.hmrServerError);\n      client.addEventListener(\"message\", ({\n        data\n      }) => {\n        data = typeof data !== \"string\" ? data.toString() : data;\n        try {\n          const payload = JSON.parse(data);\n          let traceChild;\n          switch (payload.event) {\n            case \"span-end\":\n              {\n                new _trace.Span({\n                  name: payload.spanName,\n                  startTime: BigInt(Math.floor(payload.startTime)) * BigInt(MILLISECONDS_IN_NANOSECOND),\n                  attrs: payload.attributes\n                }).stop(BigInt(Math.floor(payload.endTime)) * BigInt(MILLISECONDS_IN_NANOSECOND));\n                break;\n              }\n            case \"client-hmr-latency\":\n              {\n                traceChild = {\n                  name: payload.event,\n                  startTime: BigInt(payload.startTime) * BigInt(MILLISECONDS_IN_NANOSECOND),\n                  endTime: BigInt(payload.endTime) * BigInt(MILLISECONDS_IN_NANOSECOND),\n                  attrs: {\n                    updatedModules: payload.updatedModules.map(m => m.replace(/^\\.\\//, \"[project]/\")),\n                    page: payload.page,\n                    isPageHidden: payload.isPageHidden\n                  }\n                };\n                break;\n              }\n            case \"client-reload-page\":\n            case \"client-success\":\n              {\n                traceChild = {\n                  name: payload.event\n                };\n                break;\n              }\n            case \"client-error\":\n              {\n                traceChild = {\n                  name: payload.event,\n                  attrs: {\n                    errorCount: payload.errorCount\n                  }\n                };\n                break;\n              }\n            case \"client-warning\":\n              {\n                traceChild = {\n                  name: payload.event,\n                  attrs: {\n                    warningCount: payload.warningCount\n                  }\n                };\n                break;\n              }\n            case \"client-removed-page\":\n            case \"client-added-page\":\n              {\n                traceChild = {\n                  name: payload.event,\n                  attrs: {\n                    page: payload.page || \"\"\n                  }\n                };\n                break;\n              }\n            case \"client-full-reload\":\n              {\n                const {\n                  event,\n                  stackTrace,\n                  hadRuntimeError\n                } = payload;\n                traceChild = {\n                  name: event,\n                  attrs: {\n                    stackTrace: stackTrace ?? \"\"\n                  }\n                };\n                if (hadRuntimeError) {\n                  _log.warn(`Fast Refresh had to perform a full reload due to a runtime error.`);\n                  break;\n                }\n                let fileMessage = \"\";\n                if (stackTrace) {\n                  var _exec;\n                  const file = (_exec = /Aborted because (.+) is not accepted/.exec(stackTrace)) == null ? void 0 : _exec[1];\n                  if (file) {\n                    // `file` is filepath in `pages/` but it can be weird long webpack url in `app/`.\n                    // If it's a webpack loader URL, it will start with '(app-pages)/./'\n                    if (file.startsWith(`(${_constants.WEBPACK_LAYERS.appPagesBrowser})/./`)) {\n                      const fileUrl = new URL(file, \"file://\");\n                      const cwd = process.cwd();\n                      const modules = fileUrl.searchParams.getAll(\"modules\").map(filepath => filepath.slice(cwd.length + 1)).filter(filepath => !filepath.startsWith(\"node_modules\"));\n                      if (modules.length > 0) {\n                        fileMessage = ` when ${modules.join(\", \")} changed`;\n                      }\n                    } else {\n                      fileMessage = ` when ${file} changed`;\n                    }\n                  }\n                }\n                _log.warn(`Fast Refresh had to perform a full reload${fileMessage}. Read more: https://nextjs.org/docs/messages/fast-refresh-reload`);\n                break;\n              }\n            default:\n              {\n                break;\n              }\n          }\n          if (traceChild) {\n            this.hotReloaderSpan.manualTraceChild(traceChild.name, traceChild.startTime || process.hrtime.bigint(), traceChild.endTime || process.hrtime.bigint(), {\n              ...traceChild.attrs,\n              clientId: payload.id\n            });\n          }\n        } catch (_) {\n          // invalid WebSocket message\n        }\n      });\n    });\n  }\n  async clean(span) {\n    return span.traceChild(\"clean\").traceAsyncFn(() => (0, _recursivedelete.recursiveDelete)((0, _path.join)(this.dir, this.config.distDir), /^cache/));\n  }\n  async getVersionInfo(span, enabled) {\n    const versionInfoSpan = span.traceChild(\"get-version-info\");\n    return versionInfoSpan.traceAsyncFn(async () => {\n      let installed = \"0.0.0\";\n      if (!enabled) {\n        return {\n          installed,\n          staleness: \"unknown\"\n        };\n      }\n      try {\n        installed = require(\"next/package.json\").version;\n        const registry = (0, _getregistry.getRegistry)();\n        const res = await fetch(`${registry}-/package/next/dist-tags`);\n        if (!res.ok) return {\n          installed,\n          staleness: \"unknown\"\n        };\n        const tags = await res.json();\n        return (0, _parseversioninfo.parseVersionInfo)({\n          installed,\n          latest: tags.latest,\n          canary: tags.canary\n        });\n      } catch {\n        return {\n          installed,\n          staleness: \"unknown\"\n        };\n      }\n    });\n  }\n  async getWebpackConfig(span) {\n    const webpackConfigSpan = span.traceChild(\"get-webpack-config\");\n    const pageExtensions = this.config.pageExtensions;\n    return webpackConfigSpan.traceAsyncFn(async () => {\n      const pagePaths = !this.pagesDir ? [] : await webpackConfigSpan.traceChild(\"get-page-paths\").traceAsyncFn(() => Promise.all([(0, _findpagefile.findPageFile)(this.pagesDir, \"/_app\", pageExtensions, false), (0, _findpagefile.findPageFile)(this.pagesDir, \"/_document\", pageExtensions, false)]));\n      this.pagesMapping = webpackConfigSpan.traceChild(\"create-pages-mapping\").traceFn(() => (0, _entries.createPagesMapping)({\n        isDev: true,\n        pageExtensions: this.config.pageExtensions,\n        pagesType: \"pages\",\n        pagePaths: pagePaths.filter(i => typeof i === \"string\"),\n        pagesDir: this.pagesDir\n      }));\n      const entrypoints = await webpackConfigSpan.traceChild(\"create-entrypoints\").traceAsyncFn(() => (0, _entries.createEntrypoints)({\n        appDir: this.appDir,\n        buildId: this.buildId,\n        config: this.config,\n        envFiles: [],\n        isDev: true,\n        pages: this.pagesMapping,\n        pagesDir: this.pagesDir,\n        previewMode: this.previewProps,\n        rootDir: this.dir,\n        pageExtensions: this.config.pageExtensions\n      }));\n      const commonWebpackOptions = {\n        dev: true,\n        buildId: this.buildId,\n        config: this.config,\n        pagesDir: this.pagesDir,\n        rewrites: this.rewrites,\n        originalRewrites: this.config._originalRewrites,\n        originalRedirects: this.config._originalRedirects,\n        runWebpackSpan: this.hotReloaderSpan,\n        appDir: this.appDir\n      };\n      return webpackConfigSpan.traceChild(\"generate-webpack-config\").traceAsyncFn(async () => {\n        const info = await (0, _webpackconfig.loadProjectInfo)({\n          dir: this.dir,\n          config: commonWebpackOptions.config,\n          dev: true\n        });\n        return Promise.all([\n        // order is important here\n        (0, _webpackconfig.default)(this.dir, {\n          ...commonWebpackOptions,\n          compilerType: _constants1.COMPILER_NAMES.client,\n          entrypoints: entrypoints.client,\n          ...info\n        }), (0, _webpackconfig.default)(this.dir, {\n          ...commonWebpackOptions,\n          compilerType: _constants1.COMPILER_NAMES.server,\n          entrypoints: entrypoints.server,\n          ...info\n        }), (0, _webpackconfig.default)(this.dir, {\n          ...commonWebpackOptions,\n          compilerType: _constants1.COMPILER_NAMES.edgeServer,\n          entrypoints: entrypoints.edgeServer,\n          ...info\n        })]);\n      });\n    });\n  }\n  async buildFallbackError() {\n    if (this.fallbackWatcher) return;\n    const info = await (0, _webpackconfig.loadProjectInfo)({\n      dir: this.dir,\n      config: this.config,\n      dev: true\n    });\n    const fallbackConfig = await (0, _webpackconfig.default)(this.dir, {\n      runWebpackSpan: this.hotReloaderSpan,\n      dev: true,\n      compilerType: _constants1.COMPILER_NAMES.client,\n      config: this.config,\n      buildId: this.buildId,\n      pagesDir: this.pagesDir,\n      rewrites: {\n        beforeFiles: [],\n        afterFiles: [],\n        fallback: []\n      },\n      originalRewrites: {\n        beforeFiles: [],\n        afterFiles: [],\n        fallback: []\n      },\n      originalRedirects: [],\n      isDevFallback: true,\n      entrypoints: (await (0, _entries.createEntrypoints)({\n        appDir: this.appDir,\n        buildId: this.buildId,\n        config: this.config,\n        envFiles: [],\n        isDev: true,\n        pages: {\n          \"/_app\": \"next/dist/pages/_app\",\n          \"/_error\": \"next/dist/pages/_error\"\n        },\n        pagesDir: this.pagesDir,\n        previewMode: this.previewProps,\n        rootDir: this.dir,\n        pageExtensions: this.config.pageExtensions\n      })).client,\n      ...info\n    });\n    const fallbackCompiler = (0, _webpack.webpack)(fallbackConfig);\n    this.fallbackWatcher = await new Promise(resolve => {\n      let bootedFallbackCompiler = false;\n      fallbackCompiler.watch(\n      // @ts-ignore webpack supports an array of watchOptions when using a multiCompiler\n      fallbackConfig.watchOptions,\n      // Errors are handled separately\n      _err => {\n        if (!bootedFallbackCompiler) {\n          bootedFallbackCompiler = true;\n          resolve(true);\n        }\n      });\n    });\n  }\n  async start() {\n    const startSpan = this.hotReloaderSpan.traceChild(\"start\");\n    startSpan.stop() // Stop immediately to create an artificial parent span\n    ;\n\n    const testMode = process.env.NEXT_TEST_MODE || process.env.__NEXT_TEST_MODE;\n    this.versionInfo = await this.getVersionInfo(startSpan, !!testMode || this.telemetry.isEnabled);\n    await this.clean(startSpan);\n    // Ensure distDir exists before writing package.json\n    await _fs.promises.mkdir(this.distDir, {\n      recursive: true\n    });\n    const distPackageJsonPath = (0, _path.join)(this.distDir, \"package.json\");\n    // Ensure commonjs handling is used for files in the distDir (generally .next)\n    // Files outside of the distDir can be \"type\": \"module\"\n    await _fs.promises.writeFile(distPackageJsonPath, '{\"type\": \"commonjs\"}');\n    this.activeWebpackConfigs = await this.getWebpackConfig(startSpan);\n    for (const config of this.activeWebpackConfigs) {\n      const defaultEntry = config.entry;\n      config.entry = async (...args) => {\n        var _this_multiCompiler;\n        const outputPath = ((_this_multiCompiler = this.multiCompiler) == null ? void 0 : _this_multiCompiler.outputPath) || \"\";\n        const entries = (0, _ondemandentryhandler.getEntries)(outputPath);\n        // @ts-ignore entry is always a function\n        const entrypoints = await defaultEntry(...args);\n        const isClientCompilation = config.name === _constants1.COMPILER_NAMES.client;\n        const isNodeServerCompilation = config.name === _constants1.COMPILER_NAMES.server;\n        const isEdgeServerCompilation = config.name === _constants1.COMPILER_NAMES.edgeServer;\n        await Promise.all(Object.keys(entries).map(async entryKey => {\n          const entryData = entries[entryKey];\n          const {\n            bundlePath,\n            dispose\n          } = entryData;\n          const result = /^(client|server|edge-server)@(app|pages|root)@(.*)/g.exec(entryKey);\n          const [, key /* pageType */,, page] = result // this match should always happen\n          ;\n\n          if (key === _constants1.COMPILER_NAMES.client && !isClientCompilation) return;\n          if (key === _constants1.COMPILER_NAMES.server && !isNodeServerCompilation) return;\n          if (key === _constants1.COMPILER_NAMES.edgeServer && !isEdgeServerCompilation) return;\n          const isEntry = entryData.type === _ondemandentryhandler.EntryTypes.ENTRY;\n          const isChildEntry = entryData.type === _ondemandentryhandler.EntryTypes.CHILD_ENTRY;\n          // Check if the page was removed or disposed and remove it\n          if (isEntry) {\n            const pageExists = !dispose && (await (0, _fileexists.fileExists)(entryData.absolutePagePath));\n            if (!pageExists) {\n              delete entries[entryKey];\n              return;\n            }\n          }\n          // For child entries, if it has an entry file and it's gone, remove it\n          if (isChildEntry) {\n            if (entryData.absoluteEntryFilePath) {\n              const pageExists = !dispose && (await (0, _fileexists.fileExists)(entryData.absoluteEntryFilePath));\n              if (!pageExists) {\n                delete entries[entryKey];\n                return;\n              }\n            }\n          }\n          // Ensure _error is considered a `pages` page.\n          if (page === \"/_error\") {\n            this.hasPagesRouterEntrypoints = true;\n          }\n          const hasAppDir = !!this.appDir;\n          const isAppPath = hasAppDir && bundlePath.startsWith(\"app/\");\n          const staticInfo = isEntry ? await (0, _entries.getStaticInfoIncludingLayouts)({\n            isInsideAppDir: isAppPath,\n            pageExtensions: this.config.pageExtensions,\n            pageFilePath: entryData.absolutePagePath,\n            appDir: this.appDir,\n            config: this.config,\n            isDev: true,\n            page\n          }) : {};\n          if (staticInfo.amp === true || staticInfo.amp === \"hybrid\") {\n            this.hasAmpEntrypoints = true;\n          }\n          const isServerComponent = isAppPath && staticInfo.rsc !== _constants1.RSC_MODULE_TYPES.client;\n          const pageType = entryData.bundlePath.startsWith(\"pages/\") ? \"pages\" : entryData.bundlePath.startsWith(\"app/\") ? \"app\" : \"root\";\n          if (pageType === \"pages\") {\n            this.hasPagesRouterEntrypoints = true;\n          }\n          if (pageType === \"app\") {\n            this.hasAppRouterEntrypoints = true;\n          }\n          (0, _entries.runDependingOnPageType)({\n            page,\n            pageRuntime: staticInfo.runtime,\n            pageType,\n            onEdgeServer: () => {\n              // TODO-APP: verify if child entry should support.\n              if (!isEdgeServerCompilation || !isEntry) return;\n              const appDirLoader = isAppPath ? (0, _entries.getAppEntry)({\n                name: bundlePath,\n                page,\n                appPaths: entryData.appPaths,\n                pagePath: _path.posix.join(_constants.APP_DIR_ALIAS, (0, _path.relative)(this.appDir, entryData.absolutePagePath).replace(/\\\\/g, \"/\")),\n                appDir: this.appDir,\n                pageExtensions: this.config.pageExtensions,\n                rootDir: this.dir,\n                isDev: true,\n                tsconfigPath: this.config.typescript.tsconfigPath,\n                basePath: this.config.basePath,\n                assetPrefix: this.config.assetPrefix,\n                nextConfigOutput: this.config.output,\n                preferredRegion: staticInfo.preferredRegion,\n                middlewareConfig: Buffer.from(JSON.stringify(staticInfo.middleware || {})).toString(\"base64\")\n              }).import : undefined;\n              entries[entryKey].status = _ondemandentryhandler.BUILDING;\n              entrypoints[bundlePath] = (0, _entries.finalizeEntrypoint)({\n                compilerType: _constants1.COMPILER_NAMES.edgeServer,\n                name: bundlePath,\n                value: (0, _entries.getEdgeServerEntry)({\n                  absolutePagePath: entryData.absolutePagePath,\n                  rootDir: this.dir,\n                  buildId: this.buildId,\n                  bundlePath,\n                  config: this.config,\n                  isDev: true,\n                  page,\n                  pages: this.pagesMapping,\n                  isServerComponent,\n                  appDirLoader,\n                  pagesType: isAppPath ? \"app\" : \"pages\",\n                  preferredRegion: staticInfo.preferredRegion\n                }),\n                hasAppDir\n              });\n            },\n            onClient: () => {\n              if (!isClientCompilation) return;\n              if (isChildEntry) {\n                entries[entryKey].status = _ondemandentryhandler.BUILDING;\n                entrypoints[bundlePath] = (0, _entries.finalizeEntrypoint)({\n                  name: bundlePath,\n                  compilerType: _constants1.COMPILER_NAMES.client,\n                  value: entryData.request,\n                  hasAppDir\n                });\n              } else {\n                entries[entryKey].status = _ondemandentryhandler.BUILDING;\n                entrypoints[bundlePath] = (0, _entries.finalizeEntrypoint)({\n                  name: bundlePath,\n                  compilerType: _constants1.COMPILER_NAMES.client,\n                  value: (0, _entries.getClientEntry)({\n                    absolutePagePath: entryData.absolutePagePath,\n                    page\n                  }),\n                  hasAppDir\n                });\n              }\n            },\n            onServer: () => {\n              // TODO-APP: verify if child entry should support.\n              if (!isNodeServerCompilation || !isEntry) return;\n              entries[entryKey].status = _ondemandentryhandler.BUILDING;\n              let relativeRequest = (0, _path.relative)(config.context, entryData.absolutePagePath);\n              if (!(0, _path.isAbsolute)(relativeRequest) && !relativeRequest.startsWith(\"../\")) {\n                relativeRequest = `./${relativeRequest}`;\n              }\n              let value;\n              if (isAppPath) {\n                value = (0, _entries.getAppEntry)({\n                  name: bundlePath,\n                  page,\n                  appPaths: entryData.appPaths,\n                  pagePath: _path.posix.join(_constants.APP_DIR_ALIAS, (0, _path.relative)(this.appDir, entryData.absolutePagePath).replace(/\\\\/g, \"/\")),\n                  appDir: this.appDir,\n                  pageExtensions: this.config.pageExtensions,\n                  rootDir: this.dir,\n                  isDev: true,\n                  tsconfigPath: this.config.typescript.tsconfigPath,\n                  basePath: this.config.basePath,\n                  assetPrefix: this.config.assetPrefix,\n                  nextConfigOutput: this.config.output,\n                  preferredRegion: staticInfo.preferredRegion,\n                  middlewareConfig: Buffer.from(JSON.stringify(staticInfo.middleware || {})).toString(\"base64\")\n                });\n              } else if ((0, _isapiroute.isAPIRoute)(page)) {\n                value = (0, _nextrouteloader.getRouteLoaderEntry)({\n                  kind: _routekind.RouteKind.PAGES_API,\n                  page,\n                  absolutePagePath: relativeRequest,\n                  preferredRegion: staticInfo.preferredRegion,\n                  middlewareConfig: staticInfo.middleware || {}\n                });\n              } else if (!(0, _utils.isMiddlewareFile)(page) && !(0, _isinternalcomponent.isInternalComponent)(relativeRequest) && !(0, _isinternalcomponent.isNonRoutePagesPage)(page)) {\n                value = (0, _nextrouteloader.getRouteLoaderEntry)({\n                  kind: _routekind.RouteKind.PAGES,\n                  page,\n                  pages: this.pagesMapping,\n                  absolutePagePath: relativeRequest,\n                  preferredRegion: staticInfo.preferredRegion,\n                  middlewareConfig: staticInfo.middleware ?? {}\n                });\n              } else {\n                value = relativeRequest;\n              }\n              entrypoints[bundlePath] = (0, _entries.finalizeEntrypoint)({\n                compilerType: _constants1.COMPILER_NAMES.server,\n                name: bundlePath,\n                isServerComponent,\n                value,\n                hasAppDir\n              });\n            }\n          });\n        }));\n        if (!this.hasAmpEntrypoints) {\n          delete entrypoints[_constants1.CLIENT_STATIC_FILES_RUNTIME_AMP];\n        }\n        if (!this.hasPagesRouterEntrypoints) {\n          delete entrypoints[_constants1.CLIENT_STATIC_FILES_RUNTIME_MAIN];\n          delete entrypoints[\"pages/_app\"];\n          delete entrypoints[\"pages/_error\"];\n          delete entrypoints[\"/_error\"];\n          delete entrypoints[\"pages/_document\"];\n        }\n        // Remove React Refresh entrypoint chunk as `app` doesn't require it.\n        if (!this.hasAmpEntrypoints && !this.hasPagesRouterEntrypoints) {\n          delete entrypoints[_constants1.CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH];\n        }\n        if (!this.hasAppRouterEntrypoints) {\n          delete entrypoints[_constants1.CLIENT_STATIC_FILES_RUNTIME_MAIN_APP];\n        }\n        return entrypoints;\n      };\n    }\n    // Enable building of client compilation before server compilation in development\n    // @ts-ignore webpack 5\n    this.activeWebpackConfigs.parallelism = 1;\n    this.multiCompiler = (0, _webpack.webpack)(this.activeWebpackConfigs);\n    // Copy over the filesystem so that it is shared between all compilers.\n    const inputFileSystem = this.multiCompiler.compilers[0].inputFileSystem;\n    for (const compiler of this.multiCompiler.compilers) {\n      compiler.inputFileSystem = inputFileSystem;\n      // This is set for the initial compile. After that Watching class in webpack adds it.\n      compiler.fsStartTime = Date.now();\n      // Ensure NodeEnvironmentPlugin doesn't purge the inputFileSystem. Purging is handled in `done` below.\n      compiler.hooks.beforeRun.intercept({\n        register(tapInfo) {\n          if (tapInfo.name === \"NodeEnvironmentPlugin\") {\n            return null;\n          }\n          return tapInfo;\n        }\n      });\n    }\n    this.multiCompiler.hooks.done.tap(\"NextjsHotReloader\", () => {\n      inputFileSystem.purge();\n    });\n    (0, _output.watchCompilers)(this.multiCompiler.compilers[0], this.multiCompiler.compilers[1], this.multiCompiler.compilers[2]);\n    // Watch for changes to client/server page files so we can tell when just\n    // the server file changes and trigger a reload for GS(S)P pages\n    const changedClientPages = new Set();\n    const changedServerPages = new Set();\n    const changedEdgeServerPages = new Set();\n    const changedServerComponentPages = new Set();\n    const changedCSSImportPages = new Set();\n    const prevClientPageHashes = new Map();\n    const prevServerPageHashes = new Map();\n    const prevEdgeServerPageHashes = new Map();\n    const prevCSSImportModuleHashes = new Map();\n    const pageExtensionRegex = new RegExp(`\\\\.(?:${this.config.pageExtensions.join(\"|\")})$`);\n    const trackPageChanges = (pageHashMap, changedItems, serverComponentChangedItems) => stats => {\n      try {\n        stats.entrypoints.forEach((entry, key) => {\n          if (key.startsWith(\"pages/\") || key.startsWith(\"app/\") || (0, _utils.isMiddlewareFilename)(key)) {\n            // TODO this doesn't handle on demand loaded chunks\n            entry.chunks.forEach(chunk => {\n              if (chunk.id === key) {\n                const modsIterable = stats.chunkGraph.getChunkModulesIterable(chunk);\n                let hasCSSModuleChanges = false;\n                let chunksHash = new _webpack.StringXor();\n                let chunksHashServerLayer = new _webpack.StringXor();\n                modsIterable.forEach(mod => {\n                  if (mod.resource && mod.resource.replace(/\\\\/g, \"/\").includes(key) &&\n                  // Shouldn't match CSS modules, etc.\n                  pageExtensionRegex.test(mod.resource)) {\n                    var _mod_buildInfo_rsc, _mod_buildInfo;\n                    // use original source to calculate hash since mod.hash\n                    // includes the source map in development which changes\n                    // every time for both server and client so we calculate\n                    // the hash without the source map for the page module\n                    const hash = require(\"crypto\").createHash(\"sha1\").update(mod.originalSource().buffer()).digest().toString(\"hex\");\n                    if (mod.layer === _constants.WEBPACK_LAYERS.reactServerComponents && (mod == null ? void 0 : (_mod_buildInfo = mod.buildInfo) == null ? void 0 : (_mod_buildInfo_rsc = _mod_buildInfo.rsc) == null ? void 0 : _mod_buildInfo_rsc.type) !== \"client\") {\n                      chunksHashServerLayer.add(hash);\n                    }\n                    chunksHash.add(hash);\n                  } else {\n                    var _mod_buildInfo_rsc1, _mod_buildInfo1;\n                    // for non-pages we can use the module hash directly\n                    const hash = stats.chunkGraph.getModuleHash(mod, chunk.runtime);\n                    if (mod.layer === _constants.WEBPACK_LAYERS.reactServerComponents && (mod == null ? void 0 : (_mod_buildInfo1 = mod.buildInfo) == null ? void 0 : (_mod_buildInfo_rsc1 = _mod_buildInfo1.rsc) == null ? void 0 : _mod_buildInfo_rsc1.type) !== \"client\") {\n                      chunksHashServerLayer.add(hash);\n                    }\n                    chunksHash.add(hash);\n                    // Both CSS import changes from server and client\n                    // components are tracked.\n                    if (key.startsWith(\"app/\") && /\\.(css|scss|sass)$/.test(mod.resource || \"\")) {\n                      const resourceKey = mod.layer + \":\" + mod.resource;\n                      const prevHash = prevCSSImportModuleHashes.get(resourceKey);\n                      if (prevHash && prevHash !== hash) {\n                        hasCSSModuleChanges = true;\n                      }\n                      prevCSSImportModuleHashes.set(resourceKey, hash);\n                    }\n                  }\n                });\n                const prevHash = pageHashMap.get(key);\n                const curHash = chunksHash.toString();\n                if (prevHash && prevHash !== curHash) {\n                  changedItems.add(key);\n                }\n                pageHashMap.set(key, curHash);\n                if (serverComponentChangedItems) {\n                  const serverKey = _constants.WEBPACK_LAYERS.reactServerComponents + \":\" + key;\n                  const prevServerHash = pageHashMap.get(serverKey);\n                  const curServerHash = chunksHashServerLayer.toString();\n                  if (prevServerHash && prevServerHash !== curServerHash) {\n                    serverComponentChangedItems.add(key);\n                  }\n                  pageHashMap.set(serverKey, curServerHash);\n                }\n                if (hasCSSModuleChanges) {\n                  changedCSSImportPages.add(key);\n                }\n              }\n            });\n          }\n        });\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    this.multiCompiler.compilers[0].hooks.emit.tap(\"NextjsHotReloaderForClient\", trackPageChanges(prevClientPageHashes, changedClientPages));\n    this.multiCompiler.compilers[1].hooks.emit.tap(\"NextjsHotReloaderForServer\", trackPageChanges(prevServerPageHashes, changedServerPages, changedServerComponentPages));\n    this.multiCompiler.compilers[2].hooks.emit.tap(\"NextjsHotReloaderForServer\", trackPageChanges(prevEdgeServerPageHashes, changedEdgeServerPages, changedServerComponentPages));\n    // This plugin watches for changes to _document.js and notifies the client side that it should reload the page\n    this.multiCompiler.compilers[1].hooks.failed.tap(\"NextjsHotReloaderForServer\", err => {\n      this.serverError = err;\n      this.serverStats = null;\n      this.serverChunkNames = undefined;\n    });\n    this.multiCompiler.compilers[2].hooks.done.tap(\"NextjsHotReloaderForServer\", stats => {\n      this.serverError = null;\n      this.edgeServerStats = stats;\n    });\n    this.multiCompiler.compilers[1].hooks.done.tap(\"NextjsHotReloaderForServer\", stats => {\n      this.serverError = null;\n      this.serverStats = stats;\n      if (!this.pagesDir) {\n        return;\n      }\n      const {\n        compilation\n      } = stats;\n      // We only watch `_document` for changes on the server compilation\n      // the rest of the files will be triggered by the client compilation\n      const documentChunk = compilation.namedChunks.get(\"pages/_document\");\n      // If the document chunk can't be found we do nothing\n      if (!documentChunk) {\n        return;\n      }\n      // Initial value\n      if (this.serverPrevDocumentHash === null) {\n        this.serverPrevDocumentHash = documentChunk.hash || null;\n        return;\n      }\n      // If _document.js didn't change we don't trigger a reload.\n      if (documentChunk.hash === this.serverPrevDocumentHash) {\n        return;\n      }\n      // As document chunk will change if new app pages are joined,\n      // since react bundle is different it will effect the chunk hash.\n      // So we diff the chunk changes, if there's only new app page chunk joins,\n      // then we don't trigger a reload by checking pages/_document chunk change.\n      if (this.appDir) {\n        const chunkNames = new Set(compilation.namedChunks.keys());\n        const diffChunkNames = (0, _utils.difference)(this.serverChunkNames || new Set(), chunkNames);\n        if (diffChunkNames.length === 0 || diffChunkNames.every(chunkName => chunkName.startsWith(\"app/\"))) {\n          return;\n        }\n        this.serverChunkNames = chunkNames;\n      }\n      this.serverPrevDocumentHash = documentChunk.hash || null;\n      // Notify reload to reload the page, as _document.js was changed (different hash)\n      this.send({\n        action: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.RELOAD_PAGE\n      });\n    });\n    this.multiCompiler.hooks.done.tap(\"NextjsHotReloaderForServer\", () => {\n      const reloadAfterInvalidation = this.reloadAfterInvalidation;\n      this.reloadAfterInvalidation = false;\n      const serverOnlyChanges = (0, _utils.difference)(changedServerPages, changedClientPages);\n      const edgeServerOnlyChanges = (0, _utils.difference)(changedEdgeServerPages, changedClientPages);\n      const pageChanges = serverOnlyChanges.concat(edgeServerOnlyChanges).filter(key => key.startsWith(\"pages/\"));\n      const middlewareChanges = Array.from(changedEdgeServerPages).filter(name => (0, _utils.isMiddlewareFilename)(name));\n      if (middlewareChanges.length > 0) {\n        this.send({\n          event: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.MIDDLEWARE_CHANGES\n        });\n      }\n      if (pageChanges.length > 0) {\n        this.send({\n          event: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.SERVER_ONLY_CHANGES,\n          pages: serverOnlyChanges.map(pg => (0, _denormalizepagepath.denormalizePagePath)(pg.slice(\"pages\".length)))\n        });\n      }\n      if (changedServerComponentPages.size || changedCSSImportPages.size || reloadAfterInvalidation) {\n        this.refreshServerComponents();\n      }\n      changedClientPages.clear();\n      changedServerPages.clear();\n      changedEdgeServerPages.clear();\n      changedServerComponentPages.clear();\n      changedCSSImportPages.clear();\n    });\n    this.multiCompiler.compilers[0].hooks.failed.tap(\"NextjsHotReloaderForClient\", err => {\n      this.clientError = err;\n      this.clientStats = null;\n    });\n    this.multiCompiler.compilers[0].hooks.done.tap(\"NextjsHotReloaderForClient\", stats => {\n      this.clientError = null;\n      this.clientStats = stats;\n      const {\n        compilation\n      } = stats;\n      const chunkNames = new Set([...compilation.namedChunks.keys()].filter(name => !!(0, _getroutefromentrypoint.default)(name)));\n      if (this.prevChunkNames) {\n        // detect chunks which have to be replaced with a new template\n        // e.g, pages/index.js <-> pages/_error.js\n        const addedPages = diff(chunkNames, this.prevChunkNames);\n        const removedPages = diff(this.prevChunkNames, chunkNames);\n        if (addedPages.size > 0) {\n          for (const addedPage of addedPages) {\n            const page = (0, _getroutefromentrypoint.default)(addedPage);\n            this.send({\n              action: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.ADDED_PAGE,\n              data: [page]\n            });\n          }\n        }\n        if (removedPages.size > 0) {\n          for (const removedPage of removedPages) {\n            const page = (0, _getroutefromentrypoint.default)(removedPage);\n            this.send({\n              action: _hotreloadertypes.HMR_ACTIONS_SENT_TO_BROWSER.REMOVED_PAGE,\n              data: [page]\n            });\n          }\n        }\n      }\n      this.prevChunkNames = chunkNames;\n    });\n    this.webpackHotMiddleware = new _hotmiddleware.WebpackHotMiddleware(this.multiCompiler.compilers, this.versionInfo);\n    let booted = false;\n    this.watcher = await new Promise(resolve => {\n      var _this_multiCompiler;\n      const watcher = (_this_multiCompiler = this.multiCompiler) == null ? void 0 : _this_multiCompiler.watch(\n      // @ts-ignore webpack supports an array of watchOptions when using a multiCompiler\n      this.activeWebpackConfigs.map(config => config.watchOptions),\n      // Errors are handled separately\n      _err => {\n        if (!booted) {\n          booted = true;\n          resolve(watcher);\n        }\n      });\n    });\n    this.onDemandEntries = (0, _ondemandentryhandler.onDemandEntryHandler)({\n      hotReloader: this,\n      multiCompiler: this.multiCompiler,\n      pagesDir: this.pagesDir,\n      appDir: this.appDir,\n      rootDir: this.dir,\n      nextConfig: this.config,\n      ...this.config.onDemandEntries\n    });\n    this.interceptors = [(0, _middleware.getOverlayMiddleware)({\n      rootDirectory: this.dir,\n      stats: () => this.clientStats,\n      serverStats: () => this.serverStats,\n      edgeServerStats: () => this.edgeServerStats\n    })];\n  }\n  invalidate({\n    reloadAfterInvalidation\n  } = {\n    reloadAfterInvalidation: false\n  }) {\n    var _this_multiCompiler, _getInvalidator;\n    // Cache the `reloadAfterInvalidation` flag, and use it to reload the page when compilation is done\n    this.reloadAfterInvalidation = reloadAfterInvalidation;\n    const outputPath = (_this_multiCompiler = this.multiCompiler) == null ? void 0 : _this_multiCompiler.outputPath;\n    return outputPath && ((_getInvalidator = (0, _ondemandentryhandler.getInvalidator)(outputPath)) == null ? void 0 : _getInvalidator.invalidate());\n  }\n  async stop() {\n    await new Promise((resolve, reject) => {\n      this.watcher.close(err => err ? reject(err) : resolve(true));\n    });\n    if (this.fallbackWatcher) {\n      await new Promise((resolve, reject) => {\n        this.fallbackWatcher.close(err => err ? reject(err) : resolve(true));\n      });\n    }\n    this.multiCompiler = undefined;\n  }\n  async getCompilationErrors(page) {\n    var _this_clientStats, _this_serverStats, _this_edgeServerStats;\n    const getErrors = ({\n      compilation\n    }) => {\n      var _failedPages_normalizedPage;\n      const failedPages = erroredPages(compilation);\n      const normalizedPage = (0, _normalizepathsep.normalizePathSep)(page);\n      // If there is an error related to the requesting page we display it instead of the first error\n      return ((_failedPages_normalizedPage = failedPages[normalizedPage]) == null ? void 0 : _failedPages_normalizedPage.length) > 0 ? failedPages[normalizedPage] : compilation.errors;\n    };\n    if (this.clientError || this.serverError) {\n      return [this.clientError || this.serverError];\n    } else if ((_this_clientStats = this.clientStats) == null ? void 0 : _this_clientStats.hasErrors()) {\n      return getErrors(this.clientStats);\n    } else if ((_this_serverStats = this.serverStats) == null ? void 0 : _this_serverStats.hasErrors()) {\n      return getErrors(this.serverStats);\n    } else if ((_this_edgeServerStats = this.edgeServerStats) == null ? void 0 : _this_edgeServerStats.hasErrors()) {\n      return getErrors(this.edgeServerStats);\n    } else {\n      return [];\n    }\n  }\n  send(action) {\n    this.webpackHotMiddleware.publish(action);\n  }\n  async ensurePage({\n    page,\n    clientOnly,\n    appPaths,\n    match,\n    isApp\n  }) {\n    var _this_onDemandEntries;\n    // Make sure we don't re-build or dispose prebuilt pages\n    if (page !== \"/_error\" && _constants1.BLOCKED_PAGES.indexOf(page) !== -1) {\n      return;\n    }\n    const error = clientOnly ? this.clientError : this.serverError || this.clientError;\n    if (error) {\n      throw error;\n    }\n    return (_this_onDemandEntries = this.onDemandEntries) == null ? void 0 : _this_onDemandEntries.ensurePage({\n      page,\n      clientOnly,\n      appPaths,\n      match,\n      isApp\n    });\n  }\n}","map":{"version":3,"names":["renderScriptError","matchNextPageBundleRequest","default","HotReloader","MILLISECONDS_IN_NANOSECOND","diff","a","b","Set","filter","v","has","wsServer","_ws","Server","noServer","res","error","verbose","setHeader","code","finished","undefined","console","stack","statusCode","end","addCorsSupport","req","url","startsWith","preflight","headers","origin","method","writeHead","_pathmatch","getPathMatch","findEntryModule","module1","compilation","issuer","moduleGraph","getIssuer","erroredPages","failedPages","errors","module","entryModule","name","enhancedName","_getroutefromentrypoint","push","constructor","dir","config","pagesDir","distDir","buildId","previewProps","rewrites","appDir","telemetry","clientError","serverError","hmrServerError","pagesMapping","versionInfo","staleness","installed","reloadAfterInvalidation","hasAmpEntrypoints","hasAppRouterEntrypoints","hasPagesRouterEntrypoints","interceptors","clientStats","serverStats","edgeServerStats","serverPrevDocumentHash","hotReloaderSpan","_trace","trace","version","stop","run","parsedUrl","handlePageBundleRequest","pageBundleRes","parsedPageBundleUrl","pathname","params","decodedPagePath","path","map","param","decodeURIComponent","join","_","_utils1","DecodeError","page","_denormalizepagepath","denormalizePagePath","_constants1","BLOCKED_PAGES","indexOf","ensurePage","clientOnly","_iserror","getProperError","getCompilationErrors","length","fn","Promise","resolve","reject","err","setHmrServerError","clearHmrServerError","send","action","_hotreloadertypes","HMR_ACTIONS_SENT_TO_BROWSER","RELOAD_PAGE","refreshServerComponents","SERVER_COMPONENT_CHANGES","onHMR","_socket","head","handleUpgrade","socket","client","_this_webpackHotMiddleware","_this_onDemandEntries","webpackHotMiddleware","onDemandEntries","addEventListener","data","toString","payload","JSON","parse","traceChild","event","Span","spanName","startTime","BigInt","Math","floor","attrs","attributes","endTime","updatedModules","m","replace","isPageHidden","errorCount","warningCount","stackTrace","hadRuntimeError","_log","warn","fileMessage","_exec","file","exec","_constants","WEBPACK_LAYERS","appPagesBrowser","fileUrl","URL","cwd","process","modules","searchParams","getAll","filepath","slice","manualTraceChild","hrtime","bigint","clientId","id","clean","span","traceAsyncFn","_recursivedelete","recursiveDelete","_path","getVersionInfo","enabled","versionInfoSpan","require","registry","_getregistry","getRegistry","fetch","ok","tags","json","_parseversioninfo","parseVersionInfo","latest","canary","getWebpackConfig","webpackConfigSpan","pageExtensions","pagePaths","all","_findpagefile","findPageFile","traceFn","_entries","createPagesMapping","isDev","pagesType","i","entrypoints","createEntrypoints","envFiles","pages","previewMode","rootDir","commonWebpackOptions","dev","originalRewrites","_originalRewrites","originalRedirects","_originalRedirects","runWebpackSpan","info","_webpackconfig","loadProjectInfo","compilerType","COMPILER_NAMES","server","edgeServer","buildFallbackError","fallbackWatcher","fallbackConfig","beforeFiles","afterFiles","fallback","isDevFallback","fallbackCompiler","_webpack","webpack","bootedFallbackCompiler","watch","watchOptions","_err","start","startSpan","testMode","env","NEXT_TEST_MODE","__NEXT_TEST_MODE","isEnabled","_fs","promises","mkdir","recursive","distPackageJsonPath","writeFile","activeWebpackConfigs","defaultEntry","entry","args","_this_multiCompiler","outputPath","multiCompiler","entries","_ondemandentryhandler","getEntries","isClientCompilation","isNodeServerCompilation","isEdgeServerCompilation","Object","keys","entryKey","entryData","bundlePath","dispose","result","key","isEntry","type","EntryTypes","ENTRY","isChildEntry","CHILD_ENTRY","pageExists","_fileexists","fileExists","absolutePagePath","absoluteEntryFilePath","hasAppDir","isAppPath","staticInfo","getStaticInfoIncludingLayouts","isInsideAppDir","pageFilePath","amp","isServerComponent","rsc","RSC_MODULE_TYPES","pageType","runDependingOnPageType","pageRuntime","runtime","onEdgeServer","appDirLoader","getAppEntry","appPaths","pagePath","posix","APP_DIR_ALIAS","relative","tsconfigPath","typescript","basePath","assetPrefix","nextConfigOutput","output","preferredRegion","middlewareConfig","Buffer","from","stringify","middleware","import","status","BUILDING","finalizeEntrypoint","value","getEdgeServerEntry","onClient","request","getClientEntry","onServer","relativeRequest","context","isAbsolute","_isapiroute","isAPIRoute","_nextrouteloader","getRouteLoaderEntry","kind","_routekind","RouteKind","PAGES_API","_utils","isMiddlewareFile","_isinternalcomponent","isInternalComponent","isNonRoutePagesPage","PAGES","CLIENT_STATIC_FILES_RUNTIME_AMP","CLIENT_STATIC_FILES_RUNTIME_MAIN","CLIENT_STATIC_FILES_RUNTIME_REACT_REFRESH","CLIENT_STATIC_FILES_RUNTIME_MAIN_APP","parallelism","inputFileSystem","compilers","compiler","fsStartTime","Date","now","hooks","beforeRun","intercept","register","tapInfo","done","tap","purge","_output","watchCompilers","changedClientPages","changedServerPages","changedEdgeServerPages","changedServerComponentPages","changedCSSImportPages","prevClientPageHashes","Map","prevServerPageHashes","prevEdgeServerPageHashes","prevCSSImportModuleHashes","pageExtensionRegex","RegExp","trackPageChanges","pageHashMap","changedItems","serverComponentChangedItems","stats","forEach","isMiddlewareFilename","chunks","chunk","modsIterable","chunkGraph","getChunkModulesIterable","hasCSSModuleChanges","chunksHash","StringXor","chunksHashServerLayer","mod","resource","includes","test","_mod_buildInfo_rsc","_mod_buildInfo","hash","createHash","update","originalSource","buffer","digest","layer","reactServerComponents","buildInfo","add","_mod_buildInfo_rsc1","_mod_buildInfo1","getModuleHash","resourceKey","prevHash","get","set","curHash","serverKey","prevServerHash","curServerHash","emit","failed","serverChunkNames","documentChunk","namedChunks","chunkNames","diffChunkNames","difference","every","chunkName","serverOnlyChanges","edgeServerOnlyChanges","pageChanges","concat","middlewareChanges","Array","MIDDLEWARE_CHANGES","SERVER_ONLY_CHANGES","pg","size","clear","prevChunkNames","addedPages","removedPages","addedPage","ADDED_PAGE","removedPage","REMOVED_PAGE","_hotmiddleware","WebpackHotMiddleware","booted","watcher","onDemandEntryHandler","hotReloader","nextConfig","_middleware","getOverlayMiddleware","rootDirectory","invalidate","_getInvalidator","getInvalidator","close","_this_clientStats","_this_serverStats","_this_edgeServerStats","getErrors","_failedPages_normalizedPage","normalizedPage","_normalizepathsep","normalizePathSep","hasErrors","publish","match","isApp"],"sources":["../../../src/server/dev/hot-reloader-webpack.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}