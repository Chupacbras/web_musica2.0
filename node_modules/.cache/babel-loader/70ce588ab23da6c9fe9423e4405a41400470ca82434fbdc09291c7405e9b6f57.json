{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"setRevalidateHeaders\", {\n  enumerable: true,\n  get: function () {\n    return setRevalidateHeaders;\n  }\n});\nfunction setRevalidateHeaders(res, options) {\n  if (options.private || options.stateful) {\n    if (options.private || !res.getHeader(\"Cache-Control\")) {\n      res.setHeader(\"Cache-Control\", `private, no-cache, no-store, max-age=0, must-revalidate`);\n    }\n  } else if (typeof options.revalidate === \"number\") {\n    if (options.revalidate < 1) {\n      throw new Error(`invariant: invalid Cache-Control duration provided: ${options.revalidate} < 1`);\n    }\n    res.setHeader(\"Cache-Control\", `s-maxage=${options.revalidate}, stale-while-revalidate`);\n  } else if (options.revalidate === false) {\n    res.setHeader(\"Cache-Control\", `s-maxage=31536000, stale-while-revalidate`);\n  }\n}","map":{"version":3,"names":["setRevalidateHeaders","res","options","private","stateful","getHeader","setHeader","revalidate","Error"],"sources":["../../../src/server/send-payload/revalidate-headers.ts"],"sourcesContent":[null],"mappings":";;;;;+BAIgB;;;WAAAA,oBAAA;;;AAAT,SAASA,qBACdC,GAAsC,EACtCC,OAAuB;EAEvB,IAAIA,OAAA,CAAQC,OAAO,IAAID,OAAA,CAAQE,QAAQ,EAAE;IACvC,IAAIF,OAAA,CAAQC,OAAO,IAAI,CAACF,GAAA,CAAII,SAAS,CAAC,kBAAkB;MACtDJ,GAAA,CAAIK,SAAS,CACX,iBACC,yDAAwD;IAE7D;EACF,OAAO,IAAI,OAAOJ,OAAA,CAAQK,UAAU,KAAK,UAAU;IACjD,IAAIL,OAAA,CAAQK,UAAU,GAAG,GAAG;MAC1B,MAAM,IAAIC,KAAA,CACP,uDAAsDN,OAAA,CAAQK,UAAW,MAAK;IAEnF;IAEAN,GAAA,CAAIK,SAAS,CACX,iBACC,YAAWJ,OAAA,CAAQK,UAAW,0BAAyB;EAE5D,OAAO,IAAIL,OAAA,CAAQK,UAAU,KAAK,OAAO;IACvCN,GAAA,CAAIK,SAAS,CAAC,iBAAkB,2CAA0C;EAC5E;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}