{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  eventTypeCheckCompleted: null,\n  eventLintCheckCompleted: null,\n  eventBuildCompleted: null,\n  eventBuildOptimize: null,\n  EVENT_BUILD_FEATURE_USAGE: null,\n  eventBuildFeatureUsage: null,\n  EVENT_NAME_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS: null,\n  eventPackageUsedInGetServerSideProps: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  eventTypeCheckCompleted: function () {\n    return eventTypeCheckCompleted;\n  },\n  eventLintCheckCompleted: function () {\n    return eventLintCheckCompleted;\n  },\n  eventBuildCompleted: function () {\n    return eventBuildCompleted;\n  },\n  eventBuildOptimize: function () {\n    return eventBuildOptimize;\n  },\n  EVENT_BUILD_FEATURE_USAGE: function () {\n    return EVENT_BUILD_FEATURE_USAGE;\n  },\n  eventBuildFeatureUsage: function () {\n    return eventBuildFeatureUsage;\n  },\n  EVENT_NAME_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS: function () {\n    return EVENT_NAME_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS;\n  },\n  eventPackageUsedInGetServerSideProps: function () {\n    return eventPackageUsedInGetServerSideProps;\n  }\n});\nconst REGEXP_DIRECTORY_DUNDER = /[\\\\/]__[^\\\\/]+(?<![\\\\/]__(?:tests|mocks))__[\\\\/]/i;\nconst REGEXP_DIRECTORY_TESTS = /[\\\\/]__(tests|mocks)__[\\\\/]/i;\nconst REGEXP_FILE_TEST = /\\.(?:spec|test)\\.[^.]+$/i;\nconst EVENT_TYPE_CHECK_COMPLETED = \"NEXT_TYPE_CHECK_COMPLETED\";\nfunction eventTypeCheckCompleted(event) {\n  return {\n    eventName: EVENT_TYPE_CHECK_COMPLETED,\n    payload: event\n  };\n}\nconst EVENT_LINT_CHECK_COMPLETED = \"NEXT_LINT_CHECK_COMPLETED\";\nfunction eventLintCheckCompleted(event) {\n  return {\n    eventName: EVENT_LINT_CHECK_COMPLETED,\n    payload: event\n  };\n}\nconst EVENT_BUILD_COMPLETED = \"NEXT_BUILD_COMPLETED\";\nfunction eventBuildCompleted(pagePaths, event) {\n  return {\n    eventName: EVENT_BUILD_COMPLETED,\n    payload: {\n      ...event,\n      totalPageCount: pagePaths.length,\n      hasDunderPages: pagePaths.some(path => REGEXP_DIRECTORY_DUNDER.test(path)),\n      hasTestPages: pagePaths.some(path => REGEXP_DIRECTORY_TESTS.test(path) || REGEXP_FILE_TEST.test(path)),\n      totalAppPagesCount: event.totalAppPagesCount\n    }\n  };\n}\nconst EVENT_BUILD_OPTIMIZED = \"NEXT_BUILD_OPTIMIZED\";\nfunction eventBuildOptimize(pagePaths, event) {\n  return {\n    eventName: EVENT_BUILD_OPTIMIZED,\n    payload: {\n      ...event,\n      totalPageCount: pagePaths.length,\n      hasDunderPages: pagePaths.some(path => REGEXP_DIRECTORY_DUNDER.test(path)),\n      hasTestPages: pagePaths.some(path => REGEXP_DIRECTORY_TESTS.test(path) || REGEXP_FILE_TEST.test(path)),\n      totalAppPagesCount: event.totalAppPagesCount,\n      staticAppPagesCount: event.staticAppPagesCount,\n      serverAppPagesCount: event.serverAppPagesCount,\n      edgeRuntimeAppCount: event.edgeRuntimeAppCount,\n      edgeRuntimePagesCount: event.edgeRuntimePagesCount\n    }\n  };\n}\nconst EVENT_BUILD_FEATURE_USAGE = \"NEXT_BUILD_FEATURE_USAGE\";\nfunction eventBuildFeatureUsage(telemetryPlugin) {\n  return telemetryPlugin.usages().map(({\n    featureName,\n    invocationCount\n  }) => ({\n    eventName: EVENT_BUILD_FEATURE_USAGE,\n    payload: {\n      featureName,\n      invocationCount\n    }\n  }));\n}\nconst EVENT_NAME_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS = \"NEXT_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS\";\nfunction eventPackageUsedInGetServerSideProps(telemetryPlugin) {\n  return telemetryPlugin.packagesUsedInServerSideProps().map(packageName => ({\n    eventName: EVENT_NAME_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS,\n    payload: {\n      package: packageName\n    }\n  }));\n}","map":{"version":3,"names":["eventTypeCheckCompleted","eventLintCheckCompleted","eventBuildCompleted","eventBuildOptimize","EVENT_BUILD_FEATURE_USAGE","eventBuildFeatureUsage","EVENT_NAME_PACKAGE_USED_IN_GET_SERVER_SIDE_PROPS","eventPackageUsedInGetServerSideProps","REGEXP_DIRECTORY_DUNDER","REGEXP_DIRECTORY_TESTS","REGEXP_FILE_TEST","EVENT_TYPE_CHECK_COMPLETED","event","eventName","payload","EVENT_LINT_CHECK_COMPLETED","EVENT_BUILD_COMPLETED","pagePaths","totalPageCount","length","hasDunderPages","some","path","test","hasTestPages","totalAppPagesCount","EVENT_BUILD_OPTIMIZED","staticAppPagesCount","serverAppPagesCount","edgeRuntimeAppCount","edgeRuntimePagesCount","telemetryPlugin","usages","map","featureName","invocationCount","packagesUsedInServerSideProps","packageName","package"],"sources":["../../../src/telemetry/events/build.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;EAiBgBA,uBAAuB,WAAAA,CAAA;WAAvBA,uBAAA;;EAyBAC,uBAAuB,WAAAA,CAAA;WAAvBA,uBAAA;;EAmBAC,mBAAmB,WAAAA,CAAA;WAAnBA,mBAAA;;EAkDAC,kBAAkB,WAAAA,CAAA;WAAlBA,kBAAA;;EA4BHC,yBAAyB,WAAAA,CAAA;WAAzBA,yBAAA;;EAqCGC,sBAAsB,WAAAA,CAAA;WAAtBA,sBAAA;;EAYHC,gDAAgD,WAAAA,CAAA;WAAhDA,gDAAA;;EAOGC,oCAAoC,WAAAA,CAAA;WAApCA,oCAAA;;;AAhMhB,MAAMC,uBAAA,GACJ;AACF,MAAMC,sBAAA,GAAyB;AAC/B,MAAMC,gBAAA,GAAmB;AAEzB,MAAMC,0BAAA,GAA6B;AAS5B,SAASX,wBAAwBY,KAA8B;EAIpE,OAAO;IACLC,SAAA,EAAWF,0BAAA;IACXG,OAAA,EAASF;EACX;AACF;AAEA,MAAMG,0BAAA,GAA6B;AAe5B,SAASd,wBAAwBW,KAA8B;EAIpE,OAAO;IACLC,SAAA,EAAWE,0BAAA;IACXD,OAAA,EAASF;EACX;AACF;AAEA,MAAMI,qBAAA,GAAwB;AASvB,SAASd,oBACde,SAAmB,EACnBL,KAGC;EAED,OAAO;IACLC,SAAA,EAAWG,qBAAA;IACXF,OAAA,EAAS;MACP,GAAGF,KAAK;MACRM,cAAA,EAAgBD,SAAA,CAAUE,MAAM;MAChCC,cAAA,EAAgBH,SAAA,CAAUI,IAAI,CAAEC,IAAA,IAC9Bd,uBAAA,CAAwBe,IAAI,CAACD,IAAA;MAE/BE,YAAA,EAAcP,SAAA,CAAUI,IAAI,CACzBC,IAAA,IACCb,sBAAA,CAAuBc,IAAI,CAACD,IAAA,KAASZ,gBAAA,CAAiBa,IAAI,CAACD,IAAA;MAE/DG,kBAAA,EAAoBb,KAAA,CAAMa;IAC5B;EACF;AACF;AAEA,MAAMC,qBAAA,GAAwB;AA0BvB,SAASvB,mBACdc,SAAmB,EACnBL,KAGC;EAED,OAAO;IACLC,SAAA,EAAWa,qBAAA;IACXZ,OAAA,EAAS;MACP,GAAGF,KAAK;MACRM,cAAA,EAAgBD,SAAA,CAAUE,MAAM;MAChCC,cAAA,EAAgBH,SAAA,CAAUI,IAAI,CAAEC,IAAA,IAC9Bd,uBAAA,CAAwBe,IAAI,CAACD,IAAA;MAE/BE,YAAA,EAAcP,SAAA,CAAUI,IAAI,CACzBC,IAAA,IACCb,sBAAA,CAAuBc,IAAI,CAACD,IAAA,KAASZ,gBAAA,CAAiBa,IAAI,CAACD,IAAA;MAE/DG,kBAAA,EAAoBb,KAAA,CAAMa,kBAAkB;MAC5CE,mBAAA,EAAqBf,KAAA,CAAMe,mBAAmB;MAC9CC,mBAAA,EAAqBhB,KAAA,CAAMgB,mBAAmB;MAC9CC,mBAAA,EAAqBjB,KAAA,CAAMiB,mBAAmB;MAC9CC,qBAAA,EAAuBlB,KAAA,CAAMkB;IAC/B;EACF;AACF;AAEO,MAAM1B,yBAAA,GAA4B;AAqClC,SAASC,uBACd0B,eAAgC;EAEhC,OAAOA,eAAA,CAAgBC,MAAM,GAAGC,GAAG,CAAC,CAAC;IAAEC,WAAW;IAAEC;EAAe,CAAE,MAAM;IACzEtB,SAAA,EAAWT,yBAAA;IACXU,OAAA,EAAS;MACPoB,WAAA;MACAC;IACF;EACF;AACF;AAEO,MAAM7B,gDAAA,GACX;AAMK,SAASC,qCACdwB,eAAgC;EAEhC,OAAOA,eAAA,CAAgBK,6BAA6B,GAAGH,GAAG,CAAEI,WAAA,KAAiB;IAC3ExB,SAAA,EAAWP,gDAAA;IACXQ,OAAA,EAAS;MACPwB,OAAA,EAASD;IACX;EACF;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}