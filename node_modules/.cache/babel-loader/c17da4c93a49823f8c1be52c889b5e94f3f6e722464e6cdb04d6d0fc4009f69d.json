{"ast":null,"code":"\"use strict\";\n\nconst privateCpuProfileName = process.env.__NEXT_PRIVATE_CPU_PROFILE;\nconst isCpuProfileEnabled = process.env.NEXT_CPU_PROF || privateCpuProfileName;\nif (isCpuProfileEnabled) {\n  const {\n    Session\n  } = require(\"inspector\");\n  const fs = require(\"fs\");\n  const session = new Session();\n  session.connect();\n  session.post(\"Profiler.enable\");\n  session.post(\"Profiler.start\");\n  function saveProfile() {\n    session.post(\"Profiler.stop\", (error, param) => {\n      if (error) {\n        console.error(\"Cannot generate CPU profiling:\", error);\n        return;\n      }\n      // Write profile to disk\n      const filename = `${privateCpuProfileName || \"CPU.main\"}.${Date.now()}.cpuprofile`;\n      fs.writeFileSync(`./${filename}`, JSON.stringify(param.profile));\n      process.exit(0);\n    });\n  }\n  process.on(\"SIGINT\", saveProfile);\n  process.on(\"SIGTERM\", saveProfile);\n  process.on(\"exit\", saveProfile);\n}","map":{"version":3,"names":["privateCpuProfileName","process","env","__NEXT_PRIVATE_CPU_PROFILE","isCpuProfileEnabled","NEXT_CPU_PROF","Session","require","fs","session","connect","post","saveProfile","error","param","console","filename","Date","now","writeFileSync","JSON","stringify","profile","exit","on"],"sources":["../../../src/server/lib/cpu-profile.ts"],"sourcesContent":[null],"mappings":";;AAAA,MAAMA,qBAAA,GAAwBC,OAAA,CAAQC,GAAG,CAACC,0BAA0B;AACpE,MAAMC,mBAAA,GAAsBH,OAAA,CAAQC,GAAG,CAACG,aAAa,IAAIL,qBAAA;AAEzD,IAAII,mBAAA,EAAqB;EACvB,MAAM;IAAEE;EAAO,CAAE,GAAGC,OAAA,CAAQ;EAC5B,MAAMC,EAAA,GAAKD,OAAA,CAAQ;EAEnB,MAAME,OAAA,GAAU,IAAIH,OAAA;EACpBG,OAAA,CAAQC,OAAO;EAEfD,OAAA,CAAQE,IAAI,CAAC;EACbF,OAAA,CAAQE,IAAI,CAAC;EAEb,SAASC,YAAA;IACPH,OAAA,CAAQE,IAAI,CAAC,iBAAiB,CAACE,KAAA,EAAOC,KAAA;MACpC,IAAID,KAAA,EAAO;QACTE,OAAA,CAAQF,KAAK,CAAC,kCAAkCA,KAAA;QAChD;MACF;MAEA;MACA,MAAMG,QAAA,GAAY,GAChBhB,qBAAA,IAAyB,UAC1B,IAAGiB,IAAA,CAAKC,GAAG,EAAG,aAAY;MAC3BV,EAAA,CAAGW,aAAa,CAAE,KAAIH,QAAS,EAAC,EAAEI,IAAA,CAAKC,SAAS,CAACP,KAAA,CAAMQ,OAAO;MAC9DrB,OAAA,CAAQsB,IAAI,CAAC;IACf;EACF;EACAtB,OAAA,CAAQuB,EAAE,CAAC,UAAUZ,WAAA;EACrBX,OAAA,CAAQuB,EAAE,CAAC,WAAWZ,WAAA;EACtBX,OAAA,CAAQuB,EAAE,CAAC,QAAQZ,WAAA;AACrB"},"metadata":{},"sourceType":"script","externalDependencies":[]}