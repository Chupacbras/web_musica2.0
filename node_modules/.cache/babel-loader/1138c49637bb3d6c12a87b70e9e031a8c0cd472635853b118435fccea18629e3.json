{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  adaptForAppRouterInstance: null,\n  adaptForSearchParams: null,\n  adaptForPathParams: null,\n  PathnameContextProviderAdapter: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  adaptForAppRouterInstance: function () {\n    return adaptForAppRouterInstance;\n  },\n  adaptForSearchParams: function () {\n    return adaptForSearchParams;\n  },\n  adaptForPathParams: function () {\n    return adaptForPathParams;\n  },\n  PathnameContextProviderAdapter: function () {\n    return PathnameContextProviderAdapter;\n  }\n});\nconst _interop_require_wildcard = require(\"@swc/helpers/_/_interop_require_wildcard\");\nconst _react = /*#__PURE__*/_interop_require_wildcard._(require(\"react\"));\nconst _hooksclientcontextsharedruntime = require(\"../hooks-client-context.shared-runtime\");\nconst _utils = require(\"./utils\");\nconst _aspathtosearchparams = require(\"./utils/as-path-to-search-params\");\nconst _routeregex = require(\"./utils/route-regex\");\nfunction adaptForAppRouterInstance(router) {\n  return {\n    back() {\n      router.back();\n    },\n    forward() {\n      router.forward();\n    },\n    refresh() {\n      router.reload();\n    },\n    push(href, param) {\n      let {\n        scroll\n      } = param === void 0 ? {} : param;\n      void router.push(href, undefined, {\n        scroll\n      });\n    },\n    replace(href, param) {\n      let {\n        scroll\n      } = param === void 0 ? {} : param;\n      void router.replace(href, undefined, {\n        scroll\n      });\n    },\n    prefetch(href) {\n      void router.prefetch(href);\n    }\n  };\n}\nfunction adaptForSearchParams(router) {\n  if (!router.isReady || !router.query) {\n    return new URLSearchParams();\n  }\n  return (0, _aspathtosearchparams.asPathToSearchParams)(router.asPath);\n}\nfunction adaptForPathParams(router) {\n  if (!router.isReady || !router.query) {\n    return null;\n  }\n  const pathParams = {};\n  const routeRegex = (0, _routeregex.getRouteRegex)(router.pathname);\n  const keys = Object.keys(routeRegex.groups);\n  for (const key of keys) {\n    pathParams[key] = router.query[key];\n  }\n  return pathParams;\n}\nfunction PathnameContextProviderAdapter(param) {\n  let {\n    children,\n    router,\n    ...props\n  } = param;\n  const ref = (0, _react.useRef)(props.isAutoExport);\n  const value = (0, _react.useMemo)(() => {\n    // isAutoExport is only ever `true` on the first render from the server,\n    // so reset it to `false` after we read it for the first time as `true`. If\n    // we don't use the value, then we don't need it.\n    const isAutoExport = ref.current;\n    if (isAutoExport) {\n      ref.current = false;\n    }\n    // When the route is a dynamic route, we need to do more processing to\n    // determine if we need to stop showing the pathname.\n    if ((0, _utils.isDynamicRoute)(router.pathname)) {\n      // When the router is rendering the fallback page, it can't possibly know\n      // the path, so return `null` here. Read more about fallback pages over\n      // at:\n      // https://nextjs.org/docs/api-reference/data-fetching/get-static-paths#fallback-pages\n      if (router.isFallback) {\n        return null;\n      }\n      // When `isAutoExport` is true, meaning this is a page page has been\n      // automatically statically optimized, and the router is not ready, then\n      // we can't know the pathname yet. Read more about automatic static\n      // optimization at:\n      // https://nextjs.org/docs/advanced-features/automatic-static-optimization\n      if (isAutoExport && !router.isReady) {\n        return null;\n      }\n    }\n    // The `router.asPath` contains the pathname seen by the browser (including\n    // any query strings), so it should have that stripped. Read more about the\n    // `asPath` option over at:\n    // https://nextjs.org/docs/api-reference/next/router#router-object\n    let url;\n    try {\n      url = new URL(router.asPath, \"http://f\");\n    } catch (_) {\n      // fallback to / for invalid asPath values e.g. //\n      return \"/\";\n    }\n    return url.pathname;\n  }, [router.asPath, router.isFallback, router.isReady, router.pathname]);\n  return /*#__PURE__*/_react.default.createElement(_hooksclientcontextsharedruntime.PathnameContext.Provider, {\n    value: value\n  }, children);\n}","map":{"version":3,"names":["adaptForAppRouterInstance","adaptForSearchParams","adaptForPathParams","PathnameContextProviderAdapter","router","back","forward","refresh","reload","push","href","param","scroll","undefined","replace","prefetch","isReady","query","URLSearchParams","_aspathtosearchparams","asPathToSearchParams","asPath","pathParams","routeRegex","_routeregex","getRouteRegex","pathname","keys","Object","groups","key","children","props","ref","_react","useRef","isAutoExport","value","useMemo","current","_utils","isDynamicRoute","isFallback","url","URL","_","default","createElement","_hooksclientcontextsharedruntime","PathnameContext","Provider"],"sources":["../../../../src/shared/lib/router/adapters.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}