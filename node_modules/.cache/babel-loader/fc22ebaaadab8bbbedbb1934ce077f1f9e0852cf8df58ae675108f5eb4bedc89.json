{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  ExportError: null,\n  default: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  ExportError: function () {\n    return ExportError;\n  },\n  default: function () {\n    return exportApp;\n  }\n});\nconst _chalk = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/chalk\"));\nconst _findup = /*#__PURE__*/_interop_require_default(require(\"next/dist/compiled/find-up\"));\nconst _fs = require(\"fs\");\nrequire(\"../server/require-hook\");\nconst _worker = require(\"../lib/worker\");\nconst _path = require(\"path\");\nconst _util = require(\"util\");\nconst _index = require(\"../build/output/index\");\nconst _log = /*#__PURE__*/_interop_require_wildcard(require(\"../build/output/log\"));\nconst _spinner = /*#__PURE__*/_interop_require_default(require(\"../build/spinner\"));\nconst _constants = require(\"../lib/constants\");\nconst _recursivecopy = require(\"../lib/recursive-copy\");\nconst _constants1 = require(\"../shared/lib/constants\");\nconst _config = /*#__PURE__*/_interop_require_default(require(\"../server/config\"));\nconst _events = require(\"../telemetry/events\");\nconst _ciinfo = require(\"../telemetry/ci-info\");\nconst _storage = require(\"../telemetry/storage\");\nconst _normalizepagepath = require(\"../shared/lib/page-path/normalize-page-path\");\nconst _denormalizepagepath = require(\"../shared/lib/page-path/denormalize-page-path\");\nconst _env = require(\"@next/env\");\nconst _isapiroute = require(\"../lib/is-api-route\");\nconst _require = require(\"../server/require\");\nconst _isapprouteroute = require(\"../lib/is-app-route-route\");\nconst _isapppageroute = require(\"../lib/is-app-page-route\");\nconst _iserror = /*#__PURE__*/_interop_require_default(require(\"../lib/is-error\"));\nconst _needsexperimentalreact = require(\"../lib/needs-experimental-react\");\nfunction _interop_require_default(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function (nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\nfunction _interop_require_wildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n  var cache = _getRequireWildcardCache(nodeInterop);\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n  newObj.default = obj;\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n  return newObj;\n}\nconst exists = (0, _util.promisify)(_fs.exists);\nfunction divideSegments(number, segments) {\n  const result = [];\n  while (number > 0 && segments > 0) {\n    const dividedNumber = number < segments ? number : Math.floor(number / segments);\n    number -= dividedNumber;\n    segments--;\n    result.push(dividedNumber);\n  }\n  return result;\n}\nconst createProgress = (total, label) => {\n  const segments = divideSegments(total, 4);\n  if (total === 0) {\n    throw new Error(\"invariant: progress total can not be zero\");\n  }\n  let currentSegmentTotal = segments.shift();\n  let currentSegmentCount = 0;\n  let lastProgressOutput = Date.now();\n  let curProgress = 0;\n  let progressSpinner = (0, _spinner.default)(`${label} (${curProgress}/${total})`, {\n    spinner: {\n      frames: [\"[    ]\", \"[=   ]\", \"[==  ]\", \"[=== ]\", \"[ ===]\", \"[  ==]\", \"[   =]\", \"[    ]\", \"[   =]\", \"[  ==]\", \"[ ===]\", \"[====]\", \"[=== ]\", \"[==  ]\", \"[=   ]\"],\n      interval: 200\n    }\n  });\n  return () => {\n    curProgress++;\n    // Make sure we only log once\n    // - per fully generated segment, or\n    // - per minute\n    // when not showing the spinner\n    if (!progressSpinner) {\n      currentSegmentCount++;\n      if (currentSegmentCount === currentSegmentTotal) {\n        currentSegmentTotal = segments.shift();\n        currentSegmentCount = 0;\n      } else if (lastProgressOutput + 60000 > Date.now()) {\n        return;\n      }\n      lastProgressOutput = Date.now();\n    }\n    const isFinished = curProgress === total;\n    // Use \\r to reset current line with spinner.\n    // If it's 100% progressed, then we don't need to break a new line to avoid logging from routes while building.\n    const newText = `\\r ${isFinished ? _log.prefixes.event : _log.prefixes.info} ${label} (${curProgress}/${total}) ${isFinished ? \"\" : process.stdout.isTTY ? \"\\n\" : \"\\r\"}`;\n    if (progressSpinner) {\n      progressSpinner.text = newText;\n    } else {\n      console.log(newText);\n    }\n    if (isFinished && progressSpinner) {\n      progressSpinner.stop();\n      console.log(newText);\n    }\n  };\n};\nclass ExportError extends Error {\n  constructor(...args) {\n    super(...args);\n    this.code = \"NEXT_EXPORT_ERROR\";\n  }\n}\nasync function exportApp(dir, options, span) {\n  const nextExportSpan = span.traceChild(\"next-export\");\n  return nextExportSpan.traceAsyncFn(async () => {\n    var _nextConfig_amp, _nextConfig_experimental_amp, _nextConfig_experimental_amp1;\n    dir = (0, _path.resolve)(dir);\n    // attempt to load global env values so they are available in next.config.js\n    nextExportSpan.traceChild(\"load-dotenv\").traceFn(() => (0, _env.loadEnvConfig)(dir, false, _log));\n    const nextConfig = options.nextConfig || (await nextExportSpan.traceChild(\"load-next-config\").traceAsyncFn(() => (0, _config.default)(_constants1.PHASE_EXPORT, dir)));\n    const threads = options.threads || nextConfig.experimental.cpus;\n    const distDir = (0, _path.join)(dir, nextConfig.distDir);\n    const isExportOutput = nextConfig.output === \"export\";\n    // Running 'next export'\n    if (options.isInvokedFromCli) {\n      if (isExportOutput) {\n        if (options.hasOutdirFromCli) {\n          throw new ExportError('\"next export -o <dir>\" cannot be used when \"output: export\" is configured in next.config.js. Instead add \"distDir\" in next.config.js https://nextjs.org/docs/advanced-features/static-html-export');\n        }\n        _log.warn('\"next export\" is no longer needed when \"output: export\" is configured in next.config.js https://nextjs.org/docs/advanced-features/static-html-export');\n        return;\n      }\n      if ((0, _fs.existsSync)((0, _path.join)(distDir, \"server\", \"app\"))) {\n        throw new ExportError('\"next export\" does not work with App Router. Please use \"output: export\" in next.config.js https://nextjs.org/docs/advanced-features/static-html-export');\n      }\n      _log.warn('\"next export\" is deprecated in favor of \"output: export\" in next.config.js https://nextjs.org/docs/advanced-features/static-html-export');\n    }\n    // Running 'next export' or output is set to 'export'\n    if (options.isInvokedFromCli || isExportOutput) {\n      if (nextConfig.experimental.serverActions) {\n        throw new ExportError(`Server Actions are not supported with static export.`);\n      }\n    }\n    const telemetry = options.buildExport ? null : new _storage.Telemetry({\n      distDir\n    });\n    if (telemetry) {\n      telemetry.record((0, _events.eventCliSession)(distDir, nextConfig, {\n        webpackVersion: null,\n        cliCommand: \"export\",\n        isSrcDir: null,\n        hasNowJson: !!(await (0, _findup.default)(\"now.json\", {\n          cwd: dir\n        })),\n        isCustomServer: null,\n        turboFlag: false,\n        pagesDir: null,\n        appDir: null\n      }));\n    }\n    const subFolders = nextConfig.trailingSlash && !options.buildExport;\n    if (!options.silent && !options.buildExport) {\n      _log.info(`using build directory: ${distDir}`);\n    }\n    const buildIdFile = (0, _path.join)(distDir, _constants1.BUILD_ID_FILE);\n    if (!(0, _fs.existsSync)(buildIdFile)) {\n      throw new ExportError(`Could not find a production build in the '${distDir}' directory. Try building your app with 'next build' before starting the static export. https://nextjs.org/docs/messages/next-export-no-build-id`);\n    }\n    const customRoutesDetected = [\"rewrites\", \"redirects\", \"headers\"].filter(config => typeof nextConfig[config] === \"function\");\n    if (!_ciinfo.hasNextSupport && !options.buildExport && customRoutesDetected.length > 0) {\n      _log.warn(`rewrites, redirects, and headers are not applied when exporting your application, detected (${customRoutesDetected.join(\", \")}). See more info here: https://nextjs.org/docs/messages/export-no-custom-routes`);\n    }\n    const buildId = (0, _fs.readFileSync)(buildIdFile, \"utf8\");\n    const pagesManifest = !options.pages && require((0, _path.join)(distDir, _constants1.SERVER_DIRECTORY, _constants1.PAGES_MANIFEST));\n    let prerenderManifest = undefined;\n    try {\n      prerenderManifest = require((0, _path.join)(distDir, _constants1.PRERENDER_MANIFEST));\n    } catch {}\n    let appRoutePathManifest = undefined;\n    try {\n      appRoutePathManifest = require((0, _path.join)(distDir, _constants1.APP_PATH_ROUTES_MANIFEST));\n    } catch (err) {\n      if ((0, _iserror.default)(err) && (err.code === \"ENOENT\" || err.code === \"MODULE_NOT_FOUND\")) {\n        // the manifest doesn't exist which will happen when using\n        // \"pages\" dir instead of \"app\" dir.\n        appRoutePathManifest = undefined;\n      } else {\n        // the manifest is malformed (invalid json)\n        throw err;\n      }\n    }\n    const excludedPrerenderRoutes = new Set();\n    const pages = options.pages || Object.keys(pagesManifest);\n    const defaultPathMap = {};\n    let hasApiRoutes = false;\n    for (const page of pages) {\n      // _document and _app are not real pages\n      // _error is exported as 404.html later on\n      // API Routes are Node.js functions\n      if ((0, _isapiroute.isAPIRoute)(page)) {\n        hasApiRoutes = true;\n        continue;\n      }\n      if (page === \"/_document\" || page === \"/_app\" || page === \"/_error\") {\n        continue;\n      }\n      // iSSG pages that are dynamic should not export templated version by\n      // default. In most cases, this would never work. There is no server that\n      // could run `getStaticProps`. If users make their page work lazily, they\n      // can manually add it to the `exportPathMap`.\n      if (prerenderManifest == null ? void 0 : prerenderManifest.dynamicRoutes[page]) {\n        excludedPrerenderRoutes.add(page);\n        continue;\n      }\n      defaultPathMap[page] = {\n        page\n      };\n    }\n    const mapAppRouteToPage = new Map();\n    if (!options.buildExport && appRoutePathManifest) {\n      for (const [pageName, routePath] of Object.entries(appRoutePathManifest)) {\n        mapAppRouteToPage.set(routePath, pageName);\n        if ((0, _isapppageroute.isAppPageRoute)(pageName) && !(prerenderManifest == null ? void 0 : prerenderManifest.routes[routePath]) && !(prerenderManifest == null ? void 0 : prerenderManifest.dynamicRoutes[routePath])) {\n          defaultPathMap[routePath] = {\n            page: pageName,\n            _isAppDir: true\n          };\n        }\n      }\n    }\n    // Initialize the output directory\n    const outDir = options.outdir;\n    if (outDir === (0, _path.join)(dir, \"public\")) {\n      throw new ExportError(`The 'public' directory is reserved in Next.js and can not be used as the export out directory. https://nextjs.org/docs/messages/can-not-output-to-public`);\n    }\n    if (outDir === (0, _path.join)(dir, \"static\")) {\n      throw new ExportError(`The 'static' directory is reserved in Next.js and can not be used as the export out directory. https://nextjs.org/docs/messages/can-not-output-to-static`);\n    }\n    await _fs.promises.rm(outDir, {\n      recursive: true,\n      force: true\n    });\n    await _fs.promises.mkdir((0, _path.join)(outDir, \"_next\", buildId), {\n      recursive: true\n    });\n    (0, _fs.writeFileSync)((0, _path.join)(distDir, _constants1.EXPORT_DETAIL), JSON.stringify({\n      version: 1,\n      outDirectory: outDir,\n      success: false\n    }), \"utf8\");\n    // Copy static directory\n    if (!options.buildExport && (0, _fs.existsSync)((0, _path.join)(dir, \"static\"))) {\n      if (!options.silent) {\n        _log.info('Copying \"static\" directory');\n      }\n      await nextExportSpan.traceChild(\"copy-static-directory\").traceAsyncFn(() => (0, _recursivecopy.recursiveCopy)((0, _path.join)(dir, \"static\"), (0, _path.join)(outDir, \"static\")));\n    }\n    // Copy .next/static directory\n    if (!options.buildExport && (0, _fs.existsSync)((0, _path.join)(distDir, _constants1.CLIENT_STATIC_FILES_PATH))) {\n      if (!options.silent) {\n        _log.info('Copying \"static build\" directory');\n      }\n      await nextExportSpan.traceChild(\"copy-next-static-directory\").traceAsyncFn(() => (0, _recursivecopy.recursiveCopy)((0, _path.join)(distDir, _constants1.CLIENT_STATIC_FILES_PATH), (0, _path.join)(outDir, \"_next\", _constants1.CLIENT_STATIC_FILES_PATH)));\n    }\n    // Get the exportPathMap from the config file\n    if (typeof nextConfig.exportPathMap !== \"function\") {\n      nextConfig.exportPathMap = async defaultMap => {\n        return defaultMap;\n      };\n    }\n    const {\n      i18n,\n      images: {\n        loader = \"default\",\n        unoptimized\n      }\n    } = nextConfig;\n    if (i18n && !options.buildExport) {\n      throw new ExportError(`i18n support is not compatible with next export. See here for more info on deploying: https://nextjs.org/docs/messages/export-no-custom-routes`);\n    }\n    if (!options.buildExport) {\n      const {\n        isNextImageImported\n      } = await nextExportSpan.traceChild(\"is-next-image-imported\").traceAsyncFn(() => _fs.promises.readFile((0, _path.join)(distDir, _constants1.EXPORT_MARKER), \"utf8\").then(text => JSON.parse(text)).catch(() => ({})));\n      if (isNextImageImported && loader === \"default\" && !unoptimized && !_ciinfo.hasNextSupport) {\n        throw new ExportError(`Image Optimization using the default loader is not compatible with export.\n  Possible solutions:\n    - Use \\`next start\\` to run a server, which includes the Image Optimization API.\n    - Configure \\`images.unoptimized = true\\` in \\`next.config.js\\` to disable the Image Optimization API.\n  Read more: https://nextjs.org/docs/messages/export-image-api`);\n      }\n    }\n    // Start the rendering process\n    const renderOpts = {\n      previewProps: prerenderManifest == null ? void 0 : prerenderManifest.preview,\n      buildId,\n      nextExport: true,\n      assetPrefix: nextConfig.assetPrefix.replace(/\\/$/, \"\"),\n      distDir,\n      dev: false,\n      basePath: nextConfig.basePath,\n      canonicalBase: ((_nextConfig_amp = nextConfig.amp) == null ? void 0 : _nextConfig_amp.canonicalBase) || \"\",\n      ampSkipValidation: ((_nextConfig_experimental_amp = nextConfig.experimental.amp) == null ? void 0 : _nextConfig_experimental_amp.skipValidation) || false,\n      ampOptimizerConfig: ((_nextConfig_experimental_amp1 = nextConfig.experimental.amp) == null ? void 0 : _nextConfig_experimental_amp1.optimizer) || undefined,\n      locales: i18n == null ? void 0 : i18n.locales,\n      locale: i18n == null ? void 0 : i18n.defaultLocale,\n      defaultLocale: i18n == null ? void 0 : i18n.defaultLocale,\n      domainLocales: i18n == null ? void 0 : i18n.domains,\n      disableOptimizedLoading: nextConfig.experimental.disableOptimizedLoading,\n      // Exported pages do not currently support dynamic HTML.\n      supportsDynamicHTML: false,\n      crossOrigin: nextConfig.crossOrigin || \"\",\n      optimizeCss: nextConfig.experimental.optimizeCss,\n      nextConfigOutput: nextConfig.output,\n      nextScriptWorkers: nextConfig.experimental.nextScriptWorkers,\n      optimizeFonts: nextConfig.optimizeFonts,\n      largePageDataBytes: nextConfig.experimental.largePageDataBytes,\n      serverComponents: options.hasAppDir,\n      serverActionsBodySizeLimit: nextConfig.experimental.serverActionsBodySizeLimit,\n      nextFontManifest: require((0, _path.join)(distDir, \"server\", `${_constants1.NEXT_FONT_MANIFEST}.json`)),\n      images: nextConfig.images,\n      ...(options.hasAppDir ? {\n        serverActionsManifest: require((0, _path.join)(distDir, _constants1.SERVER_DIRECTORY, _constants1.SERVER_REFERENCE_MANIFEST + \".json\"))\n      } : {}),\n      strictNextHead: !!nextConfig.experimental.strictNextHead,\n      deploymentId: nextConfig.experimental.deploymentId\n    };\n    const {\n      serverRuntimeConfig,\n      publicRuntimeConfig\n    } = nextConfig;\n    if (Object.keys(publicRuntimeConfig).length > 0) {\n      renderOpts.runtimeConfig = publicRuntimeConfig;\n    }\n    globalThis.__NEXT_DATA__ = {\n      nextExport: true\n    };\n    if (!options.silent && !options.buildExport) {\n      _log.info(`Launching ${threads} workers`);\n    }\n    const exportPathMap = await nextExportSpan.traceChild(\"run-export-path-map\").traceAsyncFn(async () => {\n      const exportMap = await nextConfig.exportPathMap(defaultPathMap, {\n        dev: false,\n        dir,\n        outDir,\n        distDir,\n        buildId\n      });\n      return exportMap;\n    });\n    // only add missing 404 page when `buildExport` is false\n    if (!options.buildExport) {\n      // only add missing /404 if not specified in `exportPathMap`\n      if (!exportPathMap[\"/404\"]) {\n        exportPathMap[\"/404\"] = {\n          page: \"/_error\"\n        };\n      }\n      /**\n      * exports 404.html for backwards compat\n      * E.g. GitHub Pages, GitLab Pages, Cloudflare Pages, Netlify\n      */\n      if (!exportPathMap[\"/404.html\"]) {\n        // alias /404.html to /404 to be compatible with custom 404 / _error page\n        exportPathMap[\"/404.html\"] = exportPathMap[\"/404\"];\n      }\n    }\n    // make sure to prevent duplicates\n    const exportPaths = [...new Set(Object.keys(exportPathMap).map(path => (0, _denormalizepagepath.denormalizePagePath)((0, _normalizepagepath.normalizePagePath)(path))))];\n    const filteredPaths = exportPaths.filter(\n    // Remove API routes\n    route => exportPathMap[route]._isAppDir || !(0, _isapiroute.isAPIRoute)(exportPathMap[route].page));\n    if (filteredPaths.length !== exportPaths.length) {\n      hasApiRoutes = true;\n    }\n    if (filteredPaths.length === 0) {\n      return;\n    }\n    if (prerenderManifest && !options.buildExport) {\n      const fallbackEnabledPages = new Set();\n      for (const path of Object.keys(exportPathMap)) {\n        const page = exportPathMap[path].page;\n        const prerenderInfo = prerenderManifest.dynamicRoutes[page];\n        if (prerenderInfo && prerenderInfo.fallback !== false) {\n          fallbackEnabledPages.add(page);\n        }\n      }\n      if (fallbackEnabledPages.size) {\n        throw new ExportError(`Found pages with \\`fallback\\` enabled:\\n${[...fallbackEnabledPages].join(\"\\n\")}\\n${_constants.SSG_FALLBACK_EXPORT_ERROR}\\n`);\n      }\n    }\n    let hasMiddleware = false;\n    if (!options.buildExport) {\n      try {\n        const middlewareManifest = require((0, _path.join)(distDir, _constants1.SERVER_DIRECTORY, _constants1.MIDDLEWARE_MANIFEST));\n        hasMiddleware = Object.keys(middlewareManifest.middleware).length > 0;\n      } catch {}\n      // Warn if the user defines a path for an API page\n      if (hasApiRoutes || hasMiddleware) {\n        if (!options.silent) {\n          _log.warn(_chalk.default.yellow(`Statically exporting a Next.js application via \\`next export\\` disables API routes and middleware.`) + `\\n` + _chalk.default.yellow(`This command is meant for static-only hosts, and is` + \" \" + _chalk.default.bold(`not necessary to make your application static.`)) + `\\n` + _chalk.default.yellow(`Pages in your application without server-side data dependencies will be automatically statically exported by \\`next build\\`, including pages powered by \\`getStaticProps\\`.`) + `\\n` + _chalk.default.yellow(`Learn more: https://nextjs.org/docs/messages/api-routes-static-export`));\n        }\n      }\n    }\n    const progress = !options.silent && createProgress(filteredPaths.length, `${options.statusMessage || \"Exporting\"}`);\n    const pagesDataDir = options.buildExport ? outDir : (0, _path.join)(outDir, \"_next/data\", buildId);\n    const ampValidations = {};\n    let hadValidationError = false;\n    const publicDir = (0, _path.join)(dir, _constants1.CLIENT_PUBLIC_FILES_PATH);\n    // Copy public directory\n    if (!options.buildExport && (0, _fs.existsSync)(publicDir)) {\n      if (!options.silent) {\n        _log.info('Copying \"public\" directory');\n      }\n      await nextExportSpan.traceChild(\"copy-public-directory\").traceAsyncFn(() => (0, _recursivecopy.recursiveCopy)(publicDir, outDir, {\n        filter(path) {\n          // Exclude paths used by pages\n          return !exportPathMap[path];\n        }\n      }));\n    }\n    const timeout = (nextConfig == null ? void 0 : nextConfig.staticPageGenerationTimeout) || 0;\n    let infoPrinted = false;\n    let exportPage;\n    let exportAppPage;\n    let endWorker;\n    if (options.exportPageWorker) {\n      exportPage = options.exportPageWorker;\n      exportAppPage = options.exportAppPageWorker;\n      endWorker = options.endWorker || (() => Promise.resolve());\n    } else {\n      const worker = new _worker.Worker(require.resolve(\"./worker\"), {\n        timeout: timeout * 1000,\n        onRestart: (_method, [{\n          path\n        }], attempts) => {\n          if (attempts >= 3) {\n            throw new ExportError(`Static page generation for ${path} is still timing out after 3 attempts. See more info here https://nextjs.org/docs/messages/static-page-generation-timeout`);\n          }\n          _log.warn(`Restarted static page generation for ${path} because it took more than ${timeout} seconds`);\n          if (!infoPrinted) {\n            _log.warn(\"See more info here https://nextjs.org/docs/messages/static-page-generation-timeout\");\n            infoPrinted = true;\n          }\n        },\n        maxRetries: 0,\n        numWorkers: threads,\n        enableWorkerThreads: nextConfig.experimental.workerThreads,\n        exposedMethods: [\"default\"]\n      });\n      exportPage = worker.default.bind(worker);\n      endWorker = async () => {\n        await worker.end();\n      };\n    }\n    let renderError = false;\n    const errorPaths = [];\n    await Promise.all(filteredPaths.map(async path => {\n      const pageExportSpan = nextExportSpan.traceChild(\"export-page\");\n      pageExportSpan.setAttribute(\"path\", path);\n      return pageExportSpan.traceAsyncFn(async () => {\n        var _nextConfig_experimental_amp;\n        const pathMap = exportPathMap[path];\n        const exportPageOrApp = pathMap._isAppDir ? exportAppPage : exportPage;\n        if (!exportPageOrApp) {\n          throw new Error(\"invariant: Undefined export worker for app dir, this is a bug in Next.js.\");\n        }\n        const result = await exportPageOrApp({\n          path,\n          pathMap,\n          distDir,\n          outDir,\n          pagesDataDir,\n          renderOpts,\n          ampValidatorPath: ((_nextConfig_experimental_amp = nextConfig.experimental.amp) == null ? void 0 : _nextConfig_experimental_amp.validator) || undefined,\n          trailingSlash: nextConfig.trailingSlash,\n          serverRuntimeConfig,\n          subFolders,\n          buildExport: options.buildExport,\n          optimizeFonts: nextConfig.optimizeFonts,\n          optimizeCss: nextConfig.experimental.optimizeCss,\n          disableOptimizedLoading: nextConfig.experimental.disableOptimizedLoading,\n          parentSpanId: pageExportSpan.id,\n          httpAgentOptions: nextConfig.httpAgentOptions,\n          debugOutput: options.debugOutput,\n          isrMemoryCacheSize: nextConfig.experimental.isrMemoryCacheSize,\n          fetchCache: true,\n          fetchCacheKeyPrefix: nextConfig.experimental.fetchCacheKeyPrefix,\n          incrementalCacheHandlerPath: nextConfig.experimental.incrementalCacheHandlerPath,\n          enableExperimentalReact: (0, _needsexperimentalreact.needsExperimentalReact)(nextConfig)\n        });\n        if (result.ampValidations) {\n          for (const validation of result.ampValidations) {\n            const {\n              page,\n              result: ampValidationResult\n            } = validation;\n            ampValidations[page] = ampValidationResult;\n            hadValidationError = hadValidationError || Array.isArray(ampValidationResult == null ? void 0 : ampValidationResult.errors) && ampValidationResult.errors.length > 0;\n          }\n        }\n        renderError = renderError || !!result.error;\n        if (!!result.error) {\n          const {\n            page\n          } = pathMap;\n          errorPaths.push(page !== path ? `${page}: ${path}` : path);\n        }\n        if (options.buildExport) {\n          if (typeof result.fromBuildExportRevalidate !== \"undefined\") {\n            nextConfig.initialPageRevalidationMap[path] = result.fromBuildExportRevalidate;\n          }\n          if (typeof result.fromBuildExportMeta !== \"undefined\") {\n            nextConfig.initialPageMetaMap[path] = result.fromBuildExportMeta;\n          }\n          if (result.ssgNotFound === true) {\n            nextConfig.ssgNotFoundPaths.push(path);\n          }\n          const durations = nextConfig.pageDurationMap[pathMap.page] = nextConfig.pageDurationMap[pathMap.page] || {};\n          durations[path] = result.duration;\n        }\n        if (progress) progress();\n      });\n    }));\n    const endWorkerPromise = endWorker();\n    // copy prerendered routes to outDir\n    if (!options.buildExport && prerenderManifest) {\n      await Promise.all(Object.keys(prerenderManifest.routes).map(async route => {\n        const {\n          srcRoute\n        } = prerenderManifest.routes[route];\n        const appPageName = mapAppRouteToPage.get(srcRoute || \"\");\n        const pageName = appPageName || srcRoute || route;\n        const isAppPath = Boolean(appPageName);\n        const isAppRouteHandler = appPageName && (0, _isapprouteroute.isAppRouteRoute)(appPageName);\n        // returning notFound: true from getStaticProps will not\n        // output html/json files during the build\n        if (prerenderManifest.notFoundRoutes.includes(route)) {\n          return;\n        }\n        route = (0, _normalizepagepath.normalizePagePath)(route);\n        const pagePath = (0, _require.getPagePath)(pageName, distDir, undefined, isAppPath);\n        const distPagesDir = (0, _path.join)(pagePath,\n        // strip leading / and then recurse number of nested dirs\n        // to place from base folder\n        pageName.slice(1).split(\"/\").map(() => \"..\").join(\"/\"));\n        const orig = (0, _path.join)(distPagesDir, route);\n        const handlerSrc = `${orig}.body`;\n        const handlerDest = (0, _path.join)(outDir, route);\n        if (isAppRouteHandler && (await exists(handlerSrc))) {\n          await _fs.promises.mkdir((0, _path.dirname)(handlerDest), {\n            recursive: true\n          });\n          await _fs.promises.copyFile(handlerSrc, handlerDest);\n          return;\n        }\n        const htmlDest = (0, _path.join)(outDir, `${route}${subFolders && route !== \"/index\" ? `${_path.sep}index` : \"\"}.html`);\n        const ampHtmlDest = (0, _path.join)(outDir, `${route}.amp${subFolders ? `${_path.sep}index` : \"\"}.html`);\n        const jsonDest = isAppPath ? (0, _path.join)(outDir, `${route}${subFolders && route !== \"/index\" ? `${_path.sep}index` : \"\"}.txt`) : (0, _path.join)(pagesDataDir, `${route}.json`);\n        await _fs.promises.mkdir((0, _path.dirname)(htmlDest), {\n          recursive: true\n        });\n        await _fs.promises.mkdir((0, _path.dirname)(jsonDest), {\n          recursive: true\n        });\n        const htmlSrc = `${orig}.html`;\n        const jsonSrc = `${orig}${isAppPath ? \".rsc\" : \".json\"}`;\n        await _fs.promises.copyFile(htmlSrc, htmlDest);\n        await _fs.promises.copyFile(jsonSrc, jsonDest);\n        if (await exists(`${orig}.amp.html`)) {\n          await _fs.promises.mkdir((0, _path.dirname)(ampHtmlDest), {\n            recursive: true\n          });\n          await _fs.promises.copyFile(`${orig}.amp.html`, ampHtmlDest);\n        }\n      }));\n    }\n    if (Object.keys(ampValidations).length) {\n      console.log((0, _index.formatAmpMessages)(ampValidations));\n    }\n    if (hadValidationError) {\n      throw new ExportError(`AMP Validation caused the export to fail. https://nextjs.org/docs/messages/amp-export-validation`);\n    }\n    if (renderError) {\n      throw new ExportError(`Export encountered errors on following paths:\\n\\t${errorPaths.sort().join(\"\\n\t\")}`);\n    }\n    (0, _fs.writeFileSync)((0, _path.join)(distDir, _constants1.EXPORT_DETAIL), JSON.stringify({\n      version: 1,\n      outDirectory: outDir,\n      success: true\n    }), \"utf8\");\n    if (telemetry) {\n      await telemetry.flush();\n    }\n    await endWorkerPromise;\n  });\n}","map":{"version":3,"names":["ExportError","default","exportApp","exists","_util","promisify","_fs","divideSegments","number","segments","result","dividedNumber","Math","floor","push","createProgress","total","label","Error","currentSegmentTotal","shift","currentSegmentCount","lastProgressOutput","Date","now","curProgress","progressSpinner","_spinner","spinner","frames","interval","isFinished","newText","_log","prefixes","event","info","process","stdout","isTTY","text","console","log","stop","code","dir","options","span","nextExportSpan","traceChild","traceAsyncFn","_nextConfig_amp","_nextConfig_experimental_amp","_nextConfig_experimental_amp1","_path","resolve","traceFn","_env","loadEnvConfig","nextConfig","_config","_constants1","PHASE_EXPORT","threads","experimental","cpus","distDir","join","isExportOutput","output","isInvokedFromCli","hasOutdirFromCli","warn","existsSync","serverActions","telemetry","buildExport","_storage","Telemetry","record","_events","eventCliSession","webpackVersion","cliCommand","isSrcDir","hasNowJson","_findup","cwd","isCustomServer","turboFlag","pagesDir","appDir","subFolders","trailingSlash","silent","buildIdFile","BUILD_ID_FILE","customRoutesDetected","filter","config","_ciinfo","hasNextSupport","length","buildId","readFileSync","pagesManifest","pages","require","SERVER_DIRECTORY","PAGES_MANIFEST","prerenderManifest","undefined","PRERENDER_MANIFEST","appRoutePathManifest","APP_PATH_ROUTES_MANIFEST","err","_iserror","excludedPrerenderRoutes","Set","Object","keys","defaultPathMap","hasApiRoutes","page","_isapiroute","isAPIRoute","dynamicRoutes","add","mapAppRouteToPage","Map","pageName","routePath","entries","set","_isapppageroute","isAppPageRoute","routes","_isAppDir","outDir","outdir","promises","rm","recursive","force","mkdir","writeFileSync","EXPORT_DETAIL","JSON","stringify","version","outDirectory","success","_recursivecopy","recursiveCopy","CLIENT_STATIC_FILES_PATH","exportPathMap","defaultMap","i18n","images","loader","unoptimized","isNextImageImported","readFile","EXPORT_MARKER","then","parse","catch","renderOpts","previewProps","preview","nextExport","assetPrefix","replace","dev","basePath","canonicalBase","amp","ampSkipValidation","skipValidation","ampOptimizerConfig","optimizer","locales","locale","defaultLocale","domainLocales","domains","disableOptimizedLoading","supportsDynamicHTML","crossOrigin","optimizeCss","nextConfigOutput","nextScriptWorkers","optimizeFonts","largePageDataBytes","serverComponents","hasAppDir","serverActionsBodySizeLimit","nextFontManifest","NEXT_FONT_MANIFEST","serverActionsManifest","SERVER_REFERENCE_MANIFEST","strictNextHead","deploymentId","serverRuntimeConfig","publicRuntimeConfig","runtimeConfig","globalThis","__NEXT_DATA__","exportMap","exportPaths","map","path","_denormalizepagepath","denormalizePagePath","_normalizepagepath","normalizePagePath","filteredPaths","route","fallbackEnabledPages","prerenderInfo","fallback","size","_constants","SSG_FALLBACK_EXPORT_ERROR","hasMiddleware","middlewareManifest","MIDDLEWARE_MANIFEST","middleware","_chalk","yellow","bold","progress","statusMessage","pagesDataDir","ampValidations","hadValidationError","publicDir","CLIENT_PUBLIC_FILES_PATH","timeout","staticPageGenerationTimeout","infoPrinted","exportPage","exportAppPage","endWorker","exportPageWorker","exportAppPageWorker","Promise","worker","_worker","Worker","onRestart","_method","attempts","maxRetries","numWorkers","enableWorkerThreads","workerThreads","exposedMethods","bind","end","renderError","errorPaths","all","pageExportSpan","setAttribute","pathMap","exportPageOrApp","ampValidatorPath","validator","parentSpanId","id","httpAgentOptions","debugOutput","isrMemoryCacheSize","fetchCache","fetchCacheKeyPrefix","incrementalCacheHandlerPath","enableExperimentalReact","_needsexperimentalreact","needsExperimentalReact","validation","ampValidationResult","Array","isArray","errors","error","fromBuildExportRevalidate","initialPageRevalidationMap","fromBuildExportMeta","initialPageMetaMap","ssgNotFound","ssgNotFoundPaths","durations","pageDurationMap","duration","endWorkerPromise","srcRoute","appPageName","get","isAppPath","Boolean","isAppRouteHandler","_isapprouteroute","isAppRouteRoute","notFoundRoutes","includes","pagePath","_require","getPagePath","distPagesDir","slice","split","orig","handlerSrc","handlerDest","dirname","copyFile","htmlDest","sep","ampHtmlDest","jsonDest","htmlSrc","jsonSrc","_index","formatAmpMessages","sort","flush"],"sources":["../../src/export/index.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;EAkJaA,WAAW,WAAAA,CAAA;WAAXA,WAAA;;EAqBbC,OAqtBC,WAAAA,CAAA;WArtB6BC,SAAA;;;6DArKZ;8DACC;oBAOZ;QAEA;wBAEgB;sBACqB;sBAClB;uBACuB;4DAC5B;+DACK;2BACgB;+BACZ;4BAevB;8DACgB;wBAES;wBACD;yBACL;mCACQ;qCACE;qBACN;4BAGH;yBACC;iCAII;gCACD;+DACX;wCACmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEvC,MAAMC,MAAA,GAAS,IAAAC,KAAA,CAAAC,SAAS,EAACC,GAAA,CAAAH,MAAU;AAEnC,SAASI,eAAeC,MAAc,EAAEC,QAAgB;EACtD,MAAMC,MAAA,GAAS,EAAE;EACjB,OAAOF,MAAA,GAAS,KAAKC,QAAA,GAAW,GAAG;IACjC,MAAME,aAAA,GACJH,MAAA,GAASC,QAAA,GAAWD,MAAA,GAASI,IAAA,CAAKC,KAAK,CAACL,MAAA,GAASC,QAAA;IAEnDD,MAAA,IAAUG,aAAA;IACVF,QAAA;IACAC,MAAA,CAAOI,IAAI,CAACH,aAAA;EACd;EACA,OAAOD,MAAA;AACT;AAEA,MAAMK,cAAA,GAAiBA,CAACC,KAAA,EAAeC,KAAA;EACrC,MAAMR,QAAA,GAAWF,cAAA,CAAeS,KAAA,EAAO;EAEvC,IAAIA,KAAA,KAAU,GAAG;IACf,MAAM,IAAIE,KAAA,CAAM;EAClB;EACA,IAAIC,mBAAA,GAAsBV,QAAA,CAASW,KAAK;EACxC,IAAIC,mBAAA,GAAsB;EAC1B,IAAIC,kBAAA,GAAqBC,IAAA,CAAKC,GAAG;EACjC,IAAIC,WAAA,GAAc;EAClB,IAAIC,eAAA,GAAkB,IAAAC,QAAA,CAAA1B,OAAa,EAAE,GAAEgB,KAAM,KAAIQ,WAAY,IAAGT,KAAM,GAAE,EAAE;IACxEY,OAAA,EAAS;MACPC,MAAA,EAAQ,CACN,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACD;MACDC,QAAA,EAAU;IACZ;EACF;EAEA,OAAO;IACLL,WAAA;IAEA;IACA;IACA;IACA;IACA,IAAI,CAACC,eAAA,EAAiB;MACpBL,mBAAA;MAEA,IAAIA,mBAAA,KAAwBF,mBAAA,EAAqB;QAC/CA,mBAAA,GAAsBV,QAAA,CAASW,KAAK;QACpCC,mBAAA,GAAsB;MACxB,OAAO,IAAIC,kBAAA,GAAqB,QAAQC,IAAA,CAAKC,GAAG,IAAI;QAClD;MACF;MAEAF,kBAAA,GAAqBC,IAAA,CAAKC,GAAG;IAC/B;IAEA,MAAMO,UAAA,GAAaN,WAAA,KAAgBT,KAAA;IACnC;IACA;IACA,MAAMgB,OAAA,GAAW,MACfD,UAAA,GAAaE,IAAA,CAAIC,QAAQ,CAACC,KAAK,GAAGF,IAAA,CAAIC,QAAQ,CAACE,IAChD,IAAGnB,KAAM,KAAIQ,WAAY,IAAGT,KAAM,KACjCe,UAAA,GAAa,KAAKM,OAAA,CAAQC,MAAM,CAACC,KAAK,GAAG,OAAO,IACjD,EAAC;IACF,IAAIb,eAAA,EAAiB;MACnBA,eAAA,CAAgBc,IAAI,GAAGR,OAAA;IACzB,OAAO;MACLS,OAAA,CAAQC,GAAG,CAACV,OAAA;IACd;IAEA,IAAID,UAAA,IAAcL,eAAA,EAAiB;MACjCA,eAAA,CAAgBiB,IAAI;MACpBF,OAAA,CAAQC,GAAG,CAACV,OAAA;IACd;EACF;AACF;AAEO,MAAMhC,WAAA,SAAoBkB,KAAA;;;SAC/B0B,IAAA,GAAO;;AACT;AAmBe,eAAe1C,UAC5B2C,GAAW,EACXC,OAAsB,EACtBC,IAAU;EAEV,MAAMC,cAAA,GAAiBD,IAAA,CAAKE,UAAU,CAAC;EAEvC,OAAOD,cAAA,CAAeE,YAAY,CAAC;QAgShBC,eAAA,EACIC,4BAAA,EACCC,6BAAA;IAjStBR,GAAA,GAAM,IAAAS,KAAA,CAAAC,OAAO,EAACV,GAAA;IAEd;IACAG,cAAA,CACGC,UAAU,CAAC,eACXO,OAAO,CAAC,MAAM,IAAAC,IAAA,CAAAC,aAAa,EAACb,GAAA,EAAK,OAAOZ,IAAA;IAE3C,MAAM0B,UAAA,GACJb,OAAA,CAAQa,UAAU,KACjB,MAAMX,cAAA,CACJC,UAAU,CAAC,oBACXC,YAAY,CAAC,MAAM,IAAAU,OAAA,CAAA3D,OAAU,EAAC4D,WAAA,CAAAC,YAAY,EAAEjB,GAAA;IAEjD,MAAMkB,OAAA,GAAUjB,OAAA,CAAQiB,OAAO,IAAIJ,UAAA,CAAWK,YAAY,CAACC,IAAI;IAC/D,MAAMC,OAAA,GAAU,IAAAZ,KAAA,CAAAa,IAAI,EAACtB,GAAA,EAAKc,UAAA,CAAWO,OAAO;IAC5C,MAAME,cAAA,GAAiBT,UAAA,CAAWU,MAAM,KAAK;IAE7C;IACA,IAAIvB,OAAA,CAAQwB,gBAAgB,EAAE;MAC5B,IAAIF,cAAA,EAAgB;QAClB,IAAItB,OAAA,CAAQyB,gBAAgB,EAAE;UAC5B,MAAM,IAAIvE,WAAA,CACR;QAEJ;QACAiC,IAAA,CAAIuC,IAAI,CACN;QAEF;MACF;MACA,IAAI,IAAAlE,GAAA,CAAAmE,UAAU,EAAC,IAAAnB,KAAA,CAAAa,IAAI,EAACD,OAAA,EAAS,UAAU,SAAS;QAC9C,MAAM,IAAIlE,WAAA,CACR;MAEJ;MACAiC,IAAA,CAAIuC,IAAI,CACN;IAEJ;IACA;IACA,IAAI1B,OAAA,CAAQwB,gBAAgB,IAAIF,cAAA,EAAgB;MAC9C,IAAIT,UAAA,CAAWK,YAAY,CAACU,aAAa,EAAE;QACzC,MAAM,IAAI1E,WAAA,CACP,sDAAqD;MAE1D;IACF;IAEA,MAAM2E,SAAA,GAAY7B,OAAA,CAAQ8B,WAAW,GAAG,OAAO,IAAIC,QAAA,CAAAC,SAAS,CAAC;MAAEZ;IAAQ;IAEvE,IAAIS,SAAA,EAAW;MACbA,SAAA,CAAUI,MAAM,CACd,IAAAC,OAAA,CAAAC,eAAe,EAACf,OAAA,EAASP,UAAA,EAAY;QACnCuB,cAAA,EAAgB;QAChBC,UAAA,EAAY;QACZC,QAAA,EAAU;QACVC,UAAA,EAAY,CAAC,EAAE,MAAM,IAAAC,OAAA,CAAArF,OAAM,EAAC,YAAY;UAAEsF,GAAA,EAAK1C;QAAI;QACnD2C,cAAA,EAAgB;QAChBC,SAAA,EAAW;QACXC,QAAA,EAAU;QACVC,MAAA,EAAQ;MACV;IAEJ;IAEA,MAAMC,UAAA,GAAajC,UAAA,CAAWkC,aAAa,IAAI,CAAC/C,OAAA,CAAQ8B,WAAW;IAEnE,IAAI,CAAC9B,OAAA,CAAQgD,MAAM,IAAI,CAAChD,OAAA,CAAQ8B,WAAW,EAAE;MAC3C3C,IAAA,CAAIG,IAAI,CAAE,0BAAyB8B,OAAQ,EAAC;IAC9C;IAEA,MAAM6B,WAAA,GAAc,IAAAzC,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAAmC,aAAa;IAE/C,IAAI,CAAC,IAAA1F,GAAA,CAAAmE,UAAU,EAACsB,WAAA,GAAc;MAC5B,MAAM,IAAI/F,WAAA,CACP,6CAA4CkE,OAAQ,kJAAiJ;IAE1M;IAEA,MAAM+B,oBAAA,GAAuB,CAAC,YAAY,aAAa,UAAU,CAACC,MAAM,CACrEC,MAAA,IAAW,OAAOxC,UAAU,CAACwC,MAAA,CAAO,KAAK;IAG5C,IACE,CAACC,OAAA,CAAAC,cAAc,IACf,CAACvD,OAAA,CAAQ8B,WAAW,IACpBqB,oBAAA,CAAqBK,MAAM,GAAG,GAC9B;MACArE,IAAA,CAAIuC,IAAI,CACL,+FAA8FyB,oBAAA,CAAqB9B,IAAI,CACtH,KACA,iFAAgF;IAEtF;IAEA,MAAMoC,OAAA,GAAU,IAAAjG,GAAA,CAAAkG,YAAY,EAACT,WAAA,EAAa;IAC1C,MAAMU,aAAA,GACJ,CAAC3D,OAAA,CAAQ4D,KAAK,IACbC,OAAA,CAAQ,IAAArD,KAAA,CAAAa,IAAI,EACXD,OAAA,EACAL,WAAA,CAAA+C,gBAAgB,EAChB/C,WAAA,CAAAgD,cAAc;IAGlB,IAAIC,iBAAA,GAAmDC,SAAA;IACvD,IAAI;MACFD,iBAAA,GAAoBH,OAAA,CAAQ,IAAArD,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAAmD,kBAAkB;IAC9D,EAAE,MAAM,CAAC;IAET,IAAIC,oBAAA,GAA2DF,SAAA;IAC/D,IAAI;MACFE,oBAAA,GAAuBN,OAAA,CAAQ,IAAArD,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAAqD,wBAAwB;IACvE,EAAE,OAAOC,GAAA,EAAK;MACZ,IACE,IAAAC,QAAA,CAAAnH,OAAO,EAACkH,GAAA,MACPA,GAAA,CAAIvE,IAAI,KAAK,YAAYuE,GAAA,CAAIvE,IAAI,KAAK,kBAAiB,GACxD;QACA;QACA;QACAqE,oBAAA,GAAuBF,SAAA;MACzB,OAAO;QACL;QACA,MAAMI,GAAA;MACR;IACF;IAEA,MAAME,uBAAA,GAA0B,IAAIC,GAAA;IACpC,MAAMZ,KAAA,GAAQ5D,OAAA,CAAQ4D,KAAK,IAAIa,MAAA,CAAOC,IAAI,CAACf,aAAA;IAC3C,MAAMgB,cAAA,GAAgC,CAAC;IACvC,IAAIC,YAAA,GAAe;IAEnB,KAAK,MAAMC,IAAA,IAAQjB,KAAA,EAAO;MACxB;MACA;MACA;MAEA,IAAI,IAAAkB,WAAA,CAAAC,UAAU,EAACF,IAAA,GAAO;QACpBD,YAAA,GAAe;QACf;MACF;MAEA,IAAIC,IAAA,KAAS,gBAAgBA,IAAA,KAAS,WAAWA,IAAA,KAAS,WAAW;QACnE;MACF;MAEA;MACA;MACA;MACA;MACA,IAAIb,iBAAA,oBAAAA,iBAAA,CAAmBgB,aAAa,CAACH,IAAA,CAAK,EAAE;QAC1CN,uBAAA,CAAwBU,GAAG,CAACJ,IAAA;QAC5B;MACF;MAEAF,cAAc,CAACE,IAAA,CAAK,GAAG;QAAEA;MAAK;IAChC;IAEA,MAAMK,iBAAA,GAAoB,IAAIC,GAAA;IAC9B,IAAI,CAACnF,OAAA,CAAQ8B,WAAW,IAAIqC,oBAAA,EAAsB;MAChD,KAAK,MAAM,CAACiB,QAAA,EAAUC,SAAA,CAAU,IAAIZ,MAAA,CAAOa,OAAO,CAChDnB,oBAAA,GACC;QACDe,iBAAA,CAAkBK,GAAG,CAACF,SAAA,EAAWD,QAAA;QACjC,IACE,IAAAI,eAAA,CAAAC,cAAc,EAACL,QAAA,KACf,EAACpB,iBAAA,oBAAAA,iBAAA,CAAmB0B,MAAM,CAACL,SAAA,CAAU,KACrC,EAACrB,iBAAA,oBAAAA,iBAAA,CAAmBgB,aAAa,CAACK,SAAA,CAAU,GAC5C;UACAV,cAAc,CAACU,SAAA,CAAU,GAAG;YAC1BR,IAAA,EAAMO,QAAA;YACNO,SAAA,EAAW;UACb;QACF;MACF;IACF;IAEA;IACA,MAAMC,MAAA,GAAS5F,OAAA,CAAQ6F,MAAM;IAE7B,IAAID,MAAA,KAAW,IAAApF,KAAA,CAAAa,IAAI,EAACtB,GAAA,EAAK,WAAW;MAClC,MAAM,IAAI7C,WAAA,CACP,0JAAyJ;IAE9J;IAEA,IAAI0I,MAAA,KAAW,IAAApF,KAAA,CAAAa,IAAI,EAACtB,GAAA,EAAK,WAAW;MAClC,MAAM,IAAI7C,WAAA,CACP,0JAAyJ;IAE9J;IAEA,MAAMM,GAAA,CAAAsI,QAAQ,CAACC,EAAE,CAACH,MAAA,EAAQ;MAAEI,SAAA,EAAW;MAAMC,KAAA,EAAO;IAAK;IACzD,MAAMzI,GAAA,CAAAsI,QAAQ,CAACI,KAAK,CAAC,IAAA1F,KAAA,CAAAa,IAAI,EAACuE,MAAA,EAAQ,SAASnC,OAAA,GAAU;MAAEuC,SAAA,EAAW;IAAK;IAEvE,IAAAxI,GAAA,CAAA2I,aAAa,EACX,IAAA3F,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAAqF,aAAa,GAC3BC,IAAA,CAAKC,SAAS,CAAC;MACbC,OAAA,EAAS;MACTC,YAAA,EAAcZ,MAAA;MACda,OAAA,EAAS;IACX,IACA;IAGF;IACA,IAAI,CAACzG,OAAA,CAAQ8B,WAAW,IAAI,IAAAtE,GAAA,CAAAmE,UAAU,EAAC,IAAAnB,KAAA,CAAAa,IAAI,EAACtB,GAAA,EAAK,YAAY;MAC3D,IAAI,CAACC,OAAA,CAAQgD,MAAM,EAAE;QACnB7D,IAAA,CAAIG,IAAI,CAAC;MACX;MACA,MAAMY,cAAA,CACHC,UAAU,CAAC,yBACXC,YAAY,CAAC,MACZ,IAAAsG,cAAA,CAAAC,aAAa,EAAC,IAAAnG,KAAA,CAAAa,IAAI,EAACtB,GAAA,EAAK,WAAW,IAAAS,KAAA,CAAAa,IAAI,EAACuE,MAAA,EAAQ;IAEtD;IAEA;IACA,IACE,CAAC5F,OAAA,CAAQ8B,WAAW,IACpB,IAAAtE,GAAA,CAAAmE,UAAU,EAAC,IAAAnB,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAA6F,wBAAwB,IACjD;MACA,IAAI,CAAC5G,OAAA,CAAQgD,MAAM,EAAE;QACnB7D,IAAA,CAAIG,IAAI,CAAC;MACX;MACA,MAAMY,cAAA,CACHC,UAAU,CAAC,8BACXC,YAAY,CAAC,MACZ,IAAAsG,cAAA,CAAAC,aAAa,EACX,IAAAnG,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAA6F,wBAAwB,GACtC,IAAApG,KAAA,CAAAa,IAAI,EAACuE,MAAA,EAAQ,SAAS7E,WAAA,CAAA6F,wBAAwB;IAGtD;IAEA;IACA,IAAI,OAAO/F,UAAA,CAAWgG,aAAa,KAAK,YAAY;MAClDhG,UAAA,CAAWgG,aAAa,GAAG,MAAOC,UAAA;QAChC,OAAOA,UAAA;MACT;IACF;IAEA,MAAM;MACJC,IAAI;MACJC,MAAA,EAAQ;QAAEC,MAAA,GAAS,SAAS;QAAEC;MAAW;IAAE,CAC5C,GAAGrG,UAAA;IAEJ,IAAIkG,IAAA,IAAQ,CAAC/G,OAAA,CAAQ8B,WAAW,EAAE;MAChC,MAAM,IAAI5E,WAAA,CACP,gJAA+I;IAEpJ;IAEA,IAAI,CAAC8C,OAAA,CAAQ8B,WAAW,EAAE;MACxB,MAAM;QAAEqF;MAAmB,CAAE,GAAG,MAAMjH,cAAA,CACnCC,UAAU,CAAC,0BACXC,YAAY,CAAC,MACZ5C,GAAA,CAAAsI,QAAQ,CACLsB,QAAQ,CAAC,IAAA5G,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAAsG,aAAa,GAAG,QACvCC,IAAI,CAAE5H,IAAA,IAAS2G,IAAA,CAAKkB,KAAK,CAAC7H,IAAA,GAC1B8H,KAAK,CAAC,OAAO,CAAC;MAGrB,IACEL,mBAAA,IACAF,MAAA,KAAW,aACX,CAACC,WAAA,IACD,CAAC5D,OAAA,CAAAC,cAAc,EACf;QACA,MAAM,IAAIrG,WAAA,CACP;;;;+DAIoD;MAEzD;IACF;IAEA;IACA,MAAMuK,UAAA,GAAsC;MAC1CC,YAAY,EAAE1D,iBAAA,oBAAAA,iBAAA,CAAmB2D,OAAO;MACxClE,OAAA;MACAmE,UAAA,EAAY;MACZC,WAAA,EAAahH,UAAA,CAAWgH,WAAW,CAACC,OAAO,CAAC,OAAO;MACnD1G,OAAA;MACA2G,GAAA,EAAK;MACLC,QAAA,EAAUnH,UAAA,CAAWmH,QAAQ;MAC7BC,aAAA,EAAe,EAAA5H,eAAA,GAAAQ,UAAA,CAAWqH,GAAG,qBAAd7H,eAAA,CAAgB4H,aAAa,KAAI;MAChDE,iBAAA,EAAmB,EAAA7H,4BAAA,GAAAO,UAAA,CAAWK,YAAY,CAACgH,GAAG,qBAA3B5H,4BAAA,CAA6B8H,cAAc,KAAI;MAClEC,kBAAA,EAAoB,EAAA9H,6BAAA,GAAAM,UAAA,CAAWK,YAAY,CAACgH,GAAG,qBAA3B3H,6BAAA,CAA6B+H,SAAS,KAAIrE,SAAA;MAC9DsE,OAAO,EAAExB,IAAA,oBAAAA,IAAA,CAAMwB,OAAO;MACtBC,MAAM,EAAEzB,IAAA,oBAAAA,IAAA,CAAM0B,aAAa;MAC3BA,aAAa,EAAE1B,IAAA,oBAAAA,IAAA,CAAM0B,aAAa;MAClCC,aAAa,EAAE3B,IAAA,oBAAAA,IAAA,CAAM4B,OAAO;MAC5BC,uBAAA,EAAyB/H,UAAA,CAAWK,YAAY,CAAC0H,uBAAuB;MACxE;MACAC,mBAAA,EAAqB;MACrBC,WAAA,EAAajI,UAAA,CAAWiI,WAAW,IAAI;MACvCC,WAAA,EAAalI,UAAA,CAAWK,YAAY,CAAC6H,WAAW;MAChDC,gBAAA,EAAkBnI,UAAA,CAAWU,MAAM;MACnC0H,iBAAA,EAAmBpI,UAAA,CAAWK,YAAY,CAAC+H,iBAAiB;MAC5DC,aAAA,EAAerI,UAAA,CAAWqI,aAAa;MACvCC,kBAAA,EAAoBtI,UAAA,CAAWK,YAAY,CAACiI,kBAAkB;MAC9DC,gBAAA,EAAkBpJ,OAAA,CAAQqJ,SAAS;MACnCC,0BAAA,EACEzI,UAAA,CAAWK,YAAY,CAACoI,0BAA0B;MACpDC,gBAAA,EAAkB1F,OAAA,CAAQ,IAAArD,KAAA,CAAAa,IAAI,EAC5BD,OAAA,EACA,UACC,GAAEL,WAAA,CAAAyI,kBAAmB,OAAM;MAE9BxC,MAAA,EAAQnG,UAAA,CAAWmG,MAAM;MACzB,IAAIhH,OAAA,CAAQqJ,SAAS,GACjB;QACEI,qBAAA,EAAuB5F,OAAA,CAAQ,IAAArD,KAAA,CAAAa,IAAI,EACjCD,OAAA,EACAL,WAAA,CAAA+C,gBAAgB,EAChB/C,WAAA,CAAA2I,yBAAyB,GAAG;MAEhC,IACA,CAAC,CAAC;MACNC,cAAA,EAAgB,CAAC,CAAC9I,UAAA,CAAWK,YAAY,CAACyI,cAAc;MACxDC,YAAA,EAAc/I,UAAA,CAAWK,YAAY,CAAC0I;IACxC;IAEA,MAAM;MAAEC,mBAAmB;MAAEC;IAAmB,CAAE,GAAGjJ,UAAA;IAErD,IAAI4D,MAAA,CAAOC,IAAI,CAACoF,mBAAA,EAAqBtG,MAAM,GAAG,GAAG;MAC7CiE,UAAA,CAAmBsC,aAAa,GAAGD,mBAAA;IACvC;IAGEE,UAAA,CAAmBC,aAAa,GAAG;MACnCrC,UAAA,EAAY;IACd;IAEA,IAAI,CAAC5H,OAAA,CAAQgD,MAAM,IAAI,CAAChD,OAAA,CAAQ8B,WAAW,EAAE;MAC3C3C,IAAA,CAAIG,IAAI,CAAE,aAAY2B,OAAQ,UAAS;IACzC;IACA,MAAM4F,aAAA,GAAgB,MAAM3G,cAAA,CACzBC,UAAU,CAAC,uBACXC,YAAY,CAAC;MACZ,MAAM8J,SAAA,GAAY,MAAMrJ,UAAA,CAAWgG,aAAa,CAAClC,cAAA,EAAgB;QAC/DoD,GAAA,EAAK;QACLhI,GAAA;QACA6F,MAAA;QACAxE,OAAA;QACAqC;MACF;MACA,OAAOyG,SAAA;IACT;IAEF;IACA,IAAI,CAAClK,OAAA,CAAQ8B,WAAW,EAAE;MACxB;MACA,IAAI,CAAC+E,aAAa,CAAC,OAAO,EAAE;QAC1BA,aAAa,CAAC,OAAO,GAAG;UAAEhC,IAAA,EAAM;QAAU;MAC5C;MAEA;;;;MAIA,IAAI,CAACgC,aAAa,CAAC,YAAY,EAAE;QAC/B;QACAA,aAAa,CAAC,YAAY,GAAGA,aAAa,CAAC,OAAO;MACpD;IACF;IAEA;IACA,MAAMsD,WAAA,GAAc,C,GACf,IAAI3F,GAAA,CACLC,MAAA,CAAOC,IAAI,CAACmC,aAAA,EAAeuD,GAAG,CAAEC,IAAA,IAC9B,IAAAC,oBAAA,CAAAC,mBAAmB,EAAC,IAAAC,kBAAA,CAAAC,iBAAiB,EAACJ,IAAA,KAG3C;IAED,MAAMK,aAAA,GAAgBP,WAAA,CAAY/G,MAAM;IACtC;IACCuH,KAAA,IACC9D,aAAa,CAAC8D,KAAA,CAAM,CAAChF,SAAS,IAAI,CAAC,IAAAb,WAAA,CAAAC,UAAU,EAAC8B,aAAa,CAAC8D,KAAA,CAAM,CAAC9F,IAAI;IAG3E,IAAI6F,aAAA,CAAclH,MAAM,KAAK2G,WAAA,CAAY3G,MAAM,EAAE;MAC/CoB,YAAA,GAAe;IACjB;IAEA,IAAI8F,aAAA,CAAclH,MAAM,KAAK,GAAG;MAC9B;IACF;IAEA,IAAIQ,iBAAA,IAAqB,CAAChE,OAAA,CAAQ8B,WAAW,EAAE;MAC7C,MAAM8I,oBAAA,GAAuB,IAAIpG,GAAA;MAEjC,KAAK,MAAM6F,IAAA,IAAQ5F,MAAA,CAAOC,IAAI,CAACmC,aAAA,GAAgB;QAC7C,MAAMhC,IAAA,GAAOgC,aAAa,CAACwD,IAAA,CAAK,CAACxF,IAAI;QACrC,MAAMgG,aAAA,GAAgB7G,iBAAA,CAAkBgB,aAAa,CAACH,IAAA,CAAK;QAE3D,IAAIgG,aAAA,IAAiBA,aAAA,CAAcC,QAAQ,KAAK,OAAO;UACrDF,oBAAA,CAAqB3F,GAAG,CAACJ,IAAA;QAC3B;MACF;MAEA,IAAI+F,oBAAA,CAAqBG,IAAI,EAAE;QAC7B,MAAM,IAAI7N,WAAA,CACP,2CAA0C,C,GACtC0N,oBAAA,CACJ,CAACvJ,IAAI,CAAC,KAAM,KAAI2J,UAAA,CAAAC,yBAA0B,IAAG;MAElD;IACF;IACA,IAAIC,aAAA,GAAgB;IAEpB,IAAI,CAAClL,OAAA,CAAQ8B,WAAW,EAAE;MACxB,IAAI;QACF,MAAMqJ,kBAAA,GAAqBtH,OAAA,CAAQ,IAAArD,KAAA,CAAAa,IAAI,EACrCD,OAAA,EACAL,WAAA,CAAA+C,gBAAgB,EAChB/C,WAAA,CAAAqK,mBAAmB;QAGrBF,aAAA,GAAgBzG,MAAA,CAAOC,IAAI,CAACyG,kBAAA,CAAmBE,UAAU,EAAE7H,MAAM,GAAG;MACtE,EAAE,MAAM,CAAC;MAET;MACA,IAAIoB,YAAA,IAAgBsG,aAAA,EAAe;QACjC,IAAI,CAAClL,OAAA,CAAQgD,MAAM,EAAE;UACnB7D,IAAA,CAAIuC,IAAI,CACN4J,MAAA,CAAAnO,OAAK,CAACoO,MAAM,CACT,oGAAmG,IAEnG,IAAG,GACJD,MAAA,CAAAnO,OAAK,CAACoO,MAAM,CACT,qDAAoD,GACnD,MACAD,MAAA,CAAAnO,OAAK,CAACqO,IAAI,CAAE,gDAA+C,KAE9D,IAAG,GACJF,MAAA,CAAAnO,OAAK,CAACoO,MAAM,CACT,6KAA4K,IAE9K,IAAG,GACJD,MAAA,CAAAnO,OAAK,CAACoO,MAAM,CACT,uEAAsE;QAG/E;MACF;IACF;IAEA,MAAME,QAAA,GACJ,CAACzL,OAAA,CAAQgD,MAAM,IACf/E,cAAA,CACEyM,aAAA,CAAclH,MAAM,EACnB,GAAExD,OAAA,CAAQ0L,aAAa,IAAI,WAAY,EAAC;IAE7C,MAAMC,YAAA,GAAe3L,OAAA,CAAQ8B,WAAW,GACpC8D,MAAA,GACA,IAAApF,KAAA,CAAAa,IAAI,EAACuE,MAAA,EAAQ,cAAcnC,OAAA;IAE/B,MAAMmI,cAAA,GAAgC,CAAC;IACvC,IAAIC,kBAAA,GAAqB;IAEzB,MAAMC,SAAA,GAAY,IAAAtL,KAAA,CAAAa,IAAI,EAACtB,GAAA,EAAKgB,WAAA,CAAAgL,wBAAwB;IACpD;IACA,IAAI,CAAC/L,OAAA,CAAQ8B,WAAW,IAAI,IAAAtE,GAAA,CAAAmE,UAAU,EAACmK,SAAA,GAAY;MACjD,IAAI,CAAC9L,OAAA,CAAQgD,MAAM,EAAE;QACnB7D,IAAA,CAAIG,IAAI,CAAC;MACX;MACA,MAAMY,cAAA,CACHC,UAAU,CAAC,yBACXC,YAAY,CAAC,MACZ,IAAAsG,cAAA,CAAAC,aAAa,EAACmF,SAAA,EAAWlG,MAAA,EAAQ;QAC/BxC,OAAOiH,IAAI;UACT;UACA,OAAO,CAACxD,aAAa,CAACwD,IAAA,CAAK;QAC7B;MACF;IAEN;IAEA,MAAM2B,OAAA,GAAU,CAAAnL,UAAA,oBAAAA,UAAA,CAAYoL,2BAA2B,KAAI;IAC3D,IAAIC,WAAA,GAAc;IAClB,IAAIC,UAAA;IACJ,IAAIC,aAAA;IACJ,IAAIC,SAAA;IACJ,IAAIrM,OAAA,CAAQsM,gBAAgB,EAAE;MAC5BH,UAAA,GAAanM,OAAA,CAAQsM,gBAAgB;MACrCF,aAAA,GAAgBpM,OAAA,CAAQuM,mBAAmB;MAC3CF,SAAA,GAAYrM,OAAA,CAAQqM,SAAS,KAAK,MAAMG,OAAA,CAAQ/L,OAAO,EAAC;IAC1D,OAAO;MACL,MAAMgM,MAAA,GAAS,IAAIC,OAAA,CAAAC,MAAM,CAAC9I,OAAA,CAAQpD,OAAO,CAAC,aAAa;QACrDuL,OAAA,EAASA,OAAA,GAAU;QACnBY,SAAA,EAAWA,CAACC,OAAA,EAAS,CAAC;UAAExC;QAAI,CAAE,CAAC,EAAEyC,QAAA;UAC/B,IAAIA,QAAA,IAAY,GAAG;YACjB,MAAM,IAAI5P,WAAA,CACP,8BAA6BmN,IAAK,2HAA0H;UAEjK;UACAlL,IAAA,CAAIuC,IAAI,CACL,wCAAuC2I,IAAK,8BAA6B2B,OAAQ,UAAS;UAE7F,IAAI,CAACE,WAAA,EAAa;YAChB/M,IAAA,CAAIuC,IAAI,CACN;YAEFwK,WAAA,GAAc;UAChB;QACF;QACAa,UAAA,EAAY;QACZC,UAAA,EAAY/L,OAAA;QACZgM,mBAAA,EAAqBpM,UAAA,CAAWK,YAAY,CAACgM,aAAa;QAC1DC,cAAA,EAAgB,CAAC;MACnB;MACAhB,UAAA,GAAaM,MAAA,CAAOtP,OAAO,CAACiQ,IAAI,CAACX,MAAA;MACjCJ,SAAA,GAAY,MAAAA,CAAA;QACV,MAAMI,MAAA,CAAOY,GAAG;MAClB;IACF;IAEA,IAAIC,WAAA,GAAc;IAClB,MAAMC,UAAA,GAAuB,EAAE;IAE/B,MAAMf,OAAA,CAAQgB,GAAG,CACf9C,aAAA,CAAcN,GAAG,CAAC,MAAOC,IAAA;MACvB,MAAMoD,cAAA,GAAiBvN,cAAA,CAAeC,UAAU,CAAC;MACjDsN,cAAA,CAAeC,YAAY,CAAC,QAAQrD,IAAA;MAEpC,OAAOoD,cAAA,CAAerN,YAAY,CAAC;YAgB7BE,4BAAA;QAfJ,MAAMqN,OAAA,GAAU9G,aAAa,CAACwD,IAAA,CAAK;QACnC,MAAMuD,eAAA,GAAkBD,OAAA,CAAQhI,SAAS,GAAGyG,aAAA,GAAgBD,UAAA;QAC5D,IAAI,CAACyB,eAAA,EAAiB;UACpB,MAAM,IAAIxP,KAAA,CACR;QAEJ;QACA,MAAMR,MAAA,GAAS,MAAMgQ,eAAA,CAAgB;UACnCvD,IAAA;UACAsD,OAAA;UACAvM,OAAA;UACAwE,MAAA;UACA+F,YAAA;UACAlE,UAAA;UACAoG,gBAAA,EACE,EAAAvN,4BAAA,GAAAO,UAAA,CAAWK,YAAY,CAACgH,GAAG,qBAA3B5H,4BAAA,CAA6BwN,SAAS,KAAI7J,SAAA;UAC5ClB,aAAA,EAAelC,UAAA,CAAWkC,aAAa;UACvC8G,mBAAA;UACA/G,UAAA;UACAhB,WAAA,EAAa9B,OAAA,CAAQ8B,WAAW;UAChCoH,aAAA,EAAerI,UAAA,CAAWqI,aAAa;UACvCH,WAAA,EAAalI,UAAA,CAAWK,YAAY,CAAC6H,WAAW;UAChDH,uBAAA,EACE/H,UAAA,CAAWK,YAAY,CAAC0H,uBAAuB;UACjDmF,YAAA,EAAcN,cAAA,CAAeO,EAAE;UAC/BC,gBAAA,EAAkBpN,UAAA,CAAWoN,gBAAgB;UAC7CC,WAAA,EAAalO,OAAA,CAAQkO,WAAW;UAChCC,kBAAA,EAAoBtN,UAAA,CAAWK,YAAY,CAACiN,kBAAkB;UAC9DC,UAAA,EAAY;UACZC,mBAAA,EAAqBxN,UAAA,CAAWK,YAAY,CAACmN,mBAAmB;UAChEC,2BAAA,EACEzN,UAAA,CAAWK,YAAY,CAACoN,2BAA2B;UACrDC,uBAAA,EAAyB,IAAAC,uBAAA,CAAAC,sBAAsB,EAAC5N,UAAA;QAClD;QAEA,IAAIjD,MAAA,CAAOgO,cAAc,EAAE;UACzB,KAAK,MAAM8C,UAAA,IAAc9Q,MAAA,CAAOgO,cAAc,EAAE;YAC9C,MAAM;cAAE/G,IAAI;cAAEjH,MAAA,EAAQ+Q;YAAmB,CAAE,GAAGD,UAAA;YAC9C9C,cAAc,CAAC/G,IAAA,CAAK,GAAG8J,mBAAA;YACvB9C,kBAAA,GACEA,kBAAA,IACC+C,KAAA,CAAMC,OAAO,CAACF,mBAAA,oBAAAA,mBAAA,CAAqBG,MAAM,KACxCH,mBAAA,CAAoBG,MAAM,CAACtL,MAAM,GAAG;UAC1C;QACF;QAEA8J,WAAA,GAAcA,WAAA,IAAe,CAAC,CAAC1P,MAAA,CAAOmR,KAAK;QAE3C,IAAI,CAAC,CAACnR,MAAA,CAAOmR,KAAK,EAAE;UAClB,MAAM;YAAElK;UAAI,CAAE,GAAG8I,OAAA;UACjBJ,UAAA,CAAWvP,IAAI,CAAC6G,IAAA,KAASwF,IAAA,GAAQ,GAAExF,IAAK,KAAIwF,IAAK,EAAC,GAAGA,IAAA;QACvD;QAEA,IAAIrK,OAAA,CAAQ8B,WAAW,EAAE;UACvB,IAAI,OAAOlE,MAAA,CAAOoR,yBAAyB,KAAK,aAAa;YAC3DnO,UAAA,CAAWoO,0BAA0B,CAAC5E,IAAA,CAAK,GACzCzM,MAAA,CAAOoR,yBAAyB;UACpC;UAEA,IAAI,OAAOpR,MAAA,CAAOsR,mBAAmB,KAAK,aAAa;YACrDrO,UAAA,CAAWsO,kBAAkB,CAAC9E,IAAA,CAAK,GAAGzM,MAAA,CAAOsR,mBAAmB;UAClE;UAEA,IAAItR,MAAA,CAAOwR,WAAW,KAAK,MAAM;YAC/BvO,UAAA,CAAWwO,gBAAgB,CAACrR,IAAI,CAACqM,IAAA;UACnC;UAEA,MAAMiF,SAAA,GAAazO,UAAA,CAAW0O,eAAe,CAAC5B,OAAA,CAAQ9I,IAAI,CAAC,GACzDhE,UAAA,CAAW0O,eAAe,CAAC5B,OAAA,CAAQ9I,IAAI,CAAC,IAAI,CAAC;UAC/CyK,SAAS,CAACjF,IAAA,CAAK,GAAGzM,MAAA,CAAO4R,QAAQ;QACnC;QAEA,IAAI/D,QAAA,EAAUA,QAAA;MAChB;IACF;IAGF,MAAMgE,gBAAA,GAAmBpD,SAAA;IAEzB;IACA,IAAI,CAACrM,OAAA,CAAQ8B,WAAW,IAAIkC,iBAAA,EAAmB;MAC7C,MAAMwI,OAAA,CAAQgB,GAAG,CACf/I,MAAA,CAAOC,IAAI,CAACV,iBAAA,CAAkB0B,MAAM,EAAE0E,GAAG,CAAC,MAAOO,KAAA;QAC/C,MAAM;UAAE+E;QAAQ,CAAE,GAAG1L,iBAAA,CAAmB0B,MAAM,CAACiF,KAAA,CAAM;QACrD,MAAMgF,WAAA,GAAczK,iBAAA,CAAkB0K,GAAG,CAACF,QAAA,IAAY;QACtD,MAAMtK,QAAA,GAAWuK,WAAA,IAAeD,QAAA,IAAY/E,KAAA;QAC5C,MAAMkF,SAAA,GAAYC,OAAA,CAAQH,WAAA;QAC1B,MAAMI,iBAAA,GAAoBJ,WAAA,IAAe,IAAAK,gBAAA,CAAAC,eAAe,EAACN,WAAA;QAEzD;QACA;QACA,IAAI3L,iBAAA,CAAmBkM,cAAc,CAACC,QAAQ,CAACxF,KAAA,GAAQ;UACrD;QACF;QACAA,KAAA,GAAQ,IAAAH,kBAAA,CAAAC,iBAAiB,EAACE,KAAA;QAE1B,MAAMyF,QAAA,GAAW,IAAAC,QAAA,CAAAC,WAAW,EAAClL,QAAA,EAAUhE,OAAA,EAAS6C,SAAA,EAAW4L,SAAA;QAC3D,MAAMU,YAAA,GAAe,IAAA/P,KAAA,CAAAa,IAAI,EACvB+O,QAAA;QACA;QACA;QACAhL,QAAA,CACGoL,KAAK,CAAC,GACNC,KAAK,CAAC,KACNrG,GAAG,CAAC,MAAM,MACV/I,IAAI,CAAC;QAGV,MAAMqP,IAAA,GAAO,IAAAlQ,KAAA,CAAAa,IAAI,EAACkP,YAAA,EAAc5F,KAAA;QAChC,MAAMgG,UAAA,GAAc,GAAED,IAAK,OAAM;QACjC,MAAME,WAAA,GAAc,IAAApQ,KAAA,CAAAa,IAAI,EAACuE,MAAA,EAAQ+E,KAAA;QAEjC,IAAIoF,iBAAA,KAAsB,MAAM1S,MAAA,CAAOsT,UAAA,IAAc;UACnD,MAAMnT,GAAA,CAAAsI,QAAQ,CAACI,KAAK,CAAC,IAAA1F,KAAA,CAAAqQ,OAAO,EAACD,WAAA,GAAc;YAAE5K,SAAA,EAAW;UAAK;UAC7D,MAAMxI,GAAA,CAAAsI,QAAQ,CAACgL,QAAQ,CAACH,UAAA,EAAYC,WAAA;UACpC;QACF;QAEA,MAAMG,QAAA,GAAW,IAAAvQ,KAAA,CAAAa,IAAI,EACnBuE,MAAA,EACC,GAAE+E,KAAM,GACP7H,UAAA,IAAc6H,KAAA,KAAU,WAAY,GAAEnK,KAAA,CAAAwQ,GAAI,OAAM,GAAG,EACpD,OAAM;QAET,MAAMC,WAAA,GAAc,IAAAzQ,KAAA,CAAAa,IAAI,EACtBuE,MAAA,EACC,GAAE+E,KAAM,OAAM7H,UAAA,GAAc,GAAEtC,KAAA,CAAAwQ,GAAI,OAAM,GAAG,EAAG,OAAM;QAEvD,MAAME,QAAA,GAAWrB,SAAA,GACb,IAAArP,KAAA,CAAAa,IAAI,EACFuE,MAAA,EACC,GAAE+E,KAAM,GACP7H,UAAA,IAAc6H,KAAA,KAAU,WAAY,GAAEnK,KAAA,CAAAwQ,GAAI,OAAM,GAAG,EACpD,MAAK,IAER,IAAAxQ,KAAA,CAAAa,IAAI,EAACsK,YAAA,EAAe,GAAEhB,KAAM,OAAM;QAEtC,MAAMnN,GAAA,CAAAsI,QAAQ,CAACI,KAAK,CAAC,IAAA1F,KAAA,CAAAqQ,OAAO,EAACE,QAAA,GAAW;UAAE/K,SAAA,EAAW;QAAK;QAC1D,MAAMxI,GAAA,CAAAsI,QAAQ,CAACI,KAAK,CAAC,IAAA1F,KAAA,CAAAqQ,OAAO,EAACK,QAAA,GAAW;UAAElL,SAAA,EAAW;QAAK;QAE1D,MAAMmL,OAAA,GAAW,GAAET,IAAK,OAAM;QAC9B,MAAMU,OAAA,GAAW,GAAEV,IAAK,GAAEb,SAAA,GAAY,SAAS,OAAQ,EAAC;QAExD,MAAMrS,GAAA,CAAAsI,QAAQ,CAACgL,QAAQ,CAACK,OAAA,EAASJ,QAAA;QACjC,MAAMvT,GAAA,CAAAsI,QAAQ,CAACgL,QAAQ,CAACM,OAAA,EAASF,QAAA;QAEjC,IAAI,MAAM7T,MAAA,CAAQ,GAAEqT,IAAK,WAAU,GAAG;UACpC,MAAMlT,GAAA,CAAAsI,QAAQ,CAACI,KAAK,CAAC,IAAA1F,KAAA,CAAAqQ,OAAO,EAACI,WAAA,GAAc;YAAEjL,SAAA,EAAW;UAAK;UAC7D,MAAMxI,GAAA,CAAAsI,QAAQ,CAACgL,QAAQ,CAAE,GAAEJ,IAAK,WAAU,EAAEO,WAAA;QAC9C;MACF;IAEJ;IAEA,IAAIxM,MAAA,CAAOC,IAAI,CAACkH,cAAA,EAAgBpI,MAAM,EAAE;MACtC7D,OAAA,CAAQC,GAAG,CAAC,IAAAyR,MAAA,CAAAC,iBAAiB,EAAC1F,cAAA;IAChC;IACA,IAAIC,kBAAA,EAAoB;MACtB,MAAM,IAAI3O,WAAA,CACP,kGAAiG;IAEtG;IAEA,IAAIoQ,WAAA,EAAa;MACf,MAAM,IAAIpQ,WAAA,CACP,oDAAmDqQ,UAAA,CACjDgE,IAAI,GACJlQ,IAAI,CAAC,MAAQ,EAAC;IAErB;IAEA,IAAA7D,GAAA,CAAA2I,aAAa,EACX,IAAA3F,KAAA,CAAAa,IAAI,EAACD,OAAA,EAASL,WAAA,CAAAqF,aAAa,GAC3BC,IAAA,CAAKC,SAAS,CAAC;MACbC,OAAA,EAAS;MACTC,YAAA,EAAcZ,MAAA;MACda,OAAA,EAAS;IACX,IACA;IAGF,IAAI5E,SAAA,EAAW;MACb,MAAMA,SAAA,CAAU2P,KAAK;IACvB;IAEA,MAAM/B,gBAAA;EACR;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}