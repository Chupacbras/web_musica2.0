{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n0 && (module.exports = {\n  addSearchParamsIfPageSegment: null,\n  createFlightRouterStateFromLoaderTree: null\n});\nfunction _export(target, all) {\n  for (var name in all) Object.defineProperty(target, name, {\n    enumerable: true,\n    get: all[name]\n  });\n}\n_export(exports, {\n  addSearchParamsIfPageSegment: function () {\n    return addSearchParamsIfPageSegment;\n  },\n  createFlightRouterStateFromLoaderTree: function () {\n    return createFlightRouterStateFromLoaderTree;\n  }\n});\nconst _constants = require(\"../../shared/lib/constants\");\nfunction addSearchParamsIfPageSegment(segment, searchParams) {\n  const isPageSegment = segment === _constants.PAGE_SEGMENT_KEY;\n  if (isPageSegment) {\n    const stringifiedQuery = JSON.stringify(searchParams);\n    return stringifiedQuery !== \"{}\" ? segment + \"?\" + stringifiedQuery : segment;\n  }\n  return segment;\n}\nfunction createFlightRouterStateFromLoaderTree([segment, parallelRoutes, {\n  layout\n}], getDynamicParamFromSegment, searchParams, rootLayoutIncluded = false) {\n  const dynamicParam = getDynamicParamFromSegment(segment);\n  const treeSegment = dynamicParam ? dynamicParam.treeSegment : segment;\n  const segmentTree = [addSearchParamsIfPageSegment(treeSegment, searchParams), {}];\n  if (!rootLayoutIncluded && typeof layout !== \"undefined\") {\n    rootLayoutIncluded = true;\n    segmentTree[4] = true;\n  }\n  segmentTree[1] = Object.keys(parallelRoutes).reduce((existingValue, currentValue) => {\n    existingValue[currentValue] = createFlightRouterStateFromLoaderTree(parallelRoutes[currentValue], getDynamicParamFromSegment, searchParams, rootLayoutIncluded);\n    return existingValue;\n  }, {});\n  return segmentTree;\n}","map":{"version":3,"names":["addSearchParamsIfPageSegment","createFlightRouterStateFromLoaderTree","segment","searchParams","isPageSegment","_constants","PAGE_SEGMENT_KEY","stringifiedQuery","JSON","stringify","parallelRoutes","layout","getDynamicParamFromSegment","rootLayoutIncluded","dynamicParam","treeSegment","segmentTree","Object","keys","reduce","existingValue","currentValue"],"sources":["../../../src/server/app-render/create-flight-router-state-from-loader-tree.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;EAKgBA,4BAA4B,WAAAA,CAAA;WAA5BA,4BAAA;;EAgBAC,qCAAqC,WAAAA,CAAA;WAArCA,qCAAA;;;2BAlBiB;AAE1B,SAASD,6BACdE,OAAgB,EAChBC,YAAiB;EAEjB,MAAMC,aAAA,GAAgBF,OAAA,KAAYG,UAAA,CAAAC,gBAAgB;EAElD,IAAIF,aAAA,EAAe;IACjB,MAAMG,gBAAA,GAAmBC,IAAA,CAAKC,SAAS,CAACN,YAAA;IACxC,OAAOI,gBAAA,KAAqB,OACxBL,OAAA,GAAU,MAAMK,gBAAA,GAChBL,OAAA;EACN;EAEA,OAAOA,OAAA;AACT;AAEO,SAASD,sCACd,CAACC,OAAA,EAASQ,cAAA,EAAgB;EAAEC;AAAM,CAAE,CAAa,EACjDC,0BAAsD,EACtDT,YAAiB,EACjBU,kBAAA,GAAqB,KAAK;EAE1B,MAAMC,YAAA,GAAeF,0BAAA,CAA2BV,OAAA;EAChD,MAAMa,WAAA,GAAcD,YAAA,GAAeA,YAAA,CAAaC,WAAW,GAAGb,OAAA;EAE9D,MAAMc,WAAA,GAAiC,CACrChB,4BAAA,CAA6Be,WAAA,EAAaZ,YAAA,GAC1C,CAAC,EACF;EAED,IAAI,CAACU,kBAAA,IAAsB,OAAOF,MAAA,KAAW,aAAa;IACxDE,kBAAA,GAAqB;IACrBG,WAAW,CAAC,EAAE,GAAG;EACnB;EAEAA,WAAW,CAAC,EAAE,GAAGC,MAAA,CAAOC,IAAI,CAACR,cAAA,EAAgBS,MAAM,CACjD,CAACC,aAAA,EAAeC,YAAA;IACdD,aAAa,CAACC,YAAA,CAAa,GAAGpB,qCAAA,CAC5BS,cAAc,CAACW,YAAA,CAAa,EAC5BT,0BAAA,EACAT,YAAA,EACAU,kBAAA;IAEF,OAAOO,aAAA;EACT,GACA,CAAC;EAGH,OAAOJ,WAAA;AACT"},"metadata":{},"sourceType":"script","externalDependencies":[]}